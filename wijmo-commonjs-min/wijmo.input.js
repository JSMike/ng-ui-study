/*
    *
    * Wijmo Library 5.20171.282
    * http://wijmo.com/
    *
    * Copyright(c) GrapeCity, Inc.  All rights reserved.
    *
    * Licensed under the Wijmo Commercial License.
    * sales@wijmo.com
    * wijmo.com/products/wijmo-5/license/
    *
    */
"use strict";var __extends=this&&this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},wjcCore=require('wijmo/wijmo'),wjcSelf=require('wijmo/wijmo.input'),DropDown,DateSelectionMode,Calendar,ColorPicker,ListBox,FormatItemEventArgs,ComboBox,AutoComplete,Menu,MultiSelect,MultiAutoComplete,PopupTrigger,Popup,InputDate,InputTime,InputDateTime,InputNumber,InputMask,InputColor;window.wijmo=window.wijmo||{};window.wijmo.input=wjcSelf;DropDown=function(n){function t(t){var i=this,e,r,u,f;n.call(this,t,null,!0);this._showBtn=!0;this._autoExpand=!0;this._animate=!1;this.textChanged=new wjcCore.Event;this.isDroppedDownChanging=new wjcCore.Event;this.isDroppedDownChanged=new wjcCore.Event;e=this.getTemplate();this.applyTemplate('wj-control wj-dropdown wj-content',e,{_tbx:'input',_btn:'btn',_dropDown:'dropdown'},'input');this._elRef=this._tbx;this._createDropDown();this._updateBtn();r=this._dropDown;r&&r.parentElement&&r.parentElement.removeChild(r);wjcCore.addClass(this.hostElement,'wj-state-collapsed');u=this._updateFocusState.bind(this);this.addEventListener(this.dropDown,'blur',u,!0);this.addEventListener(this.dropDown,'focus',u);f=this._keydown.bind(this);this.addEventListener(this.hostElement,'keydown',f);this.addEventListener(this.dropDown,'keydown',f);this.addEventListener(this._tbx,'keypress',function(n){n.keyCode==9787&&i._altDown&&n.preventDefault()});this.addEventListener(this._tbx,'input',function(){i._setText(i.text,!1)});this.addEventListener(this._tbx,'click',function(){i._autoExpand&&i._expandSelection()});wjcCore.isIE9()&&this.addEventListener(this._tbx,'keyup',function(){i._setText(i.text,!1)});this.addEventListener(this._btn,'click',this._btnclick.bind(this));this.addEventListener(this._dropDown,'click',function(n){n.stopPropagation()})}return __extends(t,n),Object.defineProperty(t.prototype,"text",{get:function(){return this._tbx.value},set:function(n){n!=this.text&&this._setText(n,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputElement",{get:function(){return this._tbx},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isReadOnly",{get:function(){return this._tbx.readOnly},set:function(n){this._tbx.readOnly=wjcCore.asBoolean(n);wjcCore.toggleClass(this.hostElement,'wj-state-readonly',this.isReadOnly)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isRequired",{get:function(){return this._tbx.required},set:function(n){this._tbx.required=wjcCore.asBoolean(n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"placeholder",{get:function(){return this._tbx.placeholder},set:function(n){this._tbx.placeholder=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDroppedDown",{get:function(){return this._dropDown.style.display!='none'},set:function(n){if(n=wjcCore.asBoolean(n)&&!this.isDisabled&&!this.isReadOnly,n!=this.isDroppedDown&&this.onIsDroppedDownChanging(new wjcCore.CancelEventArgs)){var i=this.hostElement,t=this._dropDown;n?(t.style.minWidth||(t.style.minWidth=i.getBoundingClientRect().width+'px'),t.style.display='block',this._updateDropDown()):(this.containsFocus()&&(this.isTouching&&this.showDropDownButton?this.focus():this.selectAll()),wjcCore.hidePopup(t));this._updateFocusState();wjcCore.toggleClass(i,'wj-state-collapsed',!this.isDroppedDown);this.onIsDroppedDownChanged()}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dropDown",{get:function(){return this._dropDown},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dropDownCssClass",{get:function(){return this._cssClass},set:function(n){n!=this._cssClass&&(wjcCore.removeClass(this._dropDown,this._cssClass),this._cssClass=wjcCore.asString(n),wjcCore.addClass(this._dropDown,this._cssClass))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showDropDownButton",{get:function(){return this._showBtn},set:function(n){this._showBtn=wjcCore.asBoolean(n);this._updateBtn()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoExpandSelection",{get:function(){return this._autoExpand},set:function(n){this._autoExpand=wjcCore.asBoolean(n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAnimated",{get:function(){return this._animate},set:function(n){this._animate=wjcCore.asBoolean(n)},enumerable:!0,configurable:!0}),t.prototype.selectAll=function(){this._elRef==this._tbx?wjcCore.setSelectionRange(this._tbx,0,this.text.length):this.focus()},t.prototype.onTextChanged=function(n){this.textChanged.raise(this,n);this._updateState()},t.prototype.onIsDroppedDownChanging=function(n){return this.isDroppedDownChanging.raise(this,n),!n.cancel},t.prototype.onIsDroppedDownChanged=function(n){var t=this;this.removeEventListener(document,'mousedown');this.removeEventListener(document,'keydown');this.isDroppedDown&&!this.containsFocus()&&(this.addEventListener(document,'mousedown',function(n){wjcCore.contains(t.dropDown,n.target)||wjcCore.contains(t.hostElement,n.target)||(t.isDroppedDown=!1)}),this.addEventListener(document,'keydown',function(){t.containsFocus()||(t.isDroppedDown=!1)}));this.isDroppedDownChanged.raise(this,n)},t.prototype.onGotFocus=function(t){this.isTouching||this.selectAll();n.prototype.onGotFocus.call(this,t)},t.prototype.onLostFocus=function(t){this._commitText();this.containsFocus()||(this.isDroppedDown=!1);n.prototype.onLostFocus.call(this,t)},t.prototype.containsFocus=function(){return n.prototype.containsFocus.call(this)||wjcCore.contains(this._dropDown,wjcCore.getActiveElement())},t.prototype.dispose=function(){this.isDroppedDown=!1;n.prototype.dispose.call(this)},t.prototype.refresh=function(t){if(t===void 0&&(t=!0),n.prototype.refresh.call(this,t),this.isDroppedDown&&getComputedStyle(this.hostElement).display!='none'){var i=wjcCore.getActiveElement();wjcCore.showPopup(this._dropDown,this.hostElement,!1,!1,this.dropDownCssClass==null);i instanceof HTMLElement&&i!=wjcCore.getActiveElement()&&i.focus()}},t.prototype._handleResize=function(){this.isDroppedDown&&this.refresh()},t.prototype._expandSelection=function(){var r=this._tbx,i=r.value,n=r.selectionStart,t=r.selectionEnd,u;if(i&&n==t&&(u=this._getCharType(i,n),u>-1)){for(;t<i.length;t++)if(this._getCharType(i,t)!=u)break;for(;n>0;n--)if(this._getCharType(i,n-1)!=u)break;n!=t&&r.setSelectionRange(n,t)}},t.prototype._getCharType=function(n,t){var i=n[t];return i>='0'&&i<='9'?0:i>='a'&&i<='z'||i>='A'&&i<='Z'?1:-1},t.prototype._keydown=function(n){if(!n.defaultPrevented){this._altDown=n.altKey;switch(n.keyCode){case wjcCore.Key.Tab:case wjcCore.Key.Escape:case wjcCore.Key.Enter:this.isDroppedDown&&(this.isDroppedDown=!1,n.keyCode==wjcCore.Key.Tab||this.containsFocus()||this.focus(),n.preventDefault());break;case wjcCore.Key.F4:case wjcCore.Key.Up:case wjcCore.Key.Down:(n.keyCode==wjcCore.Key.F4||n.altKey)&&wjcCore.contains(document.body,this.hostElement)&&(this.isDroppedDown=!this.isDroppedDown,n.preventDefault())}}},t.prototype._btnclick=function(){this.isDroppedDown=!this.isDroppedDown},t.prototype._setText=function(n){n==null&&(n='');n=n.toString();n!=this._tbx.value&&(this._tbx.value=n);n!=this._oldText&&(this._oldText=n,this.onTextChanged())},t.prototype._updateBtn=function(){this._btn.tabIndex=-1;this._btn.style.display=this._showBtn?'':'none'},t.prototype._createDropDown=function(){},t.prototype._commitText=function(){},t.prototype._updateDropDown=function(){this.isDroppedDown&&(this._commitText(),wjcCore.showPopup(this._dropDown,this.hostElement,!1,this._animate,this.dropDownCssClass==null))},t.controlTemplate='<div style="position:relative" class="wj-template"><div class="wj-input"><div class="wj-input-group wj-input-btn-visible"><input wj-part="input" type="text" class="wj-form-control" /><span wj-part="btn" class="wj-input-group-btn" tabindex="-1"><button class="wj-btn wj-btn-default" type="button" tabindex="-1"><span class="wj-glyph-down"><\/span><\/button><\/span><\/div><\/div><div wj-part="dropdown" class="wj-content wj-dropdown-panel" style="display:none;position:absolute;z-index:100"><\/div><\/div>',t}(wjcCore.Control);exports.DropDown=DropDown,function(n){n[n.None=0]="None";n[n.Day=1]="Day";n[n.Month=2]="Month"}(exports.DateSelectionMode||(exports.DateSelectionMode={}));DateSelectionMode=exports.DateSelectionMode;Calendar=function(n){function t(t,i){n.call(this,t);this._readOnly=!1;this._selMode=DateSelectionMode.Day;this.valueChanged=new wjcCore.Event;this.displayMonthChanged=new wjcCore.Event;this.formatItem=new wjcCore.Event;this._value=wjcCore.DateTime.newDate();this._currMonth=this._getMonth(this._value);this._createChildren();this.refresh(!0);this.addEventListener(this.hostElement,'mouseup',this._click.bind(this));this.addEventListener(this.hostElement,'keydown',this._keydown.bind(this));this.initialize(i)}return __extends(t,n),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(n){n=wjcCore.asDate(n,!0);n=this._clamp(n);this._valid(n)&&(this.displayMonth=this._getMonth(n),wjcCore.DateTime.equals(this._value,n)||(this._value=n,this.invalidate(!1),this.onValueChanged()))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"min",{get:function(){return this._min},set:function(n){n!=this.min&&(this._min=wjcCore.asDate(n,!0),this.refresh())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this._max},set:function(n){n!=this.max&&(this._max=wjcCore.asDate(n,!0),this.refresh())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectionMode",{get:function(){return this._selMode},set:function(n){var t,i;n!=this._selMode&&(this._selMode=wjcCore.asEnum(n,DateSelectionMode),t=this._monthMode(),t&&(this.monthView=!1),i=this._btnMth.querySelector('.wj-glyph-down'),i&&(i.style.display=t?'none':''))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isReadOnly",{get:function(){return this._readOnly},set:function(n){this._readOnly=wjcCore.asBoolean(n);wjcCore.toggleClass(this.hostElement,'wj-state-readonly',this.isReadOnly)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstDayOfWeek",{get:function(){return this._fdw},set:function(n){if(n!=this._fdw){if(n=wjcCore.asNumber(n,!0),n&&(n>6||n<0))throw'firstDayOfWeek must be between 0 and 6 (Sunday to Saturday).';this._fdw=n;this.refresh()}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayMonth",{get:function(){return this._currMonth},set:function(n){if(!wjcCore.DateTime.equals(this.displayMonth,n)){n=wjcCore.asDate(n);var t=this.monthView?this._monthInValidRange(n):this._yearInValidRange(n);t&&(this._currMonth=this._getMonth(this._clamp(n)),this.invalidate(!0),this.onDisplayMonthChanged())}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showHeader",{get:function(){return this._tbHdr.style.display!='none'},set:function(n){this._tbHdr.style.display=wjcCore.asBoolean(n)?'':'none'},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"monthView",{get:function(){return this._tbMth.style.display!='none'},set:function(n){n!=this.monthView&&(this._tbMth.style.display=n?'':'none',this._tbYr.style.display=n?'none':'')},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemFormatter",{get:function(){return this._itemFormatter},set:function(n){n!=this._itemFormatter&&(this._itemFormatter=wjcCore.asFunction(n),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemValidator",{get:function(){return this._itemValidator},set:function(n){n!=this._itemValidator&&(this._itemValidator=wjcCore.asFunction(n),this.invalidate())},enumerable:!0,configurable:!0}),t.prototype.onValueChanged=function(n){this.valueChanged.raise(this,n)},t.prototype.onDisplayMonthChanged=function(n){this.displayMonthChanged.raise(this,n)},t.prototype.onFormatItem=function(n){this.formatItem.raise(this,n)},t.prototype.refresh=function(t){var f,u,i,e,h,s,c,o,r;for(t===void 0&&(t=!0),e=this.displayMonth,h=this.firstDayOfWeek!=null?this.firstDayOfWeek:wjcCore.Globalize.getFirstDayOfWeek(),n.prototype.refresh.call(this,t),this._firstDay=wjcCore.DateTime.addDays(e,-(e.getDay()-h+7)%7),wjcCore.setText(this._spMth,wjcCore.Globalize.format(e,'y')),f=this._tbMth.querySelectorAll('td'),r=0;r<7&&r<f.length;r++)i=wjcCore.DateTime.addDays(this._firstDay,r),wjcCore.setText(f[r],wjcCore.Globalize.format(i,'ddd'));for(r=7;r<f.length;r++)if(u=f[r],i=wjcCore.DateTime.addDays(this._firstDay,r-7),wjcCore.setText(u,i.getDate().toString()),u.className='',s=!this._valid(i),wjcCore.toggleClass(u,'wj-state-invalid',s),wjcCore.toggleClass(u,'wj-state-selected',wjcCore.DateTime.sameDate(i,this.value)),wjcCore.toggleClass(u,'wj-day-today',wjcCore.DateTime.sameDate(i,new Date)),wjcCore.toggleClass(u,'wj-day-othermonth',s||i.getMonth()!=e.getMonth()||!this._inValidRange(i)),this.itemFormatter&&this.itemFormatter(i,u),this.formatItem.hasHandlers){c=new FormatItemEventArgs(r,i,u);this.onFormatItem(c)}for(o=this._tbMth.querySelectorAll('tr'),o.length&&(i=wjcCore.DateTime.addDays(this._firstDay,28),o[o.length-2].style.display=i.getMonth()==e.getMonth()?'':'none',i=wjcCore.DateTime.addDays(this._firstDay,35),o[o.length-1].style.display=i.getMonth()==e.getMonth()?'':'none'),f=this._tbYr.querySelectorAll('td'),f.length&&wjcCore.setText(f[0],e.getFullYear().toString()),r=1;r<f.length;r++)u=f[r],i=new Date(e.getFullYear(),r-1,1),wjcCore.setText(u,wjcCore.Globalize.format(i,'MMM')),u.className='',wjcCore.toggleClass(u,'wj-state-disabled',!this._monthInValidRange(i)),wjcCore.toggleClass(u,'wj-state-selected',this._sameMonth(i,this.value))},t.prototype._canChangeValue=function(){return!this._readOnly&&this._selMode!=DateSelectionMode.None},t.prototype._valid=function(n){return this.itemValidator&&n?this.itemValidator(n):!0},t.prototype._inValidRange=function(n){return this.min&&n<wjcCore.DateTime.fromDateTime(this.min,n)?!1:this.max&&n>wjcCore.DateTime.fromDateTime(this.max,n)?!1:!0},t.prototype._monthInValidRange=function(n){if(this.min||this.max){var t=n.getFullYear(),i=n.getMonth(),r=new Date(t,i,1),u=wjcCore.DateTime.addDays(new Date(t,i+1),-1);if(this.min&&this.min>u||this.max&&this.max<r)return!1}return!0},t.prototype._yearInValidRange=function(n){if(this.min||this.max){var t=n.getFullYear(),i=new Date(t,0),r=wjcCore.DateTime.addDays(new Date(t+1,0),-1);if(this.min&&this.min>r||this.max&&this.max<i)return!1}return!0},t.prototype._sameMonth=function(n,t){return wjcCore.isDate(n)&&wjcCore.isDate(t)&&n.getMonth()==t.getMonth()&&n.getFullYear()==t.getFullYear()},t.prototype._clamp=function(n){var t,i;return n&&(this.min&&(t=wjcCore.DateTime.fromDateTime(this.min,n),n<t&&(n=t)),this.max&&(i=wjcCore.DateTime.fromDateTime(this.max,n),n>i&&(n=i))),n},t.prototype._createChildren=function(){var f=this.getTemplate(),n,i,t,r,u;for(this.applyTemplate('wj-control wj-calendar',f,{_tbHdr:'tbl-header',_btnMth:'btn-month',_spMth:'span-month',_btnPrv:'btn-prev',_btnTdy:'btn-today',_btnNxt:'btn-next',_tbMth:'tbl-month',_tbYr:'tbl-year'}),n=this._createElement('tr',this._tbMth,'wj-header'),t=0;t<7;t++)this._createElement('td',n);for(i=0;i<6;i++)for(n=this._createElement('tr',this._tbMth),t=0;t<7;t++)this._createElement('td',n);for(n=this._createElement('tr',this._tbYr,'wj-header'),this._createElement('td',n).setAttribute('colspan','4'),r=0;r<3;r++)for(n=this._createElement('tr',this._tbYr),u=0;u<4;u++)this._createElement('td',n)},t.prototype._createElement=function(n,t,i){var r=document.createElement(n);return t&&t.appendChild(r),i&&wjcCore.addClass(r,i),r},t.prototype._click=function(n){var i=!1,t=n.target,u,r;wjcCore.contains(this._btnMth,t)&&!this._monthMode()?(this.monthView=!this.monthView,i=!0):wjcCore.contains(this._btnPrv,t)?(this._navigate(-1),i=!0):wjcCore.contains(this._btnNxt,t)?(this._navigate(1),i=!0):wjcCore.contains(this._btnTdy,t)&&(this._navigate(0),i=!0);t&&!i&&(t=wjcCore.closest(t,'TD'),t&&(this.monthView?(u=this._getCellIndex(this._tbMth,t),u>6&&this._canChangeValue()&&(r=wjcCore.DateTime.fromDateTime(wjcCore.DateTime.addDays(this._firstDay,u-7),this.value),this._inValidRange(r)&&this._valid(r)&&(this.value=r),i=!0)):(u=this._getCellIndex(this._tbYr,t),u>0&&(this.displayMonth=new Date(this.displayMonth.getFullYear(),u-1,1),this._monthMode()?this._canChangeValue()&&(r=wjcCore.DateTime.fromDateTime(this.displayMonth,this.value),this._inValidRange(r)&&(this.value=r)):this.monthView=!0,i=!0))));i&&(n.preventDefault(),this.focus())},t.prototype._getCellIndex=function(n,t){for(var r=n.querySelectorAll('TD'),i=0;i<r.length;i++)if(r[i]==t)return i;return-1},t.prototype._keydown=function(n){var i,f;if(!n.defaultPrevented&&!n.ctrlKey&&!n.shiftKey&&!n.altKey&&!n.metaKey){var r=0,t=0,u=!0;if(this.monthView)switch(n.keyCode){case wjcCore.Key.Left:r=-1;break;case wjcCore.Key.Right:r=1;break;case wjcCore.Key.Up:r=-7;break;case wjcCore.Key.Down:r=7;break;case wjcCore.Key.PageDown:t=1;break;case wjcCore.Key.PageUp:t=-1;break;default:u=!1}else switch(n.keyCode){case wjcCore.Key.Left:t=-1;break;case wjcCore.Key.Right:t=1;break;case wjcCore.Key.Up:t=-4;break;case wjcCore.Key.Down:t=4;break;case wjcCore.Key.PageDown:t=12;break;case wjcCore.Key.PageUp:t=-12;break;case wjcCore.Key.Enter:this._monthMode()?u=!1:this.monthView=!0;break;default:u=!1}if(this.value&&this._canChangeValue()&&(r||t)){for(i=this.value,i=wjcCore.DateTime.addDays(i,r),i=wjcCore.DateTime.addMonths(i,t),f=0;!this._valid(i)&&f<31;f++)i=wjcCore.DateTime.addDays(i,r>0||t>0?1:-1);this.value=i}u&&n.preventDefault()}},t.prototype._getMonth=function(n){return n||(n=new Date),new Date(n.getFullYear(),n.getMonth(),1)},t.prototype._monthMode=function(){return this.selectionMode==DateSelectionMode.Month},t.prototype._navigate=function(n){var i=this.monthView,t;switch(n){case 0:t=new Date;i?this._canChangeValue()&&(this.value=wjcCore.DateTime.fromDateTime(t,this.value)):this._canChangeValue()&&(this.value=this._getMonth(t));this.displayMonth=this._getMonth(t);break;case 1:this.displayMonth=wjcCore.DateTime.addMonths(this.displayMonth,i?1:12);break;case-1:this.displayMonth=wjcCore.DateTime.addMonths(this.displayMonth,i?-1:-12)}},t.controlTemplate='<div class="wj-calendar-outer wj-content"><div wj-part="tbl-header" class="wj-calendar-header"><div wj-part="btn-month" class="wj-month-select"><span wj-part="span-month"><\/span> <span class="wj-glyph-down"><\/span><\/div><div class="wj-btn-group"><button type="button" wj-part="btn-prev" class="wj-btn wj-btn-default"><span class="wj-glyph-left"><\/span><\/button><button type="button" wj-part="btn-today" class="wj-btn wj-btn-default"><span class="wj-glyph-circle"><\/span><\/button><button type="button" wj-part="btn-next" class="wj-btn wj-btn-default"><span class="wj-glyph-right"><\/span><\/button><\/div><\/div><table wj-part="tbl-month" class="wj-calendar-month"/><table wj-part="tbl-year" class="wj-calendar-year" style="display:none"/><\/div>',t}(wjcCore.Control);exports.Calendar=Calendar;ColorPicker=function(n){function t(i,r){var f=this,u,e,o;n.call(this,i);this._hsb=[.5,1,1];this._alpha=1;this.valueChanged=new wjcCore.Event;u=this.getTemplate();this.applyTemplate('wj-control wj-colorpicker wj-content',u,{_eSB:'div-sb',_eHue:'div-hue',_eAlpha:'div-alpha',_ePreview:'div-pv',_ePal:'div-pal',_eText:'div-text'});this._palette='#FFF,#000, #F00,#FFC000,#FFFF00,#92D050,#00B050,#00B0F0,#0070C0,#7030A0'.split(',');this._updatePalette();this._eHue.style.backgroundImage='url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAD4CAIAAACi6hsPAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuM4zml1AAAAGvSURBVDhPXdBPaM9xHMfxz4pWaxcmtoOhpdXSVpiyHWxqmVpDjaU5rK34XfypjTJ/p+ZPay6jhsOsRrKwaJElf9IQq03WIkv4FeMwMq221tfje1ByeFzfvd7PEKWGEKWTQRZLySWfVRRTQjmVbKWGOhLsZT+HaeY0bbTTQSfdXOcWffTzmAFeMcwoYyT5ygS/mA5hNgphip98J8kHRnnNSwZ4yH1uc4OrdHGR87RximYO0cgedlLLdqqoYAPrWMtKVrCcJSxiPmnMJUQp/Bsyk2xyyKOAQooopYwKtlDNDur5G7SBJo7RQiv/B+2hl3s84CkvGGKEOOYnxolj/mYmhBmDJ5ngCx95xxsGecYj4pB3iENeoZMO2mmlhaMcpIE4ZII6aqhmM3HMMkooopB88sghm0wySCeVlCjMCVFIYx4LWUwOeRSwhmLWU84mqqihll3sppEmjnOSs5zjEl1c4yZ99POE5wwxwns+840fTDFLFKaZZIJxkozxlmEGGSC+GF++Sy89dHOZC8Rr4lVnOMERDrCPBPXEX22jko2UEn+/mnxyWUYWC0gnNUQh/AEc0HJs6cex0gAAAABJRU5ErkJggg==)';this._eHue.style.backgroundSize='contain';navigator.appVersion.indexOf('MSIE 9')>-1&&(this._eSB.children[0].style.filter='progid:DXImageTransform.Microsoft.gradient(startColorstr=#ffffffff,endColorstr=#00ffffff,GradientType=1)',this._eSB.children[1].style.filter='progid:DXImageTransform.Microsoft.gradient(startColorstr=#00000000,endColorstr=#ff000000,GradientType=0)');u=t._tplCursor;this._cSB=wjcCore.createElement(u);this._cHue=wjcCore.createElement(u);this._cHue.style.width='100%';this._cAlpha=wjcCore.createElement(u);this._cAlpha.style.height='100%';this._eSB.appendChild(this._cSB);this._eHue.appendChild(this._cHue);this._eAlpha.appendChild(this._cAlpha);this.addEventListener(this.hostElement,'mousedown',function(n){document.addEventListener('mousemove',e);document.addEventListener('mouseup',o);f._mouseDown(n)});e=function(n){f._mouseMove(n)};o=function(n){document.removeEventListener('mousemove',e);document.removeEventListener('mouseup',o);f._mouseUp(n)};this.addEventListener(this.hostElement,'click',function(n){var t=n.target,i;t&&t.tagName=='DIV'&&wjcCore.contains(f._ePal,t)&&(i=t.style.backgroundColor,i&&(f.value=new wjcCore.Color(i).toString()))});this.value='#ffffff';this.initialize(r);this._updatePanels()}return __extends(t,n),Object.defineProperty(t.prototype,"showAlphaChannel",{get:function(){return this._eAlpha.parentElement.style.display!='none'},set:function(n){this._eAlpha.parentElement.style.display=wjcCore.asBoolean(n)?'':'none'},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showColorString",{get:function(){return this._eText.style.display!='none'},set:function(n){this._eText.style.display=wjcCore.asBoolean(n)?'':'none'},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(n){if(n!=this.value){this._value=wjcCore.asString(n);this._eText.innerText=this._value;var i=new wjcCore.Color(this._value),t=i.getHsb();(this._hsb[0]!=t[0]||this._hsb[1]!=t[1]||this._hsb[2]!=t[2]||this._alpha!=i.a)&&(t[2]==0?(t[0]=this._hsb[0],t[1]=this._hsb[1]):t[1]==0&&(t[0]=this._hsb[0]),this._hsb=t,this._alpha=i.a,this.onValueChanged())}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"palette",{get:function(){return this._palette},set:function(n){var t,i;for(n=wjcCore.asArray(n),t=0;t<n.length&&t<this._palette.length;t++)i=wjcCore.asString(n[t]),this._palette[t]=i;this._updatePalette()},enumerable:!0,configurable:!0}),t.prototype.onValueChanged=function(n){this._updatePanels();this.valueChanged.raise(this,n)},t.prototype._mouseDown=function(n){this._htDown=this._getTargetPanel(n);this._htDown&&(n.preventDefault(),this.focus(),this._mouseMove(n))},t.prototype._mouseMove=function(n){if(this._htDown){var t=this._htDown.getBoundingClientRect();this._htDown==this._eHue?(this._hsb[0]=wjcCore.clamp((n.clientY-t.top)/t.height,0,.99),this._updateColor()):this._htDown==this._eSB?(this._hsb[1]=wjcCore.clamp((n.clientX-t.left)/t.width,0,1),this._hsb[2]=wjcCore.clamp(1-(n.clientY-t.top)/t.height,0,1),this._updateColor()):this._htDown==this._eAlpha&&(this._alpha=wjcCore.clamp((n.clientX-t.left)/t.width,0,1),this._updateColor())}},t.prototype._mouseUp=function(){this._htDown=null},t.prototype._updateColor=function(){var n=wjcCore.Color.fromHsb(this._hsb[0],this._hsb[1],this._hsb[2],this._alpha);this.value=n.toString();this._updatePanels()},t.prototype._updatePalette=function(){var e=new wjcCore.Color('#fff'),o=new wjcCore.Color('#000'),i,n,f;for(this._ePal.innerHTML='',i=0;i<this._palette.length;i++){var r=wjcCore.createElement('<div style="float:left;width:10%;box-sizing:border-box;padding:1px">'),t=new wjcCore.Color(this._palette[i]),u=t.getHsb();for(r.appendChild(this._makePalEntry(t,4)),n=0;n<5;n++)u[1]==0?(f=n*.1+(u[2]>.5?.05:.55),t=wjcCore.Color.interpolate(e,o,f)):t=wjcCore.Color.fromHsb(u[0],.1+n*.2,1-n*.1),r.appendChild(this._makePalEntry(t,0));this._ePal.appendChild(r)}},t.prototype._makePalEntry=function(n,t){var i=document.createElement('div');return wjcCore.setCss(i,{cursor:'pointer',backgroundColor:n.toString(),marginBottom:t?t:''}),i.innerHTML='&nbsp',i},t.prototype._updatePanels=function(){var t=wjcCore.Color.fromHsb(this._hsb[0],1,1,1),n=wjcCore.Color.fromHsb(this._hsb[0],this._hsb[1],this._hsb[2],1);this._eSB.style.backgroundColor=t.toString();this._eAlpha.style.background='linear-gradient(to right, transparent 0%, '+n.toString()+' 100%)';navigator.appVersion.indexOf('MSIE 9')>-1&&(this._eAlpha.style.filter='progid:DXImageTransform.Microsoft.gradient(startColorstr=#00000000,endColorstr='+n.toString()+', GradientType = 1)');this._ePreview.style.backgroundColor=this.value;this._cHue.style.top=(this._hsb[0]*100).toFixed(0)+'%';this._cSB.style.left=(this._hsb[1]*100).toFixed(0)+'%';this._cSB.style.top=(100-this._hsb[2]*100).toFixed(0)+'%';this._cAlpha.style.left=(this._alpha*100).toFixed(0)+'%'},t.prototype._getTargetPanel=function(n){var t=n.target;return wjcCore.contains(this._eSB,t)?this._eSB:wjcCore.contains(this._eHue,t)?this._eHue:wjcCore.contains(this._eAlpha,t)?this._eAlpha:null},t.controlTemplate='<div style="position:relative;width:100%;height:100%"><div style="float:left;width:50%;height:100%;box-sizing:border-box;padding:2px"><div wj-part="div-pal"><div style="float:left;width:10%;box-sizing:border-box;padding:2px"><div style="background-color:black;width:100%">&nbsp;<\/div><div style="height:6px"><\/div><\/div><\/div><div wj-part="div-text" style="position:absolute;bottom:0px;display:none"><\/div><\/div><div style="float:left;width:50%;height:100%;box-sizing:border-box;padding:2px"><div wj-part="div-sb" class="wj-colorbox" style="float:left;width:89%;height:89%"><div style="position:absolute;width:100%;height:100%;background:linear-gradient(to right, white 0%,transparent 100%)"><\/div><div style="position:absolute;width:100%;height:100%;background:linear-gradient(to top, black 0%,transparent 100%)"><\/div><\/div><div style="float:left;width:1%;height:89%"><\/div><div style="float:left;width:10%;height:89%"><div wj-part="div-hue" class="wj-colorbox"><\/div><\/div><div style="float:left;width:89%;height:1%"><\/div><div style="float:left;width:89%;height:10%"><div style="width:100%;height:100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuM4zml1AAAAAcSURBVBhXY/iPBBYgAWpKQGkwgMqDAdUk/v8HAM7Mm6GatDUYAAAAAElFTkSuQmCC)"><div wj-part="div-alpha" class="wj-colorbox"><\/div><\/div><\/div><div style="float:left;width:1%;height:10%"><\/div><div style="float:left;width:10%;height:10%"><div wj-part="div-pv" class="wj-colorbox" style="position:static"><\/div><\/div><\/div><\/div>',t._tplCursor='<div style="position:absolute;left:50%;top:50%;width:7px;height:7px;transform:translate(-50%,-50%);border:2px solid #f0f0f0;border-radius:50px;box-shadow:0px 0px 4px 2px #0f0f0f"></div>',t}(wjcCore.Control);exports.ColorPicker=ColorPicker;ListBox=function(n){function t(t,i){n.call(this,t);this._pathDisplay=new wjcCore.Binding(null);this._pathValue=new wjcCore.Binding(null);this._pathChecked=new wjcCore.Binding(null);this._html=!1;this._checkedItems=[];this._search='';this.selectedIndexChanged=new wjcCore.Event;this.itemsChanged=new wjcCore.Event;this.loadingItems=new wjcCore.Event;this.loadedItems=new wjcCore.Event;this.itemChecked=new wjcCore.Event;this.checkedItemsChanged=new wjcCore.Event;this.formatItem=new wjcCore.Event;this.applyTemplate('wj-control wj-listbox wj-content',null,null);this._orgTag=='SELECT'&&this._populateSelectElement(this.hostElement);var r=this.hostElement;this.addEventListener(r,'click',this._click.bind(this));this.addEventListener(r,'keydown',this._keydown.bind(this));this.addEventListener(r,'keypress',this._keypress.bind(this));this.addEventListener(r,'wheel',function(n){r.scrollHeight>r.offsetHeight&&(n.deltaY<0&&r.scrollTop==0||n.deltaY>0&&r.scrollTop+r.offsetHeight>=r.scrollHeight)&&(n.preventDefault(),n.stopPropagation())});this.initialize(i)}return __extends(t,n),t.prototype.refresh=function(){n.prototype.refresh.call(this);(this.displayMemberPath||!this.checkedMemberPath)&&this._populateList()},Object.defineProperty(t.prototype,"itemsSource",{get:function(){return this._items},set:function(n){this._items!=n&&(this._cv&&(this._cv.currentChanged.removeHandler(this._cvCurrentChanged,this),this._cv.collectionChanged.removeHandler(this._cvCollectionChanged,this),this._cv=null),this._items=n,this._cv=wjcCore.asCollectionView(n),this._cv!=null&&(this._cv.currentChanged.addHandler(this._cvCurrentChanged,this),this._cv.collectionChanged.addHandler(this._cvCollectionChanged,this)),this._populateList(),this.onItemsChanged(),this.onSelectedIndexChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"collectionView",{get:function(){return this._cv},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isContentHtml",{get:function(){return this._html},set:function(n){n!=this._html&&(this._html=wjcCore.asBoolean(n),this._populateList())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemFormatter",{get:function(){return this._itemFormatter},set:function(n){n!=this._itemFormatter&&(this._itemFormatter=wjcCore.asFunction(n),this._populateList())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayMemberPath",{get:function(){return this._pathDisplay.path},set:function(n){n!=this.displayMemberPath&&(this._pathDisplay.path=wjcCore.asString(n),this._populateList())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedValuePath",{get:function(){return this._pathValue.path},set:function(n){this._pathValue.path=wjcCore.asString(n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"checkedMemberPath",{get:function(){return this._pathChecked.path},set:function(n){n!=this.checkedMemberPath&&(this._pathChecked.path=wjcCore.asString(n),this._populateList())},enumerable:!0,configurable:!0}),t.prototype.getDisplayValue=function(n){var t=null,i;return n>-1&&wjcCore.hasItems(this._cv)&&(t=this._cv.items[n],this.displayMemberPath&&(t=this._pathDisplay.getValue(t))),i=t!=null?t.toString():'',this.itemFormatter&&(i=this.itemFormatter(n,i)),i},t.prototype.getDisplayText=function(n){var t=this.hostElement.children,i=n>-1&&n<t.length?t[n]:null;return i!=null?i.textContent:''},Object.defineProperty(t.prototype,"selectedIndex",{get:function(){return this._cv?this._cv.currentPosition:-1},set:function(n){this._cv&&this._cv.moveCurrentToPosition(wjcCore.asNumber(n))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedItem",{get:function(){return this._cv?this._cv.currentItem:null},set:function(n){this._cv&&this._cv.moveCurrentTo(n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedValue",{get:function(){var n=this.selectedItem;return n&&this.selectedValuePath&&(n=this._pathValue.getValue(n)),n},set:function(n){var r=this.selectedValuePath,u=-1,t,i;if(this._cv){for(t=0;t<this._cv.items.length;t++)if(i=this._cv.items[t],r&&this._pathValue.getValue(i)==n||!r&&i==n){u=t;break}this.selectedIndex=u}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxHeight",{get:function(){var n=this.hostElement;return n?parseFloat(n.style.maxHeight):null},set:function(n){var t=this.hostElement;t&&(t.style.maxHeight=wjcCore.asNumber(n)+'px')},enumerable:!0,configurable:!0}),t.prototype.showSelection=function(){for(var r,u,t=this.selectedIndex,f=this.hostElement,i=f.children,n,e=0;e<i.length;e++)n=i[e],wjcCore.toggleClass(n,'wj-state-selected',e==t);t>-1&&t<i.length&&(n=i[t],r=n.getBoundingClientRect(),u=f.getBoundingClientRect(),r.bottom>u.bottom?f.scrollTop+=r.bottom-u.bottom:r.top<u.top&&(f.scrollTop-=u.top-r.top));t>-1&&this.containsFocus()&&(n=i[t],n instanceof HTMLElement&&!wjcCore.contains(n,wjcCore.getActiveElement())&&n.focus())},t.prototype.getItemChecked=function(n){var i=this._cv.items[n],t;return wjcCore.isObject(i)&&this.checkedMemberPath?this._pathChecked.getValue(i):(t=this._getCheckbox(n),t?t.checked:!1)},t.prototype.setItemChecked=function(n,t){this._setItemChecked(n,t,!0)},t.prototype.toggleItemChecked=function(n){this.setItemChecked(n,!this.getItemChecked(n))},Object.defineProperty(t.prototype,"checkedItems",{get:function(){if(this._checkedItems.splice(0,this._checkedItems.length),this._cv)for(var n=0;n<this._cv.items.length;n++)this.getItemChecked(n)&&this._checkedItems.push(this._cv.items[n]);return this._checkedItems},set:function(n){var t=this._cv,r=wjcCore.asArray(n,!1),u,i,f;if(t&&r){for(u=t.currentPosition,i=0;i<t.items.length;i++)f=t.items[i],this._setItemChecked(i,r.indexOf(f)>-1,!1);t.moveCurrentToPosition(u);this.onCheckedItemsChanged()}},enumerable:!0,configurable:!0}),t.prototype.onSelectedIndexChanged=function(n){this.selectedIndexChanged.raise(this,n)},t.prototype.onItemsChanged=function(n){this.itemsChanged.raise(this,n)},t.prototype.onLoadingItems=function(n){this.loadingItems.raise(this,n)},t.prototype.onLoadedItems=function(n){this.loadedItems.raise(this,n)},t.prototype.onItemChecked=function(n){this.itemChecked.raise(this,n)},t.prototype.onCheckedItemsChanged=function(n){this.checkedItemsChanged.raise(this,n)},t.prototype.onFormatItem=function(n){this.formatItem.raise(this,n)},t.prototype._setItemChecked=function(n,t,i){var r,u,f;i===void 0&&(i=!0);r=this._cv.items[n];wjcCore.isObject(r)&&(u=wjcCore.tryCast(this._cv,'IEditableCollectionView'),this._pathChecked.getValue(r)!=t&&(this._checking=!0,u?(u.editItem(r),this._pathChecked.setValue(r,t),u.commitEdit()):(this._pathChecked.setValue(r,t),this._cv.refresh()),this._checking=!1));f=this._getCheckbox(n);f&&f.checked!=t&&(f.checked=t);i&&(this.onItemChecked(),this.onCheckedItemsChanged())},t.prototype._cvCollectionChanged=function(){this._checking||(this._populateList(),this.onItemsChanged())},t.prototype._cvCurrentChanged=function(){this.showSelection();this.onSelectedIndexChanged()},t.prototype._populateList=function(){var r=this.hostElement,u,n,i,f,t,e;if(r){if(u=this.containsFocus(),this.onLoadingItems(),r.innerHTML='',this._cv)for(n=0;n<this._cv.items.length;n++){if(i=this.getDisplayValue(n),this._html!=!0&&(i=wjcCore.escapeHtml(i)),this.checkedMemberPath&&(f=this._pathChecked.getValue(this._cv.items[n]),i='<label><input type="checkbox"'+(f?' checked':'')+'> '+i+'</label>'),t=document.createElement('div'),t.innerHTML=i,t.className='wj-listbox-item',wjcCore.hasClass(t.firstChild,'wj-separator')&&(t.className+=' wj-separator'),this.formatItem.hasHandlers){e=new FormatItemEventArgs(n,this._cv.items[n],t);this.onFormatItem(e)}r.appendChild(t)}r.children.length==0&&r.appendChild(document.createElement('div'));u&&!this.containsFocus()&&this.focus();this.showSelection();this.onLoadedItems()}},t.prototype._click=function(n){var i,t,r;if(!n.defaultPrevented){for(i=this.hostElement.children,t=0;t<i.length;t++)if(wjcCore.contains(i[t],n.target)){this.selectedIndex=t;break}t=this.selectedIndex;this.checkedMemberPath&&t>-1&&(r=this._getCheckbox(t),r==n.target&&this.setItemChecked(t,r.checked))}},t.prototype._keydown=function(n){var t,i,o;if(!n.defaultPrevented&&!n.ctrlKey&&!n.shiftKey&&!n.altKey&&!n.metaKey){var r=this.selectedIndex,e=this.hostElement,u=e.children;switch(n.keyCode){case wjcCore.Key.Down:for(n.preventDefault(),t=this.selectedIndex+1;t<u.length;t++)if(this.getDisplayText(t)){this.selectedIndex=t;break}break;case wjcCore.Key.Up:for(n.preventDefault(),t=this.selectedIndex-1;t>=0;t--)if(this.getDisplayText(t)){this.selectedIndex=t;break}break;case wjcCore.Key.Home:n.preventDefault();this.selectedIndex=0;break;case wjcCore.Key.End:n.preventDefault();this.selectedIndex=u.length-1;break;case wjcCore.Key.PageDown:if(n.preventDefault(),this.selectedIndex>-1){var r=this.selectedIndex,s=e.offsetHeight,f=0;for(t=r+1;t<this._cv.items.length;t++){if(i=u[t].scrollHeight,f+i>s){this.selectedIndex=t;break}f+=i}this.selectedIndex==r&&this._cv.moveCurrentToLast()}break;case wjcCore.Key.PageUp:if(n.preventDefault(),this.selectedIndex>-1){var r=this.selectedIndex,s=e.offsetHeight,f=0;for(t=r-1;t>0;t--){if(i=u[t].scrollHeight,f+i>s){this.selectedIndex=t;break}f+=i}this.selectedIndex==r&&this._cv.moveCurrentToFirst()}break;case wjcCore.Key.Space:this.checkedMemberPath&&this.selectedIndex>-1&&(o=this._getCheckbox(this.selectedIndex),o&&(this.hostElement.focus(),this.setItemChecked(this.selectedIndex,!o.checked),n.preventDefault()))}}},t.prototype._keypress=function(n){var r=this,i;n.defaultPrevented||n.target instanceof HTMLInputElement||(n.charCode>32||n.charCode==32&&this._search)&&(n.preventDefault(),this._search+=String.fromCharCode(n.charCode).toLowerCase(),this._toSearch&&clearTimeout(this._toSearch),this._toSearch=setTimeout(function(){r._toSearch=null;r._search=''},t._AUTOSEARCH_DELAY),i=this._findNext(),i<0&&this._search.length>1&&(this._search=this._search[this._search.length-1],i=this._findNext()),i>-1&&(this.selectedIndex=i))},t.prototype._findNext=function(){var i,n,t,r,u;if(this.hostElement)for(i=this.hostElement.childElementCount,n=this.selectedIndex,(n<0||this._search.length==1)&&n++,t=0;t<i;t++)if(r=(n+t)%i,u=this.getDisplayText(r).trim().toLowerCase(),u.indexOf(this._search)==0)return r;return-1},t.prototype._getCheckbox=function(n){var t=this.hostElement;return t&&n>-1&&n<t.children.length?t.children[n].querySelector('input[type=checkbox]'):null},t.prototype._populateSelectElement=function(n){for(var t,u=n.children,i=[],f=-1,r=0;r<u.length;r++)t=u[r],t.tagName=='OPTION'&&(t.hasAttribute('selected')&&(f=i.length),t.innerHTML?i.push({hdr:t.innerHTML,val:t.getAttribute('value'),cmdParam:t.getAttribute('cmd-param')}):i.push({hdr:'<div class="wj-separator"/>'}),n.removeChild(t),r--);i&&(this.displayMemberPath='hdr',this.selectedValuePath='val',this.itemsSource=i,this.selectedIndex=f)},t._AUTOSEARCH_DELAY=600,t}(wjcCore.Control);exports.ListBox=ListBox;FormatItemEventArgs=function(n){function t(t,i,r){n.call(this);this._index=wjcCore.asNumber(t);this._data=i;this._item=wjcCore.asType(r,HTMLElement)}return __extends(t,n),Object.defineProperty(t.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"item",{get:function(){return this._item},enumerable:!0,configurable:!0}),t}(wjcCore.EventArgs);exports.FormatItemEventArgs=FormatItemEventArgs;ComboBox=function(n){function t(t,i){var r=this;n.call(this,t);this._editable=!1;this._composing=!1;this._deleting=!1;this._settingText=!1;this.selectedIndexChanged=new wjcCore.Event;wjcCore.addClass(this.hostElement,'wj-combobox');this.autoExpandSelection=!1;this.addEventListener(this._tbx,'compositionstart',function(){r._composing=!0});this.addEventListener(this._tbx,'compositionend',function(){r._composing=!1;setTimeout(function(){r._setText(r.text,!0)})});this.addEventListener(this.hostElement,'wheel',function(n){if(!n.defaultPrevented&&!r.isDroppedDown&&!r.isReadOnly&&r.containsFocus()&&r.selectedIndex>-1){var t=wjcCore.clamp(-n.deltaY,-1,1);r.selectedIndex=wjcCore.clamp(r.selectedIndex-t,0,r.collectionView.items.length-1);n.preventDefault()}});this._orgTag=='SELECT'&&this._lbx._populateSelectElement(this.hostElement);this._lbx.loadedItems.addHandler(function(){r.selectedIndex>-1&&(r.selectedIndex=r._lbx.selectedIndex)});this.isRequired=!0;this.initialize(i)}return __extends(t,n),Object.defineProperty(t.prototype,"itemsSource",{get:function(){return this._lbx.itemsSource},set:function(n){this._lbx.itemsSource=n;this._updateBtn()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"collectionView",{get:function(){return this._lbx.collectionView},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayMemberPath",{get:function(){return this._lbx.displayMemberPath},set:function(n){this._lbx.displayMemberPath=n;var t=this.getDisplayText();this.text!=t&&this._setText(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"headerPath",{get:function(){return this._hdrPath},set:function(n){this._hdrPath=wjcCore.asString(n);var t=this.getDisplayText();this.text!=t&&this._setText(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedValuePath",{get:function(){return this._lbx.selectedValuePath},set:function(n){this._lbx.selectedValuePath=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isContentHtml",{get:function(){return this._lbx.isContentHtml},set:function(n){if(n!=this.isContentHtml){this._lbx.isContentHtml=wjcCore.asBoolean(n);var t=this.getDisplayText();this.text!=t&&this._setText(t,!0)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemFormatter",{get:function(){return this._lbx.itemFormatter},set:function(n){this._lbx.itemFormatter=wjcCore.asFunction(n);this.selectedIndex=this._lbx.selectedIndex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"formatItem",{get:function(){return this.listBox.formatItem},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedIndex",{get:function(){return this._lbx.selectedIndex},set:function(n){n!=this.selectedIndex&&(this._lbx.selectedIndex=n);var t=this.getDisplayText(n);this.text!=t&&this._setText(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedItem",{get:function(){return this._lbx.selectedItem},set:function(n){this._lbx.selectedItem=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedValue",{get:function(){return this._lbx.selectedValue},set:function(n){this._lbx.selectedValue=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isEditable",{get:function(){return this._editable},set:function(n){this._editable=wjcCore.asBoolean(n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxDropDownHeight",{get:function(){return this._lbx.maxHeight},set:function(n){this._lbx.maxHeight=wjcCore.asNumber(n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxDropDownWidth",{get:function(){var n=this._dropDown;return parseInt(n.style.maxWidth)},set:function(n){var t=this._dropDown;t.style.maxWidth=wjcCore.asNumber(n)+'px'},enumerable:!0,configurable:!0}),t.prototype.getDisplayText=function(n){if(n===void 0&&(n=this.selectedIndex),this.headerPath&&n>-1&&wjcCore.hasItems(this.collectionView)){var i=this.collectionView.items[n][this.headerPath],t=i!=null?i.toString():'';return this.isContentHtml&&(this._cvt||(this._cvt=document.createElement('div')),this._cvt.innerHTML=t,t=this._cvt.textContent),t.trim()}return this._lbx.getDisplayText(n).trim()},t.prototype.onSelectedIndexChanged=function(n){this._updateBtn();this.selectedIndexChanged.raise(this,n)},t.prototype.indexOf=function(n,t){var u=this.collectionView,i,r;if(wjcCore.hasItems(u)&&n){if(t&&this.selectedIndex>-1&&n==this.getDisplayText(this.selectedIndex))return this.selectedIndex;for(n=n.toString().toLowerCase(),i=0;i<u.items.length;i++)if(r=this.getDisplayText(i).toLowerCase(),t){if(r==n)return i}else if(n&&r.indexOf(n)==0)return i}return-1},Object.defineProperty(t.prototype,"listBox",{get:function(){return this._lbx},enumerable:!0,configurable:!0}),t.prototype.refresh=function(t){n.prototype.refresh.call(this,t);wjcCore.hasItems(this.collectionView)&&(this._lbx.refresh(),this.selectedIndex>-1&&(this.selectedIndex=this._lbx.selectedIndex))},t.prototype.onLostFocus=function(t){this._composing&&(this._composing=!1,this._setText(this.text,!0));this.isEditable&&this.isRequired&&!this.text&&wjcCore.hasItems(this.collectionView)&&(this.selectedIndex=0);n.prototype.onLostFocus.call(this,t)},t.prototype.onIsDroppedDownChanging=function(t){return this.isDroppedDown||wjcCore.hasItems(this.collectionView)||(t.cancel=!0),n.prototype.onIsDroppedDownChanging.call(this,t)},t.prototype.onIsDroppedDownChanged=function(t){n.prototype.onIsDroppedDownChanged.call(this,t);this.isDroppedDown&&(this._lbx.showSelection(),this.isTouching||this.selectAll())},t.prototype._updateBtn=function(){var n=this.collectionView;this._btn.style.display=this._showBtn&&wjcCore.hasItems(n)?'':'none'},t.prototype._createDropDown=function(){var n=this;this._lbx=new ListBox(this._dropDown);this._lbx.maxHeight=200;this._lbx.selectedIndexChanged.addHandler(function(){n._updateBtn();n.selectedIndex=n._lbx.selectedIndex;n.onSelectedIndexChanged()});this._lbx.itemsChanged.addHandler(function(){n._updateBtn()});this.addEventListener(this._dropDown,'click',this._dropDownClick.bind(this))},t.prototype._dropDownClick=function(n){n.defaultPrevented||n.target!=this._dropDown&&(this.isDroppedDown=!1)},t.prototype._setText=function(t,i){var e,u;if(!this._composing&&!this._settingText){this._settingText=!0;t==null&&(t='');t=t.toString();var r=this.selectedIndex,o=this.collectionView,f=this._getSelStart(),s=-1;if(this._deleting&&(i=!0),this._deleting?r=this.indexOf(t,!0):(r=this.indexOf(t,i),r<0&&i&&(r=this.indexOf(t,!1)),r<0&&f>0&&(r=this.indexOf(t.substr(0,f),!1))),r<0&&!this.isEditable&&wjcCore.hasItems(o)&&(this.isRequired||t))for(e=this._oldText||'',r=Math.max(0,this.indexOf(e,!1)),u=0;u<t.length&&u<e.length;u++)if(t[u]!=e[u]){f=u;break}r>-1&&(s=f,t=this.getDisplayText(r));o&&o.moveCurrentToPosition(r);t!=this._tbx.value&&(this._tbx.value=t);s>-1&&this.containsFocus()&&!this.isTouching&&this._setSelRange(s,t.length);n.prototype._setText.call(this,t,i);this._deleting=!1;this._settingText=!1}},t.prototype._findNext=function(n,t){var i,u,f,r;if(this.collectionView)for(n=n.toLowerCase(),i=this.collectionView.items.length,r=1;r<=i;r++)if(u=(this.selectedIndex+r*t+i)%i,f=this.getDisplayText(u).toLowerCase(),f.indexOf(n)==0)return u;return this.selectedIndex},t.prototype._keydown=function(t){var r,i;if((n.prototype._keydown.call(this,t),!t.defaultPrevented)&&this._elRef==this._tbx&&((t.keyCode==wjcCore.Key.Back||t.keyCode==wjcCore.Key.Delete)&&(this._deleting=!0),r=this.collectionView,r&&r.items))switch(t.keyCode){case wjcCore.Key.Up:case wjcCore.Key.Down:i=this._getSelStart();i==this.text.length&&(i=0);this.selectedIndex=this._findNext(this.text.substr(0,i),t.keyCode==wjcCore.Key.Up?-1:1);wjcCore.setSelectionRange(this._tbx,i,this.text.length);t.preventDefault()}},t.prototype._setSelRange=function(n,t){this._elRef==this._tbx&&wjcCore.setSelectionRange(this._tbx,n,t)},t.prototype._getSelStart=function(){return this._tbx&&this._tbx.value?this._tbx.selectionStart:0},t}(DropDown);exports.ComboBox=ComboBox;AutoComplete=function(n){function t(t,i){n.call(this,t);this._cssMatch='wj-autocomplete-match';this._minLength=2;this._maxItems=6;this._itemCount=0;this._delay=500;this._query='';this._inCallback=!1;this._srchProps=[];wjcCore.addClass(this.hostElement,'wj-autocomplete');this.isEditable=!0;this.isRequired=!1;this.isContentHtml=!0;this.listBox.formatItem.addHandler(this._formatListItem,this);this._itemsSourceFnCallBackBnd=this._itemSourceFunctionCallback.bind(this);this.initialize(i)}return __extends(t,n),Object.defineProperty(t.prototype,"minLength",{get:function(){return this._minLength},set:function(n){this._minLength=wjcCore.asNumber(n,!1,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxItems",{get:function(){return this._maxItems},set:function(n){this._maxItems=wjcCore.asNumber(n,!1,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"delay",{get:function(){return this._delay},set:function(n){this._delay=wjcCore.asNumber(n,!1,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"searchMemberPath",{get:function(){return this._srchProp},set:function(n){this._srchProp=wjcCore.asString(n);this._srchProps=n?n.trim().split(/\s*,\s*/):[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemsSourceFunction",{get:function(){return this._itemsSourceFn},set:function(n){this._itemsSourceFn=wjcCore.asFunction(n);wjcCore.isFunction(this._itemsSourceFn)&&this.itemsSourceFunction(this.text,this.maxItems,this._itemsSourceFnCallBackBnd)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cssMatch",{get:function(){return this._cssMatch},set:function(n){this._cssMatch=wjcCore.asString(n)},enumerable:!0,configurable:!0}),t.prototype._keydown=function(t){if(!t.defaultPrevented&&this.isDroppedDown)switch(t.keyCode){case wjcCore.Key.Up:case wjcCore.Key.Down:this.selectAll()}n.prototype._keydown.call(this,t)},t.prototype._setText=function(n){var t=this;if(!this._inCallback){if(!n&&this.selectedIndex>-1&&(this.selectedIndex=-1),n!=this._oldText&&(this._tbx.value!=n&&(this._tbx.value=n),this._oldText=n,this.onTextChanged(),!n&&this.collectionView)){this.collectionView.filter=this._query=null;this.isDroppedDown=!1;return}this._toSearch&&clearTimeout(this._toSearch);n!=this.getDisplayText()&&(this._toSearch=setTimeout(function(){t._toSearch=null;var n=t.text.trim().toLowerCase();n.length>=t._minLength&&n!=t._query&&(t._query=n,n=n.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),t._rxMatch=new RegExp('(?=.*'+n.replace(/ /g,')(?=.*')+')','ig'),t._rxHighlight=t.isContentHtml?new RegExp('('+n.replace(/ /g,'|')+')(?![^<]*>|[^<>]* </)','ig'):new RegExp('('+n.replace(/ /g,'|')+')','ig'),t.itemsSourceFunction?t.itemsSourceFunction(n,t.maxItems,t._itemsSourceFnCallBackBnd):t._updateItems())},this._delay))}},t.prototype._itemSourceFunctionCallback=function(n){this._inCallback=!0;var t=wjcCore.asCollectionView(n);t&&t.moveCurrentToPosition(-1);this.itemsSource=t;this._inCallback=!1;this.containsFocus()&&(this.isDroppedDown=!0,this.refresh())},t.prototype.onIsDroppedDownChanged=function(n){this.isDroppedDownChanged.raise(this,n);this._query='';this.selectedIndex>-1?(this._setText(this.getDisplayText()),this.isTouching||this.selectAll()):this.isTouching||this._tbx.focus()},t.prototype._updateItems=function(){var n=this.collectionView;n&&(this._inCallback=!0,n.beginUpdate(),this._itemCount=0,n.filter=this._filter.bind(this),n.moveCurrentToPosition(-1),n.endUpdate(),this._inCallback=!1,this.isDroppedDown=n.items.length>0&&this.containsFocus(),n.items.length!=0||this.isEditable||(this.selectedIndex=-1),this.refresh())},t.prototype._filter=function(n){var t,i;if(this._itemCount>=this._maxItems)return!1;if(t=n?n.toString():'',this.displayMemberPath)for(t=n[this.displayMemberPath],i=0;i<this._srchProps.length;i++)t+='\0'+n[this._srchProps[i]];return(this.isContentHtml&&(t=t.replace(/<[^>]*>/g,'')),t.match(this._rxMatch))?(this._itemCount++,!0):!1},t.prototype._formatListItem=function(n,t){if(this._cssMatch){var i='<span class="'+this._cssMatch+'">$1</span>';t.item.innerHTML=t.item.innerHTML.replace(this._rxHighlight,i)}},t}(ComboBox);exports.AutoComplete=AutoComplete;Menu=function(n){function t(t,i){var r=this,u;n.call(this,t);this.itemClicked=new wjcCore.Event;wjcCore.addClass(this.hostElement,'wj-menu');this._tbx.style.display='none';u='<div wj-part="header" class="wj-form-control" style="cursor:default"/>';this._hdr=wjcCore.createElement(u);this._tbx.parentElement.insertBefore(this._hdr,this._tbx);this._elRef=this._hdr;this.isRequired=!1;this._orgTag=='SELECT'&&(this.header=this.hostElement.getAttribute('header'),this._lbx.itemsSource&&(this.commandParameterPath='cmdParam'));this.isContentHtml=!0;this.maxDropDownHeight=500;this.addEventListener(this._hdr,'click',function(n){n.defaultPrevented||(r._isButton?(r.isDroppedDown=!1,r._raiseCommand()):r.isDroppedDown=!r.isDroppedDown)});this.initialize(i)}return __extends(t,n),Object.defineProperty(t.prototype,"header",{get:function(){return this._hdr.innerHTML},set:function(n){this._hdr.innerHTML=wjcCore.asString(n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"command",{get:function(){return this._command},set:function(n){this._command=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"commandPath",{get:function(){return this._cmdPath},set:function(n){this._cmdPath=wjcCore.asString(n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"commandParameterPath",{get:function(){return this._cmdParamPath},set:function(n){this._cmdParamPath=wjcCore.asString(n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isButton",{get:function(){return this._isButton},set:function(n){this._isButton=wjcCore.asBoolean(n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"owner",{get:function(){return this._owner},set:function(n){this._owner=wjcCore.asType(n,HTMLElement,!0);this._enableDisableItems()},enumerable:!0,configurable:!0}),t.prototype.show=function(n){if(!this.isDroppedDown){var t=this.dropDown;this.selectedIndex=-1;this.onIsDroppedDownChanging(new wjcCore.CancelEventArgs)&&(wjcCore.showPopup(t,n),this.onIsDroppedDownChanged(),t.focus())}},t.prototype.hide=function(){this.isDroppedDown&&this.onIsDroppedDownChanging(new wjcCore.CancelEventArgs)&&(wjcCore.hidePopup(this.dropDown),this.onIsDroppedDownChanged())},t.prototype.onItemClicked=function(n){this.itemClicked.raise(this,n)},t.prototype.onIsDroppedDownChanged=function(t){n.prototype.onIsDroppedDownChanged.call(this,t);this.isDroppedDown?(this._closing=!0,this._defaultItem=this.selectedItem,this.isRequired=!1,this.selectedIndex=-1,this._enableDisableItems(),this._closing=!1,this.dropDown.focus()):this.selectedItem||(this.selectedItem=this._defaultItem)},t.prototype._keydown=function(t){t.defaultPrevented||t.keyCode==wjcCore.Key.Enter&&(this.isDroppedDown?this.getDisplayText(this.selectedIndex)&&this._raiseCommand():(this.isDroppedDown=!0,t.preventDefault()));n.prototype._keydown.call(this,t)},t.prototype._dropDownClick=function(t){t.defaultPrevented||this.getDisplayText(this.selectedIndex)&&this._raiseCommand();n.prototype._dropDownClick.call(this,t)},t.prototype._raiseCommand=function(n){var r=this.selectedItem,t=this._getCommand(r),i;if(t){if(i=this._cmdParamPath?r[this._cmdParamPath]:null,!this._canExecuteCommand(t,i))return;this._executeCommand(t,i)}this.onItemClicked(n)},t.prototype._getCommand=function(n){var t=n&&this.commandPath?n[this.commandPath]:null;return t?t:this.command},t.prototype._executeCommand=function(n,t){n&&!wjcCore.isFunction(n)&&(n=n.executeCommand);wjcCore.isFunction(n)&&n(t)},t.prototype._canExecuteCommand=function(n,t){if(n){var i=n.canExecuteCommand;if(wjcCore.isFunction(i))return i(t)}return!0},t.prototype._enableDisableItems=function(){var t,n,i,r,u;if(this.collectionView&&(this.command||this.commandPath))for(t=this.collectionView.items,n=0;n<t.length;n++)i=this._getCommand(t[n]),r=this.commandParameterPath?t[n][this.commandParameterPath]:null,i&&(u=this._lbx.hostElement.children[n],wjcCore.toggleClass(u,'wj-state-disabled',!this._canExecuteCommand(i,r)))},t}(ComboBox);exports.Menu=Menu;wjcCore.culture.MultiSelect=window.wijmo.culture.MultiSelect||{itemsSelected:'{count:n0} items selected'};MultiSelect=function(n){function t(t,i){var r=this;n.call(this,t);this._maxHdrItems=2;this._readOnly=!1;this._hdrFmt=wjcCore.culture.MultiSelect.itemsSelected;this.checkedItemsChanged=new wjcCore.Event;wjcCore.addClass(this.hostElement,'wj-multiselect');this._tbx.readOnly=!0;this.checkedMemberPath=null;this.addEventListener(this.inputElement,'click',function(){r.isDroppedDown=!r.isDroppedDown});this.removeEventListener(this.dropDown,'click');this._updateHeader();this.listBox.itemsChanged.addHandler(function(){r._updateHeader()});this.listBox.checkedItemsChanged.addHandler(function(){r._updateHeader();r.onCheckedItemsChanged()});this.initialize(i)}return __extends(t,n),Object.defineProperty(t.prototype,"checkedMemberPath",{get:function(){var n=this.listBox.checkedMemberPath;return n!=t._DEF_CHECKED_PATH?n:null},set:function(n){n=wjcCore.asString(n);this.listBox.checkedMemberPath=n?n:t._DEF_CHECKED_PATH},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxHeaderItems",{get:function(){return this._maxHdrItems},set:function(n){this._maxHdrItems!=n&&(this._maxHdrItems=wjcCore.asNumber(n),this._updateHeader())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"headerFormat",{get:function(){return this._hdrFmt},set:function(n){n!=this._hdrFmt&&(this._hdrFmt=wjcCore.asString(n),this._updateHeader())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"headerFormatter",{get:function(){return this._hdrFormatter},set:function(n){n!=this._hdrFormatter&&(this._hdrFormatter=wjcCore.asFunction(n),this._updateHeader())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"checkedItems",{get:function(){return this.listBox.checkedItems},set:function(n){this.listBox.checkedItems=wjcCore.asArray(n)},enumerable:!0,configurable:!0}),t.prototype.onCheckedItemsChanged=function(n){this.checkedItemsChanged.raise(this,n)},Object.defineProperty(t.prototype,"isReadOnly",{get:function(){return this._readOnly},set:function(n){this._readOnly=wjcCore.asBoolean(n);wjcCore.toggleClass(this.hostElement,'wj-state-readonly',this.isReadOnly)},enumerable:!0,configurable:!0}),t.prototype.refresh=function(t){t===void 0&&(t=!0);n.prototype.refresh.call(this,t);this._updateHeader()},t.prototype.onIsDroppedDownChanged=function(t){n.prototype.onIsDroppedDownChanged.call(this,t);this.isDroppedDown&&this.dropDown.focus()},t.prototype._setText=function(){},t.prototype._updateHeader=function(){var n,i,t;if(this._hdrFormatter)this.inputElement.value=this._hdrFormatter();else{if(n=this.checkedItems,i='',n.length>0)if(n.length<=this._maxHdrItems){if(this.displayMemberPath)for(t=0;t<n.length;t++)n[t]=n[t][this.displayMemberPath];i=n.join(', ')}else i=wjcCore.format(this.headerFormat,{count:n.length});this.inputElement.value=i}this._updateState()},t._DEF_CHECKED_PATH='$checked',t}(ComboBox);exports.MultiSelect=MultiSelect;MultiAutoComplete=function(n){function t(t,i){var r=this;n.call(this,t);this._selItems=[];this._lastInputValue='';this._selPath=new wjcCore.Binding(null);this._notAddItm=!1;this.selectedItemsChanged=new wjcCore.Event;wjcCore.addClass(this.hostElement,'wj-multi-autocomplete');this.showDropDownButton=!1;this.initialize(i);this._wjTpl=this.hostElement.querySelector('.wj-template');this._wjInput=this.hostElement.querySelector('.wj-input');this.addEventListener(this.hostElement,'keyup',this._keyup.bind(this),!0);this.addEventListener(window,'resize',this._adjustInputWidth.bind(this));this.addEventListener(this._tbx,'focus',function(){r._itemOff()});this._addHelperInput();this._initSeltems();this.listBox.itemsChanged.addHandler(function(){return r.selectedIndex=-1});this._refreshHeader()}return __extends(t,n),Object.defineProperty(t.prototype,"showDropDownButton",{set:function(){this._showBtn=!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxSelectedItems",{get:function(){return this._maxtems},set:function(n){this._maxtems!=n&&(this._maxtems=wjcCore.asNumber(n,!0),this._updateMaxItems(),this._refreshHeader(),this._clearSelIndex())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedMemberPath",{get:function(){return this._selPath.path},set:function(n){n=wjcCore.asString(n);n!==this.selectedMemberPath&&(this._selPath.path=n,this._initSeltems(),this._refreshHeader(),this.onSelectedItemsChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedItems",{get:function(){return this._selItems},set:function(n){var t,i;if(this._selItems=wjcCore.asArray(n),this.selectedMemberPath&&this.selectedMemberPath!==''&&this._selItems)for(t=0;t<this._selItems.length;t++)i=this._selItems[t],this._setSelItem(i,!1);this._updateMaxItems();this.onSelectedItemsChanged();this._refreshHeader();this._clearSelIndex()},enumerable:!0,configurable:!0}),t.prototype.onSelectedItemsChanged=function(n){this.selectedItemsChanged.raise(this,n)},t.prototype.onIsDroppedDownChanged=function(t){!this.isDroppedDown&&this.selectedIndex>-1&&!this._notAddItm&&this._addItem(!0);this._notAddItm=!1;n.prototype.onIsDroppedDownChanged.call(this,t)},t.prototype.refresh=function(t){n.prototype.refresh.call(this,t);this._initSeltems();this.isDroppedDown||this._refreshHeader()},t.prototype._keydown=function(t){if(!this.isReadOnly){if(!t.defaultPrevented)switch(t.keyCode){case wjcCore.Key.Back:this._lastInputValue=this._tbx.value;break;case wjcCore.Key.Enter:this._itemOff();this._addItem(!0);wjcCore.isIE&&wjcCore.setSelectionRange(this._tbx,0,0);break;case wjcCore.Key.Tab:this.isDroppedDown?(this._addItem(!1),this._tbx.value='',this._lbx.selectedIndex=-1,t.preventDefault()):this._updateFocus();break;case wjcCore.Key.Space:if(this._tbx.value!=='')return;this.isDroppedDown||this._tbx.disabled||(this.isDroppedDown=!0,this._clearSelIndex());break;case wjcCore.Key.Escape:this.isDroppedDown&&(this._notAddItm=!0);break;case wjcCore.Key.Left:this._itemOn(!0);break;case wjcCore.Key.Right:this._itemOn(!1);break;case wjcCore.Key.Up:case wjcCore.Key.Down:var i=wjcCore.getActiveElement();if(t.altKey){if(this._tbx==i){this.isDroppedDown=!this.isDroppedDown;this.isDroppedDown||this._tbx.focus();t.preventDefault();return}}else if(this._tbx!==i)return;default:if(t.keyCode===wjcCore.Key.Back||t.keyCode===wjcCore.Key.Delete)return;this._itemOff();this._maxtems!=null&&this._selItems.length>=this._maxtems&&t.preventDefault()}n.prototype._keydown.call(this,t)}},t.prototype._updateState=function(){(n.prototype._updateState.call(this),this._wjTpl)&&wjcCore.hasClass(this.hostElement,'wj-state-focused')===!1&&this._itemOff()},t.prototype._keyup=function(n){if(!this.isReadOnly&&!n.defaultPrevented)switch(n.keyCode){case wjcCore.Key.Back:this._tbx.value.length===0&&this._lastInputValue.length===0&&this._delItem(!1);break;case wjcCore.Key.Delete:this._delItem(!0)}},t.prototype._addHelperInput=function(){var n=document.createElement("input");n.type='text';n.tabIndex=-1;n.className='wj-token-helper';n.readOnly=!0;this._wjTpl.insertBefore(n,this._wjInput);this._helperInput=n},t.prototype._refreshHeader=function(){for(var i,t,r=this.hostElement.querySelectorAll('.wj-token'),n=0;n<r.length;n++)this._wjTpl.removeChild(r[n]);if(i=this.selectedItems,i&&i.length!==0){for(n=0;n<i.length;n++)t=i[n],this.displayMemberPath&&(t=i[n][this.displayMemberPath]),this.isContentHtml?(this._cvt||(this._cvt=document.createElement('div')),this._cvt.innerHTML=t,t=this._cvt.textContent.trim()):t=wjcCore.escapeHtml(t),this._wjTpl.insertBefore(this._createItem(t),this._wjInput);this._adjustInputWidth()}},t.prototype._updateMaxItems=function(){this._maxtems!=null&&this._selItems&&this._selItems.length>this._maxtems&&(this._selItems=this._selItems.slice(0,this._maxtems))},t.prototype._updateFocus=function(){var i=this,n=this._wjTpl.querySelector('.'+t._clsActive);n?(wjcCore.removeClass(n,t._clsActive),setTimeout(function(){i._tbx.focus()})):(this._clearSelIndex(),wjcCore.removeClass(this.hostElement,'wj-state-focused'))},t.prototype._addItem=function(n){if(this.selectedItems.indexOf(this.selectedItem)>-1){this._clearSelIndex();return}this.selectedIndex>-1&&(this._updateSelItems(this.selectedItem,!0),this._refreshHeader(),n&&this._clearSelIndex(),this._disableInput(!0))},t.prototype._delItem=function(n){var i=this._wjTpl.querySelector('.'+t._clsActive),r,u,f=!1;(!n||i)&&(i?(u=this._getItemIndex(i),u>-1&&(r=this._selItems[u],f=!0)):(r=this._selItems[this._selItems.length-1],f=!0),f&&(this._updateSelItems(r,!1),this._refreshHeader(),this._clearSelIndex(),this._disableInput(!1)),this._tbx.focus())},t.prototype._updateSelItems=function(n,t){if(t){if(this._selItems&&this._selItems.length!==0||(this._selItems=[]),this._maxtems!=null&&this._selItems.length>=this._maxtems)return;this._selItems.push(n)}else{var i=this._selItems.indexOf(n);this._selItems.splice(i,1)}this._hasSelectedMemeberPath()&&this._setSelItem(n,t);this.onSelectedItemsChanged()},t.prototype._createItem=function(n){var i=this,r=document.createElement("div"),f=document.createElement("span"),u=document.createElement("a");return r.appendChild(f),r.appendChild(u),r.className='wj-token',f.className='wj-token-label',f.innerHTML=n,u.className='wj-token-close',u.href='#',u.tabIndex=-1,u.text='×',this.addEventListener(r,'click',function(n){i._helperInput.focus();var u=i._wjTpl.querySelector('.'+t._clsActive);u&&wjcCore.removeClass(u,t._clsActive);wjcCore.addClass(r,t._clsActive);n.stopPropagation();n.preventDefault()}),this.addEventListener(u,'click',function(n){var t,u;i.isReadOnly||(t=i._getItemIndex(r),t>-1&&(u=i._selItems[t],i._updateSelItems(u,!1)),i._wjTpl.removeChild(r),i._adjustInputWidth(),i._disableInput(!1),i._tbx.focus(),n.stopPropagation(),n.preventDefault())}),r},t.prototype._itemOn=function(n){var f=wjcCore.getActiveElement(),i,u,r;if((this._tbx!=f||this._tbx.value.length===0)&&(i=this._wjTpl.querySelectorAll('.wj-token'),i.length!==0))if(u=this._wjTpl.querySelector('.'+t._clsActive),r=this._getItemIndex(u),n){if(r===0)return;r===-1?(wjcCore.addClass(i[i.length-1],t._clsActive),this._helperInput.focus()):(wjcCore.removeClass(u,t._clsActive),wjcCore.addClass(i[r-1],t._clsActive),this._helperInput.focus())}else if(!n){if(r===-1)return;r!==i.length-1?(wjcCore.removeClass(u,t._clsActive),wjcCore.addClass(i[r+1],t._clsActive),this._helperInput.focus()):(wjcCore.removeClass(u,t._clsActive),this._tbx.focus())}},t.prototype._itemOff=function(){var n=this._wjTpl.querySelector('.'+t._clsActive);n&&wjcCore.removeClass(n,t._clsActive)},t.prototype._initSeltems=function(){var t,n;if(this.selectedMemberPath&&this.selectedMemberPath!==''&&(t=this.itemsSource,this._selItems.splice(0,this._selItems.length),t))for(n=0;n<t.sourceCollection.length;n++)this._getSelItem(n)&&this._selItems.push(t.sourceCollection[n])},t.prototype._getSelItem=function(n){var i=this.itemsSource.sourceCollection,t=i[n];return wjcCore.isObject(t)&&this.selectedMemberPath?this._selPath.getValue(t):!1},t.prototype._setSelItem=function(n,t){var i=this.itemsSource;wjcCore.isObject(n)&&this._selPath.getValue(n)!=t&&this._selPath.setValue(n,t)},t.prototype._clearSelIndex=function(){this.selectedIndex=-1},t.prototype._hasSelectedMemeberPath=function(){return this.selectedMemberPath&&this.selectedMemberPath!==''},t.prototype._disableInput=function(){this._maxtems!=null&&(this._selItems.length<this._maxtems?(this._tbx.disabled=!1,this._tbx.focus()):(this._tbx.disabled=!0,this.hostElement.focus()))},t.prototype._adjustInputWidth=function(){this._tbx.style.width='60px';var n=wjcCore.getElementRect(this.hostElement),i=wjcCore.getElementRect(this._tbx),t=getComputedStyle(this._tbx),r=parseInt(t.paddingLeft,10),u=parseInt(t.paddingRight,10),f=n.left+n.width-i.left-r-u-8;this._tbx.style.width=f+'px'},t.prototype._getItemIndex=function(n){for(var i=this.hostElement.querySelectorAll('.wj-token'),t=0;t<i.length;t++)if(n===i[t])return t;return-1},t._clsActive='wj-token-active',t}(AutoComplete);exports.MultiAutoComplete=MultiAutoComplete,function(n){n[n.None=0]="None";n[n.Click=1]="Click";n[n.Blur=2]="Blur";n[n.ClickOrBlur=3]="ClickOrBlur"}(exports.PopupTrigger||(exports.PopupTrigger={}));PopupTrigger=exports.PopupTrigger;Popup=function(n){function t(t,i){var r=this,u;n.call(this,t,null,!0);this._showTrigger=PopupTrigger.Click;this._hideTrigger=PopupTrigger.Blur;this._fadeIn=!0;this._fadeOut=!0;this._click=this._handleClick.bind(this);this._mousedown=this._handleMouseDown.bind(this);this._visible=!1;this.showing=new wjcCore.Event;this.shown=new wjcCore.Event;this.hiding=new wjcCore.Event;this.hidden=new wjcCore.Event;u=this.hostElement;wjcCore.addClass(u,'wj-control wj-content wj-popup');u.getAttribute('tabindex')||(u.tabIndex=0);wjcCore.hidePopup(u,!1);this.addEventListener(u,'keydown',function(n){if(!n.defaultPrevented&&(n.keyCode==wjcCore.Key.Escape&&(n.preventDefault(),r.hide()),n.keyCode==wjcCore.Key.Enter)){var t=r.dialogResultEnter;t&&(n.preventDefault(),r._validateAndHide(t))}});this.addEventListener(u,'keydown',function(n){!n.defaultPrevented&&r.modal&&n.keyCode==wjcCore.Key.Tab&&(n.preventDefault(),wjcCore.moveFocus(r.hostElement,n.shiftKey?-1:1))});this.addEventListener(u,'click',function(n){if(n.target instanceof HTMLElement){var i=n.target,t=i.className.match(/\bwj-hide[\S]*\b/);t&&t.length>0&&(n.preventDefault(),n.stopPropagation(),r.hide(t[0]))}});this.addEventListener(document,'wheel',function(n){if(r.isVisible&&r._modal){for(var t=n.target;t&&t!=document.body;t=t.parentElement)if(t.scrollHeight>t.clientHeight)return;n.preventDefault();n.stopPropagation()}});this.initialize(i)}return __extends(t,n),Object.defineProperty(t.prototype,"owner",{get:function(){return this._owner},set:function(n){this._owner&&(this.removeEventListener(this._owner,'mousedown'),this.removeEventListener(this._owner,'click'));this._owner=n!=null?wjcCore.getElement(n):null;this._owner&&(this.addEventListener(this._owner,'mousedown',this._mousedown,!0),this.addEventListener(this._owner,'click',this._click,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"content",{get:function(){return this.hostElement.firstElementChild},set:function(n){n!=this.content&&(this.hostElement.innerHTML='',n instanceof HTMLElement&&this.hostElement.appendChild(n))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showTrigger",{get:function(){return this._showTrigger},set:function(n){this._showTrigger=wjcCore.asEnum(n,PopupTrigger)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hideTrigger",{get:function(){return this._hideTrigger},set:function(n){this._hideTrigger=wjcCore.asEnum(n,PopupTrigger)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fadeIn",{get:function(){return this._fadeIn},set:function(n){this._fadeIn=wjcCore.asBoolean(n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fadeOut",{get:function(){return this._fadeOut},set:function(n){this._fadeOut=wjcCore.asBoolean(n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"modal",{get:function(){return this._modal},set:function(n){this._modal=wjcCore.asBoolean(n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dialogResult",{get:function(){return this._result},set:function(n){this._result=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dialogResultEnter",{get:function(){return this._resultEnter},set:function(n){this._resultEnter=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isVisible",{get:function(){var n=this.hostElement;return this._visible&&n&&n.style.display!='none'},enumerable:!0,configurable:!0}),t.prototype.show=function(n,t){var i=this,r,u;if(!this.isVisible&&(this.dialogResult=null,this._callback=null,r=new wjcCore.CancelEventArgs,this.onShowing(r))){n!=null&&(this.modal=wjcCore.asBoolean(n));t!=null&&(this._callback=wjcCore.asFunction(t));u=this._owner?this._owner.getBoundingClientRect():null;wjcCore.showPopup(this.hostElement,u,!1,this._fadeIn);this._modal&&this._showBackdrop();this._visible=!0;this.onShown(r);setTimeout(function(){if(!i.isTouching){var n=i.hostElement.querySelector('input[autofocus]');n&&n.clientHeight>0&&!n.disabled&&n.tabIndex>-1&&!wjcCore.closest(n,'[disabled],.wj-state-disabled')?(n.focus(),n.select()):wjcCore.moveFocus(i.hostElement,0)}i.containsFocus()||(i.hostElement.tabIndex=0,i.hostElement.focus())},200)}},t.prototype.hide=function(n){if(this.isVisible){wjcCore.isUndefined(n)||(this.dialogResult=n);var t=new wjcCore.CancelEventArgs;if(this.onHiding(t)){this._modal&&wjcCore.hidePopup(this._bkdrop,!0,this.fadeOut);wjcCore.hidePopup(this.hostElement,!0,this.fadeOut);this._visible=!1;this.onHidden(t);this._callback&&this._callback(this)}}},t.prototype.onShowing=function(n){return this.showing.raise(this,n),!n.cancel},t.prototype.onShown=function(n){this.shown.raise(this,n)},t.prototype.onHiding=function(n){return this.hiding.raise(this,n),!n.cancel},t.prototype.onHidden=function(n){this.hidden.raise(this,n)},t.prototype.dispose=function(){this._owner=null;n.prototype.dispose.call(this)},t.prototype.onLostFocus=function(t){this.isVisible&&this._hideTrigger&PopupTrigger.Blur&&(this.containsFocus()||this.hide());n.prototype.onLostFocus.call(this,t)},t.prototype.refresh=function(t){if(t===void 0&&(t=!0),n.prototype.refresh.call(this,t),this.isVisible&&!this._refreshing){this._refreshing=!0;var i=wjcCore.getActiveElement(),r=this._owner?this._owner.getBoundingClientRect():null;wjcCore.showPopup(this.hostElement,r);this._modal&&i instanceof HTMLElement&&i!=wjcCore.getActiveElement()&&i.focus();this._refreshing=!1}},t.prototype._handleResize=function(){this.isVisible&&this.refresh()},t.prototype._handleClick=function(){if(this.isVisible)this._hideTrigger&PopupTrigger.Click&&this.hide();else if(this._showTrigger&PopupTrigger.Click&&!this._wasVisible){var n=this.hostElement;n&&n.style.display=='none'&&this.show()}},t.prototype._handleMouseDown=function(){this._wasVisible=this.isVisible},t.prototype._showBackdrop=function(){var n=this,t;this._bkdrop||(this._bkdrop=document.createElement('div'),this._bkdrop.tabIndex=-1,wjcCore.addClass(this._bkdrop,'wj-popup-backdrop'),this.addEventListener(this._bkdrop,'mousedown',function(t){t.preventDefault();t.stopPropagation();n.hostElement.focus();n.hideTrigger&PopupTrigger.Blur&&n.hide()}));this._bkdrop.style.display='';t=this.hostElement;t.parentElement.insertBefore(this._bkdrop,t)},t.prototype._validateAndHide=function(n){var t=this.hostElement.querySelector(':invalid');t?t.focus():this.hide(n)},t}(wjcCore.Control);exports.Popup=Popup;InputDate=function(n){function t(t,i){var r=this,u;n.call(this,t);this._format='d';this.valueChanged=new wjcCore.Event;wjcCore.addClass(this.hostElement,'wj-inputdate');this._msk=new wjcCore._MaskProvider(this._tbx);wjcCore.isIE9()||(this._tbx.type='tel');this.addEventListener(this.hostElement,'wheel',function(n){if(!n.defaultPrevented&&!r.isDroppedDown&&r.containsFocus()&&r.value!=null&&r._canChangeValue()){var t=wjcCore.clamp(-n.deltaY,-1,1);r.value=r.selectionMode==DateSelectionMode.Month?wjcCore.DateTime.addMonths(r.value,t):wjcCore.DateTime.addDays(r.value,t);r.selectAll();n.preventDefault()}});this.value=wjcCore.DateTime.newDate();this._orgTag=='INPUT'&&(u=this._tbx.getAttribute('value'),u&&(this.value=wjcCore.Globalize.parseDate(u,'yyyy-MM-dd')));this.isRequired=!0;this.initialize(i)}return __extends(t,n),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(n){wjcCore.DateTime.equals(this._value,n)?this._tbx.value=wjcCore.Globalize.format(n,this.format):(n=wjcCore.asDate(n,!this.isRequired||n==null&&this._value==null),n=this._clamp(n),this._isValidDate(n)?(this._tbx.value=n?wjcCore.Globalize.format(n,this.format):'',n==this._value||wjcCore.DateTime.equals(this._value,n)||(this._value=n,this.onValueChanged())):this._tbx.value=n?wjcCore.Globalize.format(this.value,this.format):'',this.text!=this._oldText&&(this._oldText=this.text,this.onTextChanged()))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._tbx.value},set:function(n){n!=this.text&&(this._setText(n,!0),this._commitText())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectionMode",{get:function(){return this.calendar.selectionMode},set:function(n){this.calendar.selectionMode=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"min",{get:function(){return this._calendar.min},set:function(n){this._calendar.min=wjcCore.asDate(n,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this._calendar.max},set:function(n){this._calendar.max=wjcCore.asDate(n,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"format",{get:function(){return this._format},set:function(n){n!=this.format&&(this._format=wjcCore.asString(n),this._tbx.value=wjcCore.Globalize.format(this.value,this.format))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mask",{get:function(){return this._msk.mask},set:function(n){this._msk.mask=wjcCore.asString(n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"calendar",{get:function(){return this._calendar},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputElement",{get:function(){return this._tbx},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputType",{get:function(){return this._tbx.type},set:function(n){this._tbx.type=wjcCore.asString(n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemValidator",{get:function(){return this._calendar.itemValidator},set:function(n){n!=this.itemValidator&&(this._calendar.itemValidator=wjcCore.asFunction(n),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemFormatter",{get:function(){return this.calendar.itemFormatter},set:function(n){n!=this.itemFormatter&&(this.calendar.itemFormatter=wjcCore.asFunction(n))},enumerable:!0,configurable:!0}),t.prototype.onValueChanged=function(n){this.valueChanged.raise(this,n)},t.prototype.refresh=function(){this.isDroppedDown=!1;this._msk&&this._msk.refresh();this._calendar&&this._calendar.refresh();this._tbx.value=wjcCore.Globalize.format(this.value,this.format)},t.prototype.onIsDroppedDownChanged=function(t){n.prototype.onIsDroppedDownChanged.call(this,t);this.isDroppedDown&&(this._calChanged=!1,this.dropDown.focus())},t.prototype._createDropDown=function(){var n=this;this._calendar=new Calendar(this._dropDown);this._dropDown.tabIndex=-1;this._calendar.valueChanged.addHandler(function(){n.value=wjcCore.DateTime.fromDateTime(n._calendar.value,n.value);n._calChanged=!0});this.addEventListener(this._dropDown,'mouseup',function(t){n._calChanged?n.isDroppedDown=!1:t.target.getAttribute('wj-part')=='btn-today'&&(n.isDroppedDown=!1)})},t.prototype._updateDropDown=function(){var t,i;this._commitText();t=this._calendar;t.value=this.value;t.min=this.min;t.max=this.max;this.selectionMode!=DateSelectionMode.Month&&(t.monthView=!0);i=getComputedStyle(this.hostElement);this._dropDown.style.minWidth=parseFloat(i.fontSize)*18+'px';this._calendar.refresh();n.prototype._updateDropDown.call(this)},t.prototype._keydown=function(t){if(!t.defaultPrevented&&!t.altKey&&!t.ctrlKey&&!t.metaKey)switch(t.keyCode){case wjcCore.Key.Enter:this._commitText();this.selectAll();break;case wjcCore.Key.Escape:this.text=wjcCore.Globalize.format(this.value,this.format);this.selectAll();break;case wjcCore.Key.Up:case wjcCore.Key.Down:if(!this.isDroppedDown&&this.value&&this._canChangeValue()){var i=t.keyCode==wjcCore.Key.Up?1:-1,r=this.selectionMode==DateSelectionMode.Month?wjcCore.DateTime.addMonths(this.value,i):wjcCore.DateTime.addDays(this.value,i);this.value=wjcCore.DateTime.fromDateTime(r,this.value);this.selectAll();t.preventDefault()}}n.prototype._keydown.call(this,t)},t.prototype._canChangeValue=function(){return!this.isReadOnly&&this.selectionMode!=DateSelectionMode.None},t.prototype._clamp=function(n){return this.calendar._clamp(n)},t.prototype._commitText=function(){var t=this._tbx.value,n;t||this.isRequired?(n=wjcCore.Globalize.parseDate(t,this.format),n?this.value=wjcCore.DateTime.fromDateTime(n,this.value):this._tbx.value=wjcCore.Globalize.format(this.value,this.format)):this.value=null},t.prototype._isValidDate=function(n){return n&&(this._clamp(n)!=n||this.itemValidator&&!this.itemValidator(n))?!1:!0},t}(DropDown);exports.InputDate=InputDate;InputTime=function(n){function t(t,i){if(n.call(this,t),this._format='t',this.valueChanged=new wjcCore.Event,wjcCore.addClass(this.hostElement,'wj-inputtime'),this._value=wjcCore.DateTime.newDate(),this._msk=new wjcCore._MaskProvider(this._tbx),wjcCore.isIE9()||(this._tbx.type='tel'),this._orgTag=='INPUT'){var r=this._tbx.getAttribute('value');r&&(this.value=wjcCore.Globalize.parseDate(r,'HH:mm:ss'))}this.step=15;this.autoExpandSelection=!0;this.initialize(i)}return __extends(t,n),Object.defineProperty(t.prototype,"inputElement",{get:function(){return this._tbx},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputType",{get:function(){return this._tbx.type},set:function(n){this._tbx.type=wjcCore.asString(n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(n){n=wjcCore.asDate(n,!this.isRequired);n&&(this._min!=null&&this._getTime(n)<this._getTime(this._min)&&(n=wjcCore.DateTime.fromDateTime(n,this._min)),this._max!=null&&this._getTime(n)>this._getTime(this._max)&&(n=wjcCore.DateTime.fromDateTime(n,this._max)));this._setText(n?wjcCore.Globalize.format(n,this.format):'',!0);n==this._value||wjcCore.DateTime.equals(n,this._value)||(this._value=n,this.onValueChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._tbx.value},set:function(n){n!=this.text&&(this._setText(n,!0),this._commitText())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"min",{get:function(){return this._min},set:function(n){this._min=wjcCore.asDate(n,!0);this.isDroppedDown=!1;this._updateItems()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this._max},set:function(n){this._max=wjcCore.asDate(n,!0);this.isDroppedDown=!1;this._updateItems()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"step",{get:function(){return this._step},set:function(n){this._step=wjcCore.asNumber(n,!0);this.isDroppedDown=!1;this._updateItems()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"format",{get:function(){return this._format},set:function(n){n!=this.format&&(this._format=wjcCore.asString(n),this._tbx.value=wjcCore.Globalize.format(this.value,this.format),this.collectionView&&this.collectionView.items.length&&this._updateItems())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mask",{get:function(){return this._msk.mask},set:function(n){this._msk.mask=wjcCore.asString(n)},enumerable:!0,configurable:!0}),t.prototype.onValueChanged=function(n){this.valueChanged.raise(this,n)},t.prototype.refresh=function(){this.isDroppedDown=!1;this._msk.refresh();this._tbx.value=wjcCore.Globalize.format(this.value,this.format);this._updateItems()},t.prototype.onSelectedIndexChanged=function(t){this.selectedIndex>-1&&this._commitText();n.prototype.onSelectedIndexChanged.call(this,t)},t.prototype._updateItems=function(){var t=new Date(0,0,0,0,0),i=new Date(0,0,0,23,59,59),r=[],n,u;if(this.min&&t.setHours(this.min.getHours(),this.min.getMinutes(),this.min.getSeconds()),this.max&&i.setHours(this.max.getHours(),this.max.getMinutes(),this.max.getSeconds()),wjcCore.isNumber(this.step)&&this.step>0)for(n=t;n<=i;n=wjcCore.DateTime.addMinutes(n,this.step))r.push(wjcCore.Globalize.format(n,this.format));u=this.text;this.itemsSource=r;this.text=u},t.prototype._getTime=function(n){return n.getHours()*3600+n.getMinutes()*60+n.getSeconds()},t.prototype._keydown=function(t){if(n.prototype._keydown.call(this,t),!t.defaultPrevented)switch(t.keyCode){case wjcCore.Key.Enter:this.isDroppedDown||(this._commitText(),this.selectAll());break;case wjcCore.Key.Escape:this.text=wjcCore.Globalize.format(this.value,this.format);this.selectAll()}},t.prototype._commitText=function(){if(this.text||this.isRequired){var n=wjcCore.Globalize.parseDate(this.text,this.format);n?this.value=wjcCore.DateTime.fromDateTime(this.value,n):this._tbx.value=wjcCore.Globalize.format(this.value,this.format)}else this.value=null},t}(ComboBox);exports.InputTime=InputTime;InputDateTime=function(n){function t(t,i){var r=this,u,f;n.call(this,t);wjcCore.addClass(this.hostElement,'wj-inputdatetime');this._btnTm=this.hostElement.querySelector('[wj-part="btn-tm"]');this._format='g';this._inputTime=new InputTime(document.createElement('div'));this._inputTime.valueChanged.addHandler(function(){r.value=wjcCore.DateTime.fromDateTime(r.value,r._inputTime.value);r.containsFocus()&&(r.isTouching&&r.showDropDownButton||r.selectAll())});u=this._inputTime.dropDown;f=this._keydown.bind(this);this.addEventListener(u,'keydown',f,!0);this.addEventListener(u,'blur',function(){r._updateFocusState()},!0);this.addEventListener(this._btnTm,'click',this._btnclick.bind(this));this.addEventListener(this._btn,'mousedown',function(){r._setDropdown(r.calendar.hostElement)});this.addEventListener(this._btnTm,'mousedown',function(n){r.isDroppedDown&&r.dropDown==u&&n.preventDefault();r._inputTime.dropDownCssClass=r.dropDownCssClass;r._setDropdown(u)});this.initialize(i)}return __extends(t,n),Object.defineProperty(t.prototype,"timeMin",{get:function(){return this._inputTime.min},set:function(n){this._inputTime.min=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timeMax",{get:function(){return this._inputTime.max},set:function(n){this._inputTime.max=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timeFormat",{get:function(){return this._inputTime.format},set:function(n){this._inputTime.format=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timeStep",{get:function(){return this._inputTime.step},set:function(n){this._inputTime.step=n},enumerable:!0,configurable:!0}),t.prototype.refresh=function(){n.prototype.refresh.call(this);this._inputTime.refresh()},t.prototype._updateBtn=function(){n.prototype._updateBtn.call(this);this._btnTm&&(this._btnTm.tabIndex=this._btn.tabIndex,this._btnTm.parentElement.style.display=this._btn.style.display)},t.prototype._clamp=function(n){return n&&(this.min&&n<this.min&&(n=this.min),this.max&&n>this.max&&(n=this.max)),n},t.prototype._commitText=function(){var t=this._tbx.value,n;t||this.isRequired?(n=wjcCore.Globalize.parseDate(t,this.format),n?this.value=n:this._tbx.value=wjcCore.Globalize.format(this.value,this.format)):this.value=null},t.prototype._setDropdown=function(n){this._dropDown!=n&&(this.isDroppedDown&&(this.isDroppedDown=!1),this._dropDown=n)},t.prototype._updateDropDown=function(){var t=this._inputTime;this._dropDown==t.dropDown?(this._commitText(),n.prototype._updateDropDown.call(this),t.isRequired=this.isRequired,t.value=this.value,this.isDroppedDown&&t.listBox.showSelection()):n.prototype._updateDropDown.call(this)},t.controlTemplate='<div style="position:relative" class="wj-template"><div class="wj-input"><div class="wj-input-group wj-input-btn-visible"><input wj-part="input" type="text" class="wj-form-control" /><span class="wj-input-group-btn" tabindex="-1"><button wj-part="btn" class="wj-btn wj-btn-default" type="button" tabindex="-1"><span class="wj-glyph-calendar"><\/span><\/button><button wj-part="btn-tm" class="wj-btn wj-btn-default" type="button" tabindex="-1"><span class="wj-glyph-clock"><\/span><\/button><\/span><\/div><\/div><div wj-part="dropdown" class="wj-content wj-dropdown-panel" style="display:none;position:absolute;z-index:100;width:auto"><\/div><\/div>',t}(InputDate);exports.InputDateTime=InputDateTime;InputNumber=function(n){function t(t,i){var r=this,f,u;n.call(this,t);this._showBtn=!0;this._readOnly=!1;this.textChanged=new wjcCore.Event;this.valueChanged=new wjcCore.Event;f=this.getTemplate();this.applyTemplate('wj-control wj-inputnumber wj-content',f,{_tbx:'input',_btnUp:'btn-inc',_btnDn:'btn-dec'},'input');u=this._tbx;u.autocomplete='off';u.spellcheck=!1;this._updateSymbols();this.addEventListener(this._tbx,'compositionstart',function(){r._composing=!0});this.addEventListener(this._tbx,'compositionend',function(){r._composing=!1;setTimeout(function(){r._setText(r.text)})});this.addEventListener(u,'keypress',this._keypress.bind(this));this.addEventListener(u,'keydown',this._keydown.bind(this));this.addEventListener(u,'input',this._input.bind(this));this.addEventListener(this._btnUp,'click',this._clickSpinner.bind(this));this.addEventListener(this._btnDn,'click',this._clickSpinner.bind(this));this.addEventListener(this.hostElement,'wheel',function(n){if(!n.defaultPrevented&&!r.isReadOnly&&r.containsFocus()&&r.value!=null){var t=wjcCore.clamp(-n.deltaY,-1,1);r._increment((r.step||1)*t);setTimeout(function(){return r.selectAll()});n.preventDefault()}});this.value=0;this.isRequired=!0;this.initialize(i)}return __extends(t,n),Object.defineProperty(t.prototype,"inputElement",{get:function(){return this._tbx},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputType",{get:function(){return this._tbx.type},set:function(n){this._tbx.type=wjcCore.asString(n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(n){if(n!=this._value)if(n=wjcCore.asNumber(n,!this.isRequired||n==null&&this._value==null),n==null)this._setText('');else if(!isNaN(n)){var t=wjcCore.Globalize.format(n,this.format);this._setText(t)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isRequired",{get:function(){return this._tbx.required},set:function(n){this._tbx.required=wjcCore.asBoolean(n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isReadOnly",{get:function(){return this._readOnly},set:function(n){this._readOnly=wjcCore.asBoolean(n);this.inputElement.readOnly=this._readOnly;wjcCore.toggleClass(this.hostElement,'wj-state-readonly',this.isReadOnly)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"min",{get:function(){return this._min},set:function(n){this._min=wjcCore.asNumber(n,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this._max},set:function(n){this._max=wjcCore.asNumber(n,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"step",{get:function(){return this._step},set:function(n){this._step=wjcCore.asNumber(n,!0);this._updateBtn()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"format",{get:function(){return this._format},set:function(n){n!=this.format&&(this._format=wjcCore.asString(n),this.refresh())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._tbx.value},set:function(n){n!=this.text&&(this._oldText=null,this._setText(n))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"placeholder",{get:function(){return this._tbx.placeholder},set:function(n){this._tbx.placeholder=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showSpinner",{get:function(){return this._showBtn},set:function(n){this._showBtn=wjcCore.asBoolean(n);this._updateBtn()},enumerable:!0,configurable:!0}),t.prototype.selectAll=function(){wjcCore.setSelectionRange(this._tbx,0,this._tbx.value.length)},t.prototype.onTextChanged=function(n){this.textChanged.raise(this,n);this._updateState()},t.prototype.onValueChanged=function(n){this.valueChanged.raise(this,n)},t.prototype.onGotFocus=function(t){this.isTouching||(this._tbx.focus(),this.selectAll());n.prototype.onGotFocus.call(this,t)},t.prototype.onLostFocus=function(t){this._composing&&(this._composing=!1,this._setText(this.text));var i=this._clamp(this.value),r=wjcCore.Globalize.format(i,this.format,!1,!1);this._setText(r);n.prototype.onLostFocus.call(this,t)},t.prototype.refresh=function(){this._updateSymbols();var n=wjcCore.Globalize.format(this.value,this.format);this._setText(n)},t.prototype._updateSymbols=function(){var n=wjcCore.culture.Globalize.numberFormat;this._decChar=n['.']||'.';this._currChar=n.currency.symbol||'$';this._rxSym=new RegExp('^[%+\\-() '+this._decChar+this._currChar+']*$')},t.prototype._clamp=function(n){return wjcCore.clamp(n,this.min,this.max)},t.prototype._isNumeric=function(n,t){t===void 0&&(t=!1);var i=n==this._decChar||n>='0'&&n<='9';return i||t||(i='+-()'.indexOf(n)>-1),i},t.prototype._getInputRange=function(n){var t;n===void 0&&(n=!1);var i=[0,0],r=this.text,u=!1;for(t=0;t<r.length;t++)this._isNumeric(r[t],n)&&(u||(i[0]=t,u=!0),i[1]=t+1);return i},t.prototype._moveToDigit=function(){var n=this._getInputRange(!0);wjcCore.setSelectionRange(this._tbx,n[0],n[1])},t.prototype._increment=function(n){if(n){var t=this._clamp(this.value+n),i=wjcCore.Globalize.format(t,this.format,!1,!1);this._setText(i)}},t.prototype._getSelStart=function(){return this._tbx&&this._tbx.value?this._tbx.selectionStart:0},t.prototype._updateBtn=function(){this.showSpinner&&this.step&&this.value!=null?(this._btnUp.style.display=this._btnDn.style.display='',wjcCore.addClass(this.hostElement,'wj-input-show-spinner')):(this._btnUp.style.display=this._btnDn.style.display='none',wjcCore.removeClass(this.hostElement,'wj-input-show-spinner'))},t.prototype._setText=function(n){var r,t,u,i;if(!this._composing){if(!n){if(!this.isRequired){this._tbx.value='';this._value!=null&&(this._value=null,this.onValueChanged());this._oldText&&(this._oldText=n,this.onTextChanged());this._updateBtn();return}n='0'}if(n=='-'||n=='('){this._tbx.value=n;wjcCore.setSelectionRange(this._tbx,1);return}if(n!=this._decChar||this._format||this.isRequired||(n='0'+n),n.length>1&&n[n.length-1]==')'&&n[0]!='('&&(n=n.substr(0,n.length-1)),this._rxSym.test(n)&&(n='0'),r=this._format||(n.indexOf(this._decChar)>-1?'n2':'n0'),t=wjcCore.Globalize.parseFloat(n,r),isNaN(t)){this._tbx.value=this._oldText;return}n.indexOf('%')<0&&r.toLowerCase().indexOf('p')>-1&&(t/=100);u=this._oldText&&n.length==this._oldText.length+1;i=wjcCore.Globalize.format(t,r,!1,u);(r=='n'||r[0].toLowerCase()=='g')&&this._tbx.selectionStart==this._tbx.value.length&&(n==i+this._decChar||n==i+this._decChar+'0')&&(i=n);this._tbx.value!=i&&(this._tbx.value=i,t=wjcCore.Globalize.parseFloat(i,this.format));t!=this._value&&(this._value=t,this.onValueChanged());this.text!=this._oldText&&(this._oldText=this.text,this.onTextChanged());this._updateBtn()}},t.prototype._keypress=function(n){var i,r,t;if(!n.defaultPrevented&&!this._composing&&!this._readOnly&&n.charCode&&!n.ctrlKey&&!n.metaKey){i=String.fromCharCode(n.charCode);this._isNumeric(i)?(r=this._getInputRange(!0),this._tbx.selectionStart<r[0]&&wjcCore.setSelectionRange(this._tbx,r[0],r[1])):n.preventDefault();switch(i){case'-':this.value?(this.value*=-1,this._moveToDigit()):this._setText('-');n.preventDefault();break;case'+':this.value=Math.abs(this.value);this._moveToDigit();n.preventDefault();break;case this._decChar:t=this._tbx.value.indexOf(i);t>-1&&(this._getSelStart()<=t&&t++,wjcCore.setSelectionRange(this._tbx,t),n.preventDefault())}}},t.prototype._keydown=function(n){var i=this,t;if(!n.defaultPrevented&&!this._composing)switch(n.keyCode){case wjcCore.Key.Up:case wjcCore.Key.Down:this.step&&(this._increment(this.step*(n.keyCode==wjcCore.Key.Up?1:-1)),setTimeout(function(){i.selectAll()}),n.preventDefault());break;case wjcCore.Key.Back:this._tbx&&this._tbx.selectionStart==this._tbx.selectionEnd&&(t=this._tbx.selectionStart,t>0&&this.text[t-1]==this._decChar&&(setTimeout(function(){wjcCore.setSelectionRange(i._tbx,t-1)}),n.preventDefault()));break;case wjcCore.Key.Delete:this._tbx&&this._tbx.selectionStart==this._tbx.selectionEnd&&(t=this._tbx.selectionStart,t>0&&this.text[t]==this._decChar&&(setTimeout(function(){wjcCore.setSelectionRange(i._tbx,t+1)}),n.preventDefault()))}},t.prototype._input=function(){var n=this;this._composing||setTimeout(function(){var e=n._tbx,t=e.value,i=n._getSelStart(),o=t&&t.length>1?t.indexOf(n._decChar):-1,u,r,f;n._setText(t);n.containsFocus()&&(u=e.value,r=u.indexOf(n._decChar),t&&t[0]=='-'&&u&&u[0]!='-'&&(t=null),t?t==n._decChar&&r>-1?i=r+1:i<=o&&r>-1||o<0&&r<0?i+=u.length-t.length:i==t.length&&o<0&&r>-1&&(i=r):i=r>-1?r:u.match(/[^\d]*$/).index,f=n._getInputRange(),i<f[0]&&(i=f[0]),i>f[1]&&(i=f[1]),wjcCore.setSelectionRange(e,i))})},t.prototype._clickSpinner=function(n){var t=this;n.defaultPrevented||this.isReadOnly||!this.step||this.value==null||(this._increment(this.step*(wjcCore.contains(this._btnUp,n.target)?1:-1)),this.isTouching||setTimeout(function(){return t.selectAll()}))},t.controlTemplate='<div class="wj-input"><div class="wj-input-group"><span wj-part="btn-dec" class="wj-input-group-btn" tabindex="-1"><button class="wj-btn wj-btn-default" type="button" tabindex="-1">-<\/button><\/span><input type="tel" wj-part="input" class="wj-form-control wj-numeric"/><span wj-part="btn-inc" class="wj-input-group-btn" tabindex="-1"><button class="wj-btn wj-btn-default" type="button" tabindex="-1">+<\/button><\/span><\/div>',t}(wjcCore.Control);exports.InputNumber=InputNumber;InputMask=function(n){function t(t,i){var f=this,u,r;n.call(this,t);this.valueChanged=new wjcCore.Event;u=this.getTemplate();this.applyTemplate('wj-control wj-inputmask wj-content',u,{_tbx:'input'},'input');this._orgTag=='INPUT'&&(r=this._tbx.getAttribute('value'),r&&(this.value=r));this._msk=new wjcCore._MaskProvider(this._tbx);this.isRequired=!0;this.initialize(i);this.addEventListener(this._tbx,'input',function(){setTimeout(function(){f.onValueChanged()})})}return __extends(t,n),Object.defineProperty(t.prototype,"inputElement",{get:function(){return this._tbx},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._tbx.value},set:function(n){if(n!=this.value){this._tbx.value=wjcCore.asString(n);var t=wjcCore.getActiveElement();this._tbx.selectionStart=this._tbx.value.length;t&&t!=wjcCore.getActiveElement()&&t.focus();n=this._msk._applyMask();this._tbx.value=n;this.onValueChanged()}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rawValue",{get:function(){return this._msk.getRawValue()},set:function(n){this.value=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mask",{get:function(){return this._msk.mask},set:function(n){var t=this.value;this._msk.mask=wjcCore.asString(n);this.value!=t&&this.onValueChanged()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"promptChar",{get:function(){return this._msk.promptChar},set:function(n){var t=this.value;this._msk.promptChar=n;this.value!=t&&this.onValueChanged()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"placeholder",{get:function(){return this._tbx.placeholder},set:function(n){this._tbx.placeholder=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maskFull",{get:function(){return this._msk.maskFull},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isRequired",{get:function(){return this._tbx.required},set:function(n){this._tbx.required=wjcCore.asBoolean(n)},enumerable:!0,configurable:!0}),t.prototype.selectAll=function(){var n=this._msk.getMaskRange();wjcCore.setSelectionRange(this._tbx,n[0],n[1]+1)},t.prototype.onValueChanged=function(n){this.valueChanged.raise(this,n);this._updateState()},t.prototype.refresh=function(t){n.prototype.refresh.call(this,t);this._msk.refresh()},t.prototype.onGotFocus=function(t){n.prototype.onGotFocus.call(this,t);this.selectAll()},t.controlTemplate='<div class="wj-input"><div class="wj-input-group"><input wj-part="input" class="wj-form-control"/><\/div>',t}(wjcCore.Control);exports.InputMask=InputMask;InputColor=function(n){function t(t,i){var r=this;n.call(this,t);this.valueChanged=new wjcCore.Event;wjcCore.addClass(this.hostElement,'wj-inputcolor');this._tbx.style.paddingLeft='24px';this._ePreview=wjcCore.createElement('<div class="wj-inputcolorbox" style="position:absolute;left:6px;top:6px;width:12px;bottom:6px;border:1px solid black"></div>');this.hostElement.style.position='relative';this.hostElement.appendChild(this._ePreview);this._orgTag=='INPUT'&&(this._tbx.type='',this._commitText());this.value='#ffffff';this.isRequired=!0;this.initialize(i);this.addEventListener(this._colorPicker.hostElement,'click',function(n){var t=n.target,i;t&&t.tagName=='DIV'&&(wjcCore.closest(t,'[wj-part="div-pal"]')||wjcCore.closest(t,'[wj-part="div-pv"]'))&&(i=t.style.backgroundColor,i&&(r.isDroppedDown=!1))})}return __extends(t,n),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(n){n!=this.value&&(n||!this.isRequired)&&(this.text=wjcCore.asString(n))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._tbx.value},set:function(n){n!=this.text&&(this._setText(wjcCore.asString(n),!0),this._commitText())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showAlphaChannel",{get:function(){return this._colorPicker.showAlphaChannel},set:function(n){this._colorPicker.showAlphaChannel=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"colorPicker",{get:function(){return this._colorPicker},enumerable:!0,configurable:!0}),t.prototype.onValueChanged=function(n){this.valueChanged.raise(this,n)},t.prototype._createDropDown=function(){var n=this;this._colorPicker=new ColorPicker(this._dropDown);wjcCore.setCss(this._dropDown,{minWidth:420,minHeight:200});this._colorPicker.valueChanged.addHandler(function(){n.value=n._colorPicker.value})},t.prototype._keydown=function(t){if(!t.defaultPrevented)switch(t.keyCode){case wjcCore.Key.Enter:this._commitText();this.selectAll();break;case wjcCore.Key.Escape:this.text=this.value;this.selectAll()}n.prototype._keydown.call(this,t)},t.prototype._commitText=function(){if(this.value!=this.text){if(!this.isRequired&&!this.text){this._value=this.text;this._ePreview.style.backgroundColor='';return}var n=wjcCore.Color.fromString(this.text);n?(this._colorPicker.value=this.text,this._value=this._colorPicker.value,this._ePreview.style.backgroundColor=this.value,this.onValueChanged()):this.text=this._value?this._value:''}},t}(DropDown);exports.InputColor=InputColor