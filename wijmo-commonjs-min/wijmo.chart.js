/*
    *
    * Wijmo Library 5.20171.282
    * http://wijmo.com/
    *
    * Copyright(c) GrapeCity, Inc.  All rights reserved.
    *
    * Licensed under the Wijmo Commercial License.
    * sales@wijmo.com
    * wijmo.com/products/wijmo-5/license/
    *
    */
"use strict";var __extends=this&&this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},wjcCore=require('wijmo/wijmo'),wjcSelf=require('wijmo/wijmo.chart'),DataPoint,RenderEventArgs,SeriesRenderingEventArgs,ImageFormat,FlexChartBase,_KeyWords,ExportHelper,FlexPie,_Math,_PieSegment,_DonutSegment,Stacking,SelectionMode,FlexChartCore,_AreaDef,_DataInfo,ChartTooltip,ChartType,FlexChart,Position,AxisType,OverlappingLabels,TickMark,Axis,AxisCollection,_tmInc,_timeSpan,_timeHelper,PlotArea,PlotAreaCollection,_GridUnitType,_GridLength,SeriesVisibility,Marker,DataArray,SeriesEventArgs,SeriesBase,Series,_SvgRenderEngine,GradientColorUtil,Legend,ChartElement,HitTestInfo,Palettes,_Spline,LabelPosition,PieLabelPosition,DataLabelRenderEventArgs,DataLabelBase,DataLabel,PieDataLabel,LineMarkers,lineMarkers,LineMarkerLines,LineMarkerInteraction,LineMarkerAlignment,LineMarker,_DataPoint,_MeasureOption,_RectArea,_CircleArea,_LinesArea,_HitResult,_HitTester,_BasePlotter,_BarPlotter,_LinePlotter,_AreaPlotter,_BubblePlotter,_FinancePlotter,_FunnelPlotter,_FunnelSegment,_VolumeHelper;window.wijmo=window.wijmo||{};window.wijmo.chart=wjcSelf;DataPoint=function(){function n(n,t){n===void 0&&(n=0);t===void 0&&(t=0);this.x=n;this.y=t}return n}();exports.DataPoint=DataPoint;RenderEventArgs=function(n){function t(t){n.call(this);this._engine=t}return __extends(t,n),Object.defineProperty(t.prototype,"engine",{get:function(){return this._engine},enumerable:!0,configurable:!0}),t}(wjcCore.CancelEventArgs);exports.RenderEventArgs=RenderEventArgs;SeriesRenderingEventArgs=function(n){function t(t,i,r){n.call(this,t);this._index=i;this._count=r}return __extends(t,n),Object.defineProperty(t.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),t}(RenderEventArgs);exports.SeriesRenderingEventArgs=SeriesRenderingEventArgs,function(n){n[n.Png=0]="Png";n[n.Jpeg=1]="Jpeg";n[n.Svg=2]="Svg"}(exports.ImageFormat||(exports.ImageFormat={}));ImageFormat=exports.ImageFormat;FlexChartBase=function(n){function t(){n.apply(this,arguments);this._palette=null;this._selectionMode=SelectionMode.None;this._defPalette=Palettes.standard;this._notifyCurrentChanged=!0;this._legendHost=null;this._needBind=!1;this.rendering=new wjcCore.Event;this.rendered=new wjcCore.Event;this.selectionChanged=new wjcCore.Event}return __extends(t,n),Object.defineProperty(t.prototype,"itemsSource",{get:function(){return this._items},set:function(n){this._items!=n&&(this._cv&&(this._cv.currentChanged.removeHandler(this._cvCurrentChanged,this),this._cv.collectionChanged.removeHandler(this._cvCollectionChanged,this),this._cv=null),this._items=n,this._cv=wjcCore.asCollectionView(n),this._cv!=null&&(this._cv.currentChanged.addHandler(this._cvCurrentChanged,this),this._cv.collectionChanged.addHandler(this._cvCollectionChanged,this)),this._clearCachedValues(),this._bindChart())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"collectionView",{get:function(){return this._cv},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"palette",{get:function(){return this._palette},set:function(n){n!=this._palette&&(this._palette=wjcCore.asArray(n),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"plotMargin",{get:function(){return this._plotMargin},set:function(n){n!=this._plotMargin&&(this._plotMargin=n,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"legend",{get:function(){return this._legend},set:function(n){n!=this._legend&&(this._legend=wjcCore.asType(n,Legend),this._legend!=null&&(this._legend._chart=this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"header",{get:function(){return this._header},set:function(n){n!=this._header&&(this._header=wjcCore.asString(n,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"footer",{get:function(){return this._footer},set:function(n){n!=this._footer&&(this._footer=wjcCore.asString(n,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"headerStyle",{get:function(){return this._headerStyle},set:function(n){n!=this._headerStyle&&(this._headerStyle=n,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"footerStyle",{get:function(){return this._footerStyle},set:function(n){n!=this._footerStyle&&(this._footerStyle=n,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectionMode",{get:function(){return this._selectionMode},set:function(n){n!=this._selectionMode&&(this._selectionMode=wjcCore.asEnum(n,SelectionMode),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemFormatter",{get:function(){return this._itemFormatter},set:function(n){n!=this._itemFormatter&&(this._itemFormatter=wjcCore.asFunction(n),this.invalidate())},enumerable:!0,configurable:!0}),t.prototype.onRendered=function(n){this.rendered.raise(this,n)},t.prototype.onRendering=function(n){this.rendering.raise(this,n)},t.prototype.saveImageToFile=function(n){var r,t,u,i;n&&n.length!==0&&n.indexOf('.')!==-1||(n='image.png');i=n.split('.');r=i[0].toLowerCase();t=i[1].toLowerCase();u=ImageFormat[t[0].toUpperCase()+t.substring(1)];this.saveImageToDataUrl(u,function(n){ExportHelper.downloadImage(n,r,t)})},t.prototype.saveImageToDataUrl=function(n,t){var r=wjcCore.asEnum(n,ImageFormat,!1),i=ImageFormat[r].toLowerCase();i&&i.length&&this._exportToImage(i,function(n){t.call(t,n)})},t.prototype._exportToImage=function(n,t){var i=new Image,u=this._currentRenderEngine.element,r;r=ExportHelper.getDataUri(u);n==='svg'?t.call(null,r):(i.onload=function(){var r=document.createElement('canvas'),f=wjcCore.getElementRect(u),o,e;r.width=f.width;r.height=f.height;e=r.getContext('2d');e.fillStyle='#ffffff';e.fillRect(0,0,f.width,f.height);e.drawImage(i,0,0);o=r.toDataURL('image/'+n);t.call(null,o);r=null},i.src=r)},t.prototype.refresh=function(t){t===void 0&&(t=!0);n.prototype.refresh.call(this,t);this.isUpdating||this._refreshChart()},t.prototype.containsFocus=function(){var t=n.prototype.containsFocus.call(this),i;return t||(i=wjcCore.getActiveElement(),i&&(t=i.parentNode===this.hostElement)),t},t.prototype.onSelectionChanged=function(n){this.selectionChanged.raise(this,n)},t.prototype.onLostFocus=function(t){this._tooltip&&this._tooltip.isVisible&&this._tooltip.hide();n.prototype.onLostFocus.call(this,t)},t.prototype._cvCollectionChanged=function(){this._clearCachedValues();this._bindChart()},t.prototype._cvCurrentChanged=function(){this._notifyCurrentChanged&&this._bindChart()},t.prototype._getColor=function(n){var t=this._defPalette;return this._palette!=null&&this._palette.length>0&&(t=this._palette),t[n%t.length]},t.prototype._getColorLight=function(n){var t=this._getColor(n),i=new wjcCore.Color(t);return i!=null&&t.indexOf('-')===-1&&(i.a==1&&t.indexOf('rgba')==-1&&(i.a*=.7),t=i.toString()),t},t.prototype._bindChart=function(){this._needBind=!0;this.invalidate()},t.prototype._clearCachedValues=function(){},t.prototype._render=function(){},t.prototype._performBind=function(){},t.prototype._refreshChart=function(){this._needBind&&(this._needBind=!1,this._performBind());this.hostElement&&this._render(this._currentRenderEngine)},t.prototype._drawTitle=function(n,t,i,r,u){var f=FlexChart._CSS_TITLE,e=u?FlexChart._CSS_FOOTER:FlexChart._CSS_HEADER,o=null;if(u?this._rectFooter=null:this._rectHeader=null,i!=null){var c=null,s=null,l=null,h=null;r&&(r.fontSize&&(c=r.fontSize),r.foreground&&(s=r.foreground),r.fill&&(s=r.fill),r.fontFamily&&(l=r.fontFamily),r.halign&&(h=r.halign));n.fontSize=c;n.fontFamily=l;o=n.measureString(i,f,e,r);t.height-=o.height;s||(s=FlexChart._FG);n.textFill=s;u?(h=='left'?FlexChart._renderText(n,i,new wjcCore.Point(t.left,t.bottom),0,0,f,e,r):h=='right'?FlexChart._renderText(n,i,new wjcCore.Point(t.left+t.width,t.bottom),2,0,f,e,r):FlexChart._renderText(n,i,new wjcCore.Point(t.left+.5*t.width,t.bottom),1,0,f,e,r),this._rectFooter=new wjcCore.Rect(t.left,t.bottom,t.width,o.height)):(this._rectHeader=new wjcCore.Rect(t.left,t.top,t.width,o.height),t.top+=o.height,h=='left'?FlexChart._renderText(n,i,new wjcCore.Point(t.left,0),0,0,f,e,r):h=='right'?FlexChart._renderText(n,i,new wjcCore.Point(t.left+t.width,0),2,0,f,e,r):FlexChart._renderText(n,i,new wjcCore.Point(t.left+.5*t.width,0),1,0,f,e,r));n.textFill=null;n.fontSize=null;n.fontFamily=null}return t},t.prototype._toControl=function(n,t){var i,e,r,u,f;return wjcCore.isNumber(n)&&wjcCore.isNumber(t)?n=new wjcCore.Point(n,t):n instanceof MouseEvent&&(n=new wjcCore.Point(n.pageX,n.pageY)),wjcCore.asType(n,wjcCore.Point),i=n.clone(),e=this._getHostOffset(),i.x-=e.x,i.y-=e.y,r=this._getHostComputedStyle(),r&&(u=parseInt(r.paddingLeft.replace('px','')),u&&!isNaN(u)&&(i.x-=u),f=parseInt(r.paddingTop.replace('px','')),f&&!isNaN(f)&&(i.y-=f)),i},t.prototype._highlightItems=function(n,t,i){var r;if(i)for(r=0;r<n.length;r++)wjcCore.addClass(n[r],t);else for(r=0;r<n.length;r++)wjcCore.removeClass(n[r],t)},t.prototype._parseMargin=function(n){var i={};if(wjcCore.isNumber(n)&&!isNaN(n))i.top=i.bottom=i.left=i.right=wjcCore.asNumber(n);else if(wjcCore.isString(n)){var o=wjcCore.asString(n),t=o.split(' ',4),r=NaN,u=NaN,f=NaN,e=NaN;t&&(t.length==4?(r=parseFloat(t[0]),e=parseFloat(t[1]),u=parseFloat(t[2]),f=parseFloat(t[3])):t.length==2?(r=u=parseFloat(t[0]),f=e=parseFloat(t[1])):t.length==1&&(r=u=f=e=parseFloat(t[1])),isNaN(r)||(i.top=r),isNaN(u)||(i.bottom=u),isNaN(f)||(i.left=f),isNaN(e)||(i.right=e))}return i},t.prototype._showToolTip=function(n,t){var i=this,r=this._tooltip.showDelay;i._clearTimeouts();r>0?i._toShow=setTimeout(function(){i._tooltip.show(i.hostElement,n,t);i._tooltip.hideDelay>0&&(i._toHide=setTimeout(function(){i._tooltip.hide()},i._tooltip.hideDelay))},r):(i._tooltip.show(i.hostElement,n,t),i._tooltip.hideDelay>0&&(i._toHide=setTimeout(function(){i._tooltip.hide()},i._tooltip.hideDelay)))},t.prototype._hideToolTip=function(){this._clearTimeouts();this._tooltip.hide()},t.prototype._clearTimeouts=function(){this._toShow&&(clearTimeout(this._toShow),this._toShow=null);this._toHide&&(clearTimeout(this._toHide),this._toHide=null)},t.prototype._getHostOffset=function(){var n=wjcCore.getElementRect(this.hostElement);return new wjcCore.Point(n.left,n.top)},t.prototype._getHostSize=function(){var t=new wjcCore.Size,u=this.hostElement,n=this._getHostComputedStyle(),i=u.offsetWidth,r=u.offsetHeight;if(n){var f=parseFloat(n.paddingLeft.replace('px','')),e=parseFloat(n.paddingRight.replace('px','')),o=parseFloat(n.paddingTop.replace('px','')),s=parseFloat(n.paddingBottom.replace('px',''));isNaN(f)||(i-=f);isNaN(e)||(i-=e);isNaN(o)||(r-=o);isNaN(s)||(r-=s);t.width=i;t.height=r}return t},t.prototype._getHostComputedStyle=function(){var n=this.hostElement;return n&&n.ownerDocument&&n.ownerDocument.defaultView?n.ownerDocument.defaultView.getComputedStyle(this.hostElement):null},t.prototype._find=function(n,t){for(var i,r,u,f=[],e=0;e<n.childElementCount;e++)if(i=n.childNodes.item(e),t.indexOf(i.nodeName)>=0)f.push(i);else if(r=this._find(i,t),r.length>0)for(u=0;u<r.length;u++)f.push(r[u]);return f},t._WIDTH=300,t._HEIGHT=200,t._SELECTION_THRESHOLD=15,t}(wjcCore.Control);exports.FlexChartBase=FlexChartBase;_KeyWords=function(){function n(){this._keys={};this._keys.seriesName=null;this._keys.pointIndex=null;this._keys.x=null;this._keys.y=null;this._keys.value=null;this._keys.name=null}return n.prototype.replace=function(n,t){var i=this;return wjcCore.format(n,{},function(n,r,u){return i.getValue(r,t,u)})},n.prototype.getValue=function(n,t,i){switch(n){case'seriesName':return t.series?t.series.name:'';case'pointIndex':return t.pointIndex!=null?t.pointIndex.toFixed():'';case'x':return i?wjcCore.Globalize.format(t.x,i):t._xfmt;case'y':return i?wjcCore.Globalize.format(t.y,i):t._yfmt;case'value':return i?wjcCore.Globalize.format(t.value,i):t.value;case'name':return t.name}return t.item&&(n.indexOf('item.')==0&&(n=n.substr(5)),n in t.item)?i?wjcCore.Globalize.format(t.item[n],i):t.item[n]:''},n}();exports._KeyWords=_KeyWords;ExportHelper=function(){function n(){}return n.downloadImage=function(n,t,i){var r=document.createElement('a'),v='image/'+i,o,f,a;if(navigator.msSaveOrOpenBlob){n=n.substring(n.indexOf(',')+1);for(var s=atob(n),h=[],c=512,e,l,u=0;u<s.length;u+=c){for(e=s.slice(u,u+c),o=new Array(e.length),f=0;f<e.length;f++)o[f]=e.charCodeAt(f);a=new Uint8Array(o);h.push(a)}l=new Blob(h,{type:v});navigator.msSaveOrOpenBlob(l,t+'.'+i)}else r.download=t+'.'+i,r.href=n,document.body.appendChild(r),r.addEventListener("click",function(){r.parentNode.removeChild(r)}),r.click()},n.getDataUri=function(t){var a=document.createElement('div'),i=t.cloneNode(!0),o,r,u,s,h,f,v,c,e,l;return t.tagName=='svg'?(o=wjcCore.getElementRect(t),r=o.width||0,u=o.height||0,s=t.viewBox.baseVal&&t.viewBox.baseVal.width!==0?t.viewBox.baseVal.width:r,h=t.viewBox.baseVal&&t.viewBox.baseVal.height!==0?t.viewBox.baseVal.height:u):(f=t.getBBox(),r=f.x+f.width,u=f.y+f.height,i.setAttribute('transform',i.getAttribute('transform').replace(/translate\(.*?\)/,'')),s=r,h=u,c=document.createElementNS('http://www.w3.org/2000/svg','svg'),c.appendChild(i),i=c),i.setAttribute('version','1.1'),i.setAttributeNS(n.xmlns,'xmlns','http://www.w3.org/2000/svg'),i.setAttributeNS(n.xmlns,'xmlns:xlink','http://www.w3.org/1999/xlink'),i.setAttribute('width',r),i.setAttribute('height',u),i.setAttribute('viewBox','0 0 '+s+' '+h),wjcCore.addClass(i,t.parentNode&&t.parentNode.getAttribute('class')||''),a.appendChild(i),v=n.getStyles(t),e=document.createElement('style'),e.setAttribute('type','text/css'),e.innerHTML="<![CDATA[\n"+v+"\n]]>",l=document.createElement('defs'),l.appendChild(e),i.insertBefore(l,i.firstChild),'data:image/svg+xml;base64,'+window.btoa(window.unescape(encodeURIComponent(n.doctype+a.innerHTML)))},n.getStyles=function(n){var t='',i=document.styleSheets;return i==null||i.length===0?null:([].forEach.call(i,function(i){var r;try{if(i.cssRules==null||i.cssRules.length===0)return!0}catch(u){if(u.name=='SecurityError')return console.log("SecurityError. Can't read: "+i.href),!0}r=i.cssRules;[].forEach.call(r,function(i){var r=i.style,u;if(r==null)return!0;try{u=n.querySelector(i.selectorText)}catch(f){console.warn('Invalid CSS selector "'+i.selectorText+'"',f)}u?t+=i.selectorText+" { "+r.cssText+" }\n":i.cssText.match(/^@font-face/)&&(t+=i.cssText+'\n')})}),t)},n.doctype='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">',n.xmlns='http://www.w3.org/2000/xmlns/',n}();FlexPie=function(n){function t(t,i){n.call(this,t,null,!0);this._areas=[];this._keywords=new _KeyWords;this._startAngle=0;this._innerRadius=0;this._offset=0;this._reversed=!1;this._isAnimated=!1;this._selectedItemPosition=Position.None;this._selectedItemOffset=0;this._rotationAngle=0;this._center=new wjcCore.Point;this._selectedOffset=new wjcCore.Point;this._selectedIndex=-1;this._angles=[];this._values=[];this._labels=[];this._pels=[];this._sum=0;this.applyTemplate('wj-control wj-flexchart',null,null);this._currentRenderEngine=new _SvgRenderEngine(this.hostElement);this._legend=new Legend(this);this._tooltip=new ChartTooltip;this._tooltip.content='<b>{name}</b><br/>{value}';this._tooltip.showDelay=0;this._lbl=new PieDataLabel;this._lbl._chart=this;var r=this;this.hostElement.addEventListener('mousemove',function(n){var i=r._tooltip,f=i.content,t,u;f&&!r.isTouching&&(t=r.hitTest(n),t.distance<=i.threshold?(u=r._getLabelContent(t,r.tooltip.content),r._showToolTip(u,new wjcCore.Rect(n.clientX,n.clientY,5,5))):r._hideToolTip())});this.hostElement.addEventListener('click',function(n){var f=!0,i,u,e,t,o;r.selectionMode!=SelectionMode.None&&(t=r.hitTest(n),i=FlexChart._SELECTION_THRESHOLD,r.tooltip&&r.tooltip.threshold&&(i=r.tooltip.threshold),t.distance<=i?(t.pointIndex!=r._selectionIndex&&r.selectedItemPosition!=Position.None&&(f=!1),t.pointIndex!=r._selectionIndex&&r._select(t.pointIndex,!0)):r._selectedIndex>=0&&r._select(null));f&&r.isTouching&&(u=r._tooltip,e=u.content,e&&(t=r.hitTest(n),t.distance<=u.threshold?(o=r._getLabelContent(t,r.tooltip.content),r._showToolTip(o,new wjcCore.Rect(n.clientX,n.clientY,5,5))):r._hideToolTip()))});this.hostElement.addEventListener('mouseleave',function(){r._hideToolTip()});this.initialize(i);this.refresh()}return __extends(t,n),Object.defineProperty(t.prototype,"binding",{get:function(){return this._binding},set:function(n){n!=this._binding&&(this._binding=wjcCore.asString(n,!0),this._bindChart())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bindingName",{get:function(){return this._bindingName},set:function(n){n!=this._bindingName&&(this._bindingName=wjcCore.asString(n,!0),this._bindChart())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startAngle",{get:function(){return this._startAngle},set:function(n){n!=this._startAngle&&(this._startAngle=wjcCore.asNumber(n,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"offset",{get:function(){return this._offset},set:function(n){n!=this._offset&&(this._offset=wjcCore.asNumber(n,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"innerRadius",{get:function(){return this._innerRadius},set:function(n){n!=this._innerRadius&&(this._innerRadius=wjcCore.asNumber(n,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"reversed",{get:function(){return this._reversed},set:function(n){n!=this._reversed&&(this._reversed=wjcCore.asBoolean(n,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedItemPosition",{get:function(){return this._selectedItemPosition},set:function(n){n!=this._selectedItemPosition&&(this._selectedItemPosition=wjcCore.asEnum(n,Position,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedItemOffset",{get:function(){return this._selectedItemOffset},set:function(n){n!=this._selectedItemOffset&&(this._selectedItemOffset=wjcCore.asNumber(n,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAnimated",{get:function(){return this._isAnimated},set:function(n){n!=this._isAnimated&&(this._isAnimated=n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tooltip",{get:function(){return this._tooltip},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataLabel",{get:function(){return this._lbl},set:function(n){n!=this._lbl&&(this._lbl=n,this._lbl&&(this._lbl._chart=this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedIndex",{get:function(){return this._selectedIndex},set:function(n){if(n!=this._selectedIndex){var t=wjcCore.asNumber(n,!0);this._select(t,!0)}},enumerable:!0,configurable:!0}),t.prototype._getLabelsForLegend=function(){return this._labels},t.prototype.hitTest=function(n,t){var u=this._toControl(n,t),i=new HitTestInfo(this,u),e=null,v,o,c,f,r,s,h;if(FlexChart._contains(this._rectHeader,u))i._chartElement=ChartElement.Header;else if(FlexChart._contains(this._rectFooter,u))i._chartElement=ChartElement.Footer;else if(FlexChart._contains(this._rectLegend,u))i._chartElement=ChartElement.Legend,e=this.legend._hitTest(u),e!==null&&e>=0&&e<this._areas.length&&i._setData(null,e);else if(FlexChart._contains(this._rectChart,u)){for(v=this._areas.length,o=NaN,f=0;f<v;f++){if(r=u.clone(),this._rotationAngle!=0){var y=this._center.x,p=this._center.y,l=-y+r.x,a=-p+r.y,w=Math.sqrt(l*l+a*a),b=Math.atan2(a,l)-this._rotationAngle*Math.PI/180;r.x=y+w*Math.cos(b);r.y=p+w*Math.sin(b)}if(f==this._selectedIndex&&(r.x-=this._selectedOffset.x,r.y-=this._selectedOffset.y),s=this._areas[f],s.contains(r)&&(i._setData(null,s.tag),i._dist=0,f!=this._selectedIndex))break;h=s.distance(r);h!==undefined&&(isNaN(o)||h<o)&&(o=h,c=s)}i._dist!==0&&c!=null&&(i._setData(null,c.tag),i._dist=o);i._chartElement=ChartElement.ChartArea}else i._chartElement=ChartElement.None;return i},t.prototype._performBind=function(){var n,i,t,r;if(this._initData(),this._cv&&(this._selectionIndex=this._cv.currentPosition,n=this._cv.items,n))for(i=n.length,t=0;t<i;t++)r=n[t],this._sum+=Math.abs(this._getBindData(r,this._values,this._labels,this.binding,this.bindingName))},t.prototype._initData=function(){this._sum=0;this._values=[];this._labels=[]},t.prototype._getBindData=function(n,t,i,r,u){var e,f=0,o;return r&&(e=n[r]),f=0,wjcCore.isNumber(e)?f=wjcCore.asNumber(e):e&&(f=parseFloat(e.toString())),!isNaN(f)&&isFinite(f)?t.push(f):(f=0,t.push(f)),u&&n?(o=n[u],o&&(o=o.toString()),i.push(o)):i.push(f.toString()),f},t.prototype._render=function(n){var y,a,f,o,i,h,u,r;this._selectionAnimationID&&clearInterval(this._selectionAnimationID);var p=this.hostElement,v=this._getHostSize(),r=v.width,u=v.height;if((r==0||isNaN(r))&&(r=FlexChart._WIDTH),(u==0||isNaN(u))&&(u=FlexChart._HEIGHT),y=new wjcCore.Size(r,u),n.beginRender(),r>0&&u>0){n.setViewportSize(r,u);this._areas=[];a=this.legend;i=new wjcCore.Rect(0,0,r,u);this._rectChart=i.clone();n.startGroup(FlexChart._CSS_HEADER);i=this._drawTitle(n,i,this.header,this.headerStyle,!1);n.endGroup();n.startGroup(FlexChart._CSS_FOOTER);i=this._drawTitle(n,i,this.footer,this.footerStyle,!0);n.endGroup();this.onRendering(new RenderEventArgs(n));r=i.width;u=i.height;h=a._getPosition(r,u);f=a._getDesiredSize(n,h,r,u);switch(h){case Position.Right:r-=f.width;o=new wjcCore.Point(r,i.top+.5*(u-f.height));break;case Position.Left:i.left+=f.width;r-=f.width;o=new wjcCore.Point(0,i.top+.5*(u-f.height));break;case Position.Top:u-=f.height;o=new wjcCore.Point(.5*(r-f.width),i.top);i.top+=f.height;break;case Position.Bottom:u-=f.height;o=new wjcCore.Point(.5*(r-f.width),i.top+u)}i.width=r;i.height=u;this._pieGroup=n.startGroup(null,null,!0);var e=this._parseMargin(this.plotMargin),c=this.dataLabel,s=c.content&&c.position==PieLabelPosition.Outside,l=s?(wjcCore.isNumber(c.offset)?c.offset:0)+24:0;isNaN(e.left)&&(e.left=s?l:t._MARGIN);isNaN(e.right)&&(e.right=s?l:t._MARGIN);isNaN(e.top)&&(e.top=s?l:t._MARGIN);isNaN(e.bottom)&&(e.bottom=s?l:t._MARGIN);i.top+=e.top;u=i.height-(e.top+e.bottom);i.height=u>0?u:24;i.left+=e.left;r=i.width-(e.left+e.right);i.width=r>0?r:24;this._renderData(n,i,this._pieGroup);n.endGroup();f?(this._legendHost=n.startGroup(FlexChart._CSS_LEGEND),this._rectLegend=new wjcCore.Rect(o.x,o.y,f.width,f.height),this.legend._render(n,o,h,f.width,f.height),n.endGroup()):(this._legendHost=null,this._rectLegend=null);this._rotationAngle=0;this._highlightCurrent();this.dataLabel.content&&this.dataLabel.position!=PieLabelPosition.None&&this._renderLabels(n);this.onRendered(new RenderEventArgs(n))}n.endRender()},t.prototype._renderData=function(n,t){var u,f;this._pels=[];this._angles=[];var e=this._sum,o=this.startAngle+180,s=this.innerRadius,r=this.offset;if(e>0){var h=o*Math.PI/180,c=t.left+.5*t.width,l=t.top+.5*t.height,i=Math.min(.5*t.width,.5*t.height);this._center.x=c;this._center.y=l;u=Math.max(r,this.selectedItemOffset);u>0&&(i=i/(1+u),r=r*i);this._radius=i;f=s*i;this._renderPie(n,i,f,h,r);this._highlightCurrent()}},t.prototype._renderPie=function(n,t,i,r,u){this._renderSlices(n,this._values,this._sum,t,i,r,2*Math.PI,u)},t.prototype._getCenter=function(){return this._center},t.prototype._renderSlices=function(n,t,i,r,u,f,e,o){for(var k=t.length,c=f,y=this.reversed==!0,p=this._center,s,w,l,a,h=0;h<k;h++){l=p.x;a=p.y;w=n.startGroup();n.fill=this._getColorLight(h);n.stroke=this._getColor(h);var b=Math.abs(t[h]),s=Math.abs(b-i)<1e-10?e:e*b/i,v=y?c-.5*s:c+.5*s;o>0&&s<e&&(l+=o*Math.cos(v),a+=o*Math.sin(v));this._renderSlice(n,l,a,v,h,r,u,c,s,e);y?c-=s:c+=s;n.endGroup();this._pels.push(w)}},t.prototype._renderSlice=function(n,t,i,r,u,f,e,o,s){var l=this,c=!!this.reversed,h;this._angles.push(r);this.itemFormatter?(h=new HitTestInfo(this,new wjcCore.Point(t+f*Math.cos(r),i+f*Math.sin(r)),ChartElement.SeriesSymbol),h._setData(null,u),this.itemFormatter(n,h,function(){l._drawSlice(n,u,c,t,i,f,e,o,s)})):this._drawSlice(n,u,c,t,i,f,e,o,s)},t.prototype._renderLabels=function(n){var ft=this._areas.length,o=this.dataLabel,h=o.position,e=2,et=this._rotationAngle,ot=o.connectingLine,ut=o.offset?o.offset:0,s,u,c,g,nt,f,tt,it,l,rt;for(n.stroke='null',n.fill='transparent',n.strokeWidth=1,n.startGroup('wj-data-labels'),s=0;s<ft;s++)if(u=this._areas[s],u){var a=u.radius,t=u.langle+et,i=1,r=1;h==PieLabelPosition.Center?a*=.5*(1+(u.innerRadius||0)/u.radius):(t=_Math.clampAngle(t),t<=-170||t>=170?(i=2,r=1):t>=-100&&t<=-80?(i=1,r=2):t>=-10&&t<=10?(i=0,r=1):t>=80&&t<=100?(i=1,r=0):-180<t&&t<-90?(i=2,r=2):-90<=t&&t<0?(i=0,r=2):0<t&&t<90?(i=0,r=0):90<t&&t<180&&(i=2,r=0),h==PieLabelPosition.Inside&&(i=2-i,r=2-r));t*=Math.PI/180;var y=0,p=0,v=0;s==this._selectedIndex&&this.selectedItemOffset>0&&(v=this.selectedItemOffset);v>0&&(y=Math.cos(t)*v*this._radius,p=Math.sin(t)*v*this._radius);c=a;h==PieLabelPosition.Outside?c+=ut:h==PieLabelPosition.Inside&&(c-=ut);var w=u.center.x,b=u.center.y,k=w-this._center.x,d=b-this._center.y;this._rotationAngle!=0&&(g=Math.sqrt(k*k+d*d),nt=Math.atan2(d,k)+this._rotationAngle*Math.PI/180,w=this._center.x+g*Math.cos(nt),b=this._center.y+g*Math.sin(nt));f=new wjcCore.Point(w+y+c*Math.cos(t),b+p+c*Math.sin(t));o.border&&h!=PieLabelPosition.Center&&(i==0?f.x+=e:i==2&&(f.x-=e),r==0?f.y+=e:r==2&&(f.y-=e));tt=new HitTestInfo(this,f);tt._setData(null,s);it=this._getLabelContent(tt,o.content);it&&(l=FlexChart._renderText(n,it,f,i,r,'wj-data-label'),o.border&&n.drawRect(l.left-e,l.top-e,l.width+2*e,l.height+2*e,'wj-data-label-border'),ot&&(rt=new wjcCore.Point(u.center.x+y+a*Math.cos(t),u.center.y+p+a*Math.sin(t)),n.drawLine(f.x,f.y,rt.x,rt.y,'wj-data-label-line')))}n.endGroup()},t.prototype._drawSlice=function(n,t,i,r,u,f,e,o,s){var h;i?e>0?(s!=0&&n.drawDonutSegment(r,u,f,e,o-s,s),h=new _DonutSegment(new wjcCore.Point(r,u),f,e,o-s,s),h.tag=t,this._areas.push(h)):(s!=0&&n.drawPieSegment(r,u,f,o-s,s),h=new _PieSegment(new wjcCore.Point(r,u),f,o-s,s),h.tag=t,this._areas.push(h)):(e>0?(s!=0&&n.drawDonutSegment(r,u,f,e,o,s),h=new _DonutSegment(new wjcCore.Point(r,u),f,e,o,s),h.tag=t,this._areas.push(h)):(s!=0&&n.drawPieSegment(r,u,f,o,s),h=new _PieSegment(new wjcCore.Point(r,u),f,o,s),h.tag=t,this._areas.push(h)),o+=s)},t.prototype._measureLegendItem=function(n,t){var i=new wjcCore.Size,r;return i.width=Series._LEGEND_ITEM_WIDTH,i.height=Series._LEGEND_ITEM_HEIGHT,t&&(r=n.measureString(t,FlexChart._CSS_LABEL),i.width+=r.width,i.height<r.height&&(i.height=r.height)),i.width+=3*Series._LEGEND_ITEM_MARGIN,i.height+=2*Series._LEGEND_ITEM_MARGIN,i},t.prototype._drawLegendItem=function(n,t,i,r){n.strokeWidth=1;var o=Series._LEGEND_ITEM_MARGIN,u=null,f=null;u===null&&(u=this._getColorLight(i));f===null&&(f=this._getColor(i));n.fill=u;n.stroke=f;var s=t.top+.5*t.height,h=Series._LEGEND_ITEM_WIDTH,e=Series._LEGEND_ITEM_HEIGHT;n.drawRect(t.left+o,s-.5*e,h,e,null);r&&FlexChart._renderText(n,r,new wjcCore.Point(t.left+e+2*o,s),0,1,FlexChart._CSS_LABEL)},t.prototype._getLabelContent=function(n,t){return wjcCore.isString(t)?this._keywords.replace(t,n):wjcCore.isFunction(t)?t(n):null},t.prototype._select=function(n,t){if(t===void 0&&(t=!1),this._highlight(!1,this._selectionIndex),this._selectionIndex=n,this.selectionMode==SelectionMode.Point){var i=this._cv;i&&(this._notifyCurrentChanged=!1,i.moveCurrentToPosition(n),this._notifyCurrentChanged=!0)}this.onSelectionChanged();!this.isAnimated&&(this.selectedItemOffset>0||this.selectedItemPosition!=Position.None)?this.invalidate():this._highlight(!0,this._selectionIndex,t)},t.prototype._highlightCurrent=function(){if(this.selectionMode!=SelectionMode.None){var n=-1,t=this._cv;t&&(n=t.currentPosition);this._highlight(!0,n)}},t.prototype._highlight=function(n,t,i){var r,s,u,f,e,o,h,c;i===void 0&&(i=!1);this.selectionMode==SelectionMode.Point&&t!==undefined&&t!==null&&t>=0&&(r=this._pels[t],n?(r&&(r.parentNode.appendChild(r),s=this._find(r,['ellipse']),this._highlightItems(this._find(r,['path','ellipse']),FlexChart._CSS_SELECTION,n)),u=this._angles[t],this.selectedItemPosition!=Position.None&&u!=0&&(f=0,this.selectedItemPosition==Position.Left?f=180:this.selectedItemPosition==Position.Top?f=-90:this.selectedItemPosition==Position.Bottom&&(f=90),e=f*Math.PI/180-u,e*=180/Math.PI,i&&this.isAnimated?this._animateSelectionAngle(e,.5):(this._rotationAngle=e,this._pieGroup.transform.baseVal.getItem(0).setRotate(e,this._center.x,this._center.y))),o=this.selectedItemOffset,o>0&&s.length==0&&(h=this._selectedOffset.x=Math.cos(u)*o*this._radius,c=this._selectedOffset.y=Math.sin(u)*o*this._radius,r&&r.setAttribute('transform','translate('+h.toFixed()+','+c.toFixed()+')')),this._selectedIndex=t):(r&&(r.parentNode.insertBefore(r,r.parentNode.childNodes.item(t)),r.removeAttribute('transform'),this._highlightItems(this._find(r,['path','ellipse']),FlexChart._CSS_SELECTION,n)),this._selectedIndex==t&&(this._selectedIndex=-1)))},t.prototype._animateSelectionAngle=function(n,t){var r=_Math.clampAngle(this._rotationAngle);n=_Math.clampAngle(n);var u=n-r,i=this,f=r,e=i._pieGroup;i._selectionAnimationID&&clearInterval(this._selectionAnimationID);this._selectionAnimationID=wjcCore.animate(function(n){e==i._pieGroup&&(i._rotationAngle=r=f+u*n,i._pieGroup.transform.baseVal.getItem(0).setRotate(r,i._center.x,i._center.y),n==1&&clearInterval(i._selectionAnimationID),n>.99&&(i.selectedItemOffset>0||i.selectedItemPosition!=Position.None)&&i.invalidate())},t*1e3)},t._MARGIN=4,t}(FlexChartBase);exports.FlexPie=FlexPie;_Math=function(){function n(){}return n.clampAngle=function(n){var t=(n+180)%360-180;return t<-180&&(t+=360),t},n}();_PieSegment=function(){function n(n,t,i,r){this._isFull=!1;this._center=n;this._radius=t;this._originAngle=i;this._originSweep=r;r>=2*Math.PI&&(this._isFull=!0);this._sweep=.5*r*180/Math.PI;this._angle=_Math.clampAngle(i*180/Math.PI+this._sweep);this._radius2=t*t}return n.prototype.contains=function(n){var t=n.x-this._center.x,i=n.y-this._center.y,f=t*t+i*i,r,u;return f<=this._radius2&&(r=Math.atan2(i,t)*180/Math.PI,u=_Math.clampAngle(this._angle)-_Math.clampAngle(r),this._isFull||Math.abs(u)<=this._sweep)?!0:!1},n.prototype.distance=function(n){if(this.contains(n))return 0;var t=n.x-this._center.x,i=n.y-this._center.y,r=t*t+i*i,u=Math.atan2(i,t)*180/Math.PI,f=_Math.clampAngle(this._angle)-_Math.clampAngle(u);return this._isFull||Math.abs(f)<=this._sweep?Math.sqrt(r)-this._radius:undefined},Object.defineProperty(n.prototype,"center",{get:function(){return this._center},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"radius",{get:function(){return this._radius},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"langle",{get:function(){return this._angle},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"angle",{get:function(){return this._originAngle},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"sweep",{get:function(){return this._originSweep},enumerable:!0,configurable:!0}),n}();exports._PieSegment=_PieSegment;_DonutSegment=function(){function n(n,t,i,r,u){this._isFull=!1;this._center=n;this._radius=t;this._iradius=i;this._originAngle=r;this._originSweep=u;u>=2*Math.PI&&(this._isFull=!0);this._sweep=.5*u*180/Math.PI;this._angle=_Math.clampAngle(r*180/Math.PI+this._sweep);this._radius2=t*t;this._iradius2=i*i}return n.prototype.contains=function(n){var t=n.x-this._center.x,i=n.y-this._center.y,r=t*t+i*i,u,f;return r>=this._iradius2&&r<=this._radius2&&(u=Math.atan2(i,t)*180/Math.PI,f=_Math.clampAngle(this._angle-u),this._isFull||Math.abs(f)<=this._sweep)?!0:!1},n.prototype.distance=function(n){return this.contains(n)?0:undefined},Object.defineProperty(n.prototype,"center",{get:function(){return this._center},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"radius",{get:function(){return this._radius},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"langle",{get:function(){return this._angle},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"angle",{get:function(){return this._originAngle},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"sweep",{get:function(){return this._originSweep},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"innerRadius",{get:function(){return this._iradius},enumerable:!0,configurable:!0}),n}();exports._DonutSegment=_DonutSegment,function(n){n[n.None=0]="None";n[n.Stacked=1]="Stacked";n[n.Stacked100pc=2]="Stacked100pc"}(exports.Stacking||(exports.Stacking={}));Stacking=exports.Stacking,function(n){n[n.None=0]="None";n[n.Series=1]="Series";n[n.Point=2]="Point"}(exports.SelectionMode||(exports.SelectionMode={}));SelectionMode=exports.SelectionMode;FlexChartCore=function(n){function t(t,i){n.call(this,t,null,!0);this._series=new wjcCore.ObservableArray;this._axes=new AxisCollection;this._pareas=new PlotAreaCollection;this._interpolateNulls=!1;this._legendToggle=!1;this._symbolSize=10;this._dataInfo=new _DataInfo;this.__barPlotter=null;this.__linePlotter=null;this.__areaPlotter=null;this.__bubblePlotter=null;this.__financePlotter=null;this.__funnelPlotter=null;this._plotters=[];this._rotated=!1;this._stacking=Stacking.None;this._xlabels=[];this._xvals=[];this._lblAreas=[];this.seriesVisibilityChanged=new wjcCore.Event;this.applyTemplate('wj-control wj-flexchart',null,null);var r=this;r._series.collectionChanged.addHandler(function(){for(var n,i=r._series,t=0;t<i.length;t++){if(n=wjcCore.tryCast(i[t],SeriesBase),!n)throw'chartSeries array must contain SeriesBase objects.';n._chart=r;n.axisX&&(n.axisX._chart=r);n.axisY&&(n.axisY._chart=r)}r.refresh()});this._currentRenderEngine=new _SvgRenderEngine(this.hostElement);this._hitTester=new _HitTester(this);this._legend=new Legend(this);this._tooltip=new ChartTooltip;this._tooltip.showDelay=0;this._lbl=new DataLabel;this._lbl._chart=this;this._initAxes();r._axes.collectionChanged.addHandler(function(){for(var t,i=r._axes,n=0;n<i.length;n++){if(t=wjcCore.tryCast(i[n],Axis),!t)throw'axes array must contain Axis objects.';t._chart=r}r.refresh()});r._pareas.collectionChanged.addHandler(function(){for(var t,i=r._pareas,n=0;n<i.length;n++){if(t=wjcCore.tryCast(i[n],PlotArea),!t)throw'plotAreas array must contain PlotArea objects.';t._chart=r}r.refresh()});this._keywords=new _KeyWords;this.hostElement.addEventListener('click',function(n){var i=r._tooltip,f=i.content,t,u;f&&r.isTouching&&(t=r.hitTest(n),t.distance<=i.threshold?(u=r._getLabelContent(t,r._tooltip.content),r._showToolTip(u,new wjcCore.Rect(n.clientX,n.clientY,5,5))):r._hideToolTip())});this.hostElement.addEventListener('mousemove',function(n){var i=r._tooltip,f=i.content,t,u;f&&!r.isTouching&&(t=r.hitTest(n),t.distance<=i.threshold?(u=r._getLabelContent(t,r._tooltip.content),r._showToolTip(u,new wjcCore.Rect(n.clientX,n.clientY,5,5))):r._hideToolTip())});this.hostElement.addEventListener('mouseleave',function(){r._hideToolTip()});this.hostElement.addEventListener('click',function(n){if(r.selectionMode!=SelectionMode.None){var t=r._hitTestData(n),i=FlexChart._SELECTION_THRESHOLD;r.tooltip&&r.tooltip.threshold&&(i=r.tooltip.threshold);t.distance<=i&&t.series?r._select(t.series,t.pointIndex):r.selectionMode==SelectionMode.Series?(t=r.hitTest(n),t.chartElement==ChartElement.Legend&&t.series?r._select(t.series,null):r._select(null,null)):r._select(null,null)}r.legendToggle===!0&&(t=r.hitTest(n),t.chartElement==ChartElement.Legend&&t.series&&(t.series.visibility==SeriesVisibility.Legend?t.series.visibility=SeriesVisibility.Visible:t.series.visibility==SeriesVisibility.Visible&&(t.series.visibility=SeriesVisibility.Legend),r.focus()))});this.initialize(i)}return __extends(t,n),t.prototype._initAxes=function(){this._axisX=new Axis(Position.Bottom);this._axisY=new Axis(Position.Left);this._axisX.majorGrid=!1;this._axisX.name='axisX';this._axisY.majorGrid=!0;this._axisY.majorTickMarks=TickMark.None;this._axisY.name='axisY';this._axisX._chart=this;this._axisY._chart=this;this._axes.push(this._axisX);this._axes.push(this._axisY)},Object.defineProperty(t.prototype,"series",{get:function(){return this._series},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"axes",{get:function(){return this._axes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"axisX",{get:function(){return this._axisX},set:function(n){if(n!=this._axisX){var t=this._axisX=wjcCore.asType(n,Axis);this.beginUpdate();t&&(t.majorGrid===undefined&&(t.majorGrid=!1),t.name===undefined&&(t.name='axisX'),t.position===undefined&&(t.position=Position.Bottom),t._axisType=AxisType.X,t._chart=this);this.endUpdate()}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"axisY",{get:function(){return this._axisY},set:function(n){if(n!=this._axisY){var t=this._axisY=wjcCore.asType(n,Axis);this.beginUpdate();t&&(t.majorGrid===undefined&&(t.majorGrid=!0),t.name===undefined&&(t.name='axisY'),t.majorTickMarks=TickMark.None,t.position===undefined&&(t.position=Position.Left),t._axisType=AxisType.Y,t._chart=this);this.endUpdate()}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"plotAreas",{get:function(){return this._pareas},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"binding",{get:function(){return this._binding},set:function(n){n!=this._binding&&(this._binding=wjcCore.asString(n,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bindingX",{get:function(){return this._bindingX},set:function(n){n!=this._bindingX&&(this._bindingX=wjcCore.asString(n,!0),this._bindChart())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"symbolSize",{get:function(){return this._symbolSize},set:function(n){n!=this._symbolSize&&(this._symbolSize=wjcCore.asNumber(n,!1,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"interpolateNulls",{get:function(){return this._interpolateNulls},set:function(n){n!=this._interpolateNulls&&(this._interpolateNulls=wjcCore.asBoolean(n),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"legendToggle",{get:function(){return this._legendToggle},set:function(n){n!=this._legendToggle&&(this._legendToggle=wjcCore.asBoolean(n))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tooltip",{get:function(){return this._tooltip},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataLabel",{get:function(){return this._lbl},set:function(n){n!=this._lbl&&(this._lbl=wjcCore.asType(n,DataLabel),this._lbl&&(this._lbl._chart=this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selection",{get:function(){return this._selection},set:function(n){n!=this._selection&&(this._selection=wjcCore.asType(n,SeriesBase,!0),this.invalidate())},enumerable:!0,configurable:!0}),t.prototype.onSeriesVisibilityChanged=function(n){this.seriesVisibilityChanged.raise(this,n)},t.prototype.hitTest=function(n,t){var r=this._toControl(n,t),i=new HitTestInfo(this,r),o=null,h,e,s;if(FlexChart._contains(this._rectHeader,r))i._chartElement=ChartElement.Header;else if(FlexChart._contains(this._rectFooter,r))i._chartElement=ChartElement.Footer;else if(FlexChart._contains(this._rectLegend,r))i._chartElement=ChartElement.Legend,o=this.legend._hitTest(r),o!==null&&o>=0&&o<this.series.length&&i._setData(this.series[o]);else if(FlexChart._contains(this._rectChart,r))if(h=this._hitTestLabels(r),h)i._chartElement=ChartElement.DataLabel,i._dist=0,i._setDataPoint(h.tag);else{var f=this._hitTester.hitTest(r),u=null,c=null;for(e=this.series.length-1;e>=0;e--)if(this.series[e].hitTest!==Series.prototype.hitTest&&(s=this.series[e].hitTest(n),s&&((!u||s.distance<u.distance)&&(u=s,c=e),s.distance===0)))break;f&&f.area?u&&u.distance<f.distance?i=u:u&&u.distance==f.distance&&c>f.area.tag.seriesIndex?i=u:(i._setDataPoint(f.area.tag),i._dist=f.distance):u&&(i=u);FlexChart._contains(this.axisX._axrect,r)?i._chartElement=ChartElement.AxisX:FlexChart._contains(this.axisY._axrect,r)?i._chartElement=ChartElement.AxisY:FlexChart._contains(this._plotRect,r)?i._chartElement=ChartElement.PlotArea:FlexChart._contains(this._rectChart,r)&&(i._chartElement=ChartElement.ChartArea)}else i._chartElement=ChartElement.None;return i},t.prototype.pointToData=function(n,t){return wjcCore.isNumber(n)&&wjcCore.isNumber(t)&&(n=new wjcCore.Point(n,t)),n instanceof MouseEvent?(n=new wjcCore.Point(n.pageX,n.pageY),n=this._toControl(n)):n=n.clone(),n.x=this.axisX.convertBack(n.x),n.y=this.axisY.convertBack(n.y),n},t.prototype.dataToPoint=function(n,t){wjcCore.isNumber(n)&&wjcCore.isNumber(t)&&(n=new wjcCore.Point(n,t));wjcCore.asType(n,wjcCore.Point);var i=n.clone();return i.x=this.axisX.convert(i.x),i.y=this.axisY.convert(i.y),i},t.prototype._copy=function(n,t){var r,i,u;if(n=='series'){for(this.series.clear(),r=wjcCore.asArray(t),i=0;i<r.length;i++)u=this._createSeries(),wjcCore.copy(u,r[i]),this.series.push(u);return!0}return!1},t.prototype._createSeries=function(){return new Series},t.prototype._clearCachedValues=function(){for(var t,n=0;n<this._series.length;n++)t=this._series[n],t.itemsSource==null&&t._clearValues()},t.prototype._performBind=function(){var t,r,i,u,n;if(this._xDataType=null,this._xlabels.splice(0),this._xvals.splice(0),this._cv&&(t=this._cv.items,t)){for(r=t.length,i=0;i<r;i++)u=t[i],this._bindingX&&(n=u[this._bindingX],wjcCore.isNumber(n)?(this._xvals.push(wjcCore.asNumber(n)),this._xDataType=wjcCore.DataType.Number):wjcCore.isDate(n)&&(this._xvals.push(wjcCore.asDate(n).valueOf()),this._xDataType=wjcCore.DataType.Date),this._xlabels.push(u[this._bindingX]));this._xvals.length==r?this._xlabels.splice(0):this._xvals.splice(0)}},t.prototype._hitTestSeries=function(n,t){var u=this._toControl(n),i=new HitTestInfo(this,u),f=t,r=this._hitTester.hitTestSeries(u,t);return r&&r.area&&(i._setDataPoint(r.area.tag),i._chartElement=ChartElement.PlotArea,i._dist=r.distance),i},t.prototype._hitTestData=function(n){var r=this._toControl(n),i=new HitTestInfo(this,r),t=this._hitTester.hitTest(r,!0);return t&&t.area&&(i._setDataPoint(t.area.tag),i._dist=t.distance),i},t.prototype._hitTestLabels=function(n){for(var i=null,r=this._lblAreas.length,t=0;t<r;t++)if(this._lblAreas[t].contains(n)){i=this._lblAreas[t];break}return i},t._dist2=function(n,t){var i=n.x-t.x,r=n.y-t.y;return i*i+r*r},t._dist=function(n,t,i){return Math.sqrt(FlexChart._distToSegmentSquared(n,t,i))},t._distToSegmentSquared=function(n,t,i){var u=FlexChart._dist2(t,i),r;return u==0?FlexChart._dist2(n,t):(r=((n.x-t.x)*(i.x-t.x)+(n.y-t.y)*(i.y-t.y))/u,r<0)?FlexChart._dist2(n,t):r>1?FlexChart._dist2(n,i):FlexChart._dist2(n,new wjcCore.Point(t.x+r*(i.x-t.x),t.y+r*(i.y-t.y)))},t.prototype._isRotated=function(){return this._getChartType()==ChartType.Bar?!this._rotated:this._rotated},t.prototype._getChartType=function(){return null},t.prototype._render=function(n,t){var ct,ot,e,c,i,k,d,h,g,nt,tt,lt,at,v,st,y,it,rt,ut,p,o,s,r,ft,b,l,a;t===void 0&&(t=!0);var yt=this.hostElement,ht=this._getHostSize(),u=ht.width,f=ht.height;if((u==0||isNaN(u))&&(u=FlexChart._WIDTH),(f==0||isNaN(f))&&(f=FlexChart._HEIGHT),ct=new wjcCore.Size(u,f),n.beginRender(),u>0&&f>0){n.setViewportSize(u,f);this._hitTester.clear();ot=this.legend;i=new wjcCore.Rect(0,0,u,f);this._rectChart=i.clone();n.startGroup(FlexChart._CSS_HEADER);i=this._drawTitle(n,i,this.header,this.headerStyle,!1);n.endGroup();n.startGroup(FlexChart._CSS_FOOTER);i=this._drawTitle(n,i,this.footer,this.footerStyle,!0);n.endGroup();u=i.width;f=i.height;k=ot._getPosition(u,f);e=ot._getDesiredSize(n,k,u,f);switch(k){case Position.Right:u-=e.width;c=new wjcCore.Point(u,i.top+.5*(f-e.height));break;case Position.Left:i.left+=e.width;u-=e.width;c=new wjcCore.Point(0,i.top+.5*(f-e.height));break;case Position.Top:f-=e.height;c=new wjcCore.Point(.5*(u-e.width),i.top);i.top+=e.height;break;case Position.Bottom:f-=e.height;c=new wjcCore.Point(.5*(u-e.width),i.top+f)}if(i.width=u,i.height=f,r=this._getPlotter(null),r.stacking=this._stacking,this._curPlotter!=r&&(this._curPlotter&&this._curPlotter.unload(),this._curPlotter=r),r.load(),d=this._isRotated(),this._dataInfo.analyse(this._series,d,r.stacking,this._xvals.length>0?this._xvals:null,this.axisX.logBase>0,this.axisY.logBase>0),h=r.adjustLimits(this._dataInfo,i.clone()),d?(g=this._dataInfo.getDataTypeX(),g||(g=this._xDataType),this.axisX._updateActualLimits(this._dataInfo.getDataTypeY(),h.left,h.right),this.axisY._updateActualLimits(g,h.top,h.bottom,this._xlabels,this._xvals)):(nt=this._dataInfo.getDataTypeX(),nt||(nt=this._xDataType),this.axisX._updateActualLimits(nt,h.left,h.right,this._xlabels,this._xvals),this.axisY._updateActualLimits(this._dataInfo.getDataTypeY(),h.top,h.bottom)),tt=this._getAxes(),this._updateAuxAxes(tt,d),this._layout(i,ct,n),n.startGroup(FlexChart._CSS_PLOT_AREA),n.fill='transparent',n.stroke=null,lt=this.plotAreas.length,lt>0)for(o=0;o<this.plotAreas.length;o++)at=this.plotAreas[o],at._render(n);else v=this._plotRect,n.drawRect(v.left,v.top,v.width,v.height);for(n.endGroup(),st=this._series.length,this._clearPlotters(),y={},o=0;o<st;o++)it=this._series[o],it.getValues(0)&&(rt=it._getAxisY(),r=this._getPlotter(it),!rt||rt==this.axisY||r instanceof _BarPlotter?r.seriesCount++:(ut=rt._uniqueId,y[ut]?y[ut].count+=1:y[ut]={count:1,index:0}));this.onRendering(new RenderEventArgs(n));if(this._getChartType()!==ChartType.Funnel)for(o=0;o<tt.length;o++)p=tt[o],ft=p.axisType==AxisType.X?n.startGroup(FlexChart._CSS_AXIS_X):n.startGroup(FlexChart._CSS_AXIS_Y),p._hostElement=t?ft:p._hostElement,p._render(n),n.endGroup();for(n.startGroup('wj-series-group'),this._plotrectId='plotRect'+(1e6*Math.random()).toFixed(),n.addClipRect(this._plotRect,this._plotrectId),o=0;o<st;o++){s=this._series[o];s._pointIndexes=[];r=this._getPlotter(s);s._plotter=r;ft=n.startGroup(s.cssClass,r.clipping?this._plotrectId:null);s._hostElement=t?ft:s._hostElement;var vt=s.visibility,et=s.axisX,w=s.axisY;if(et||(et=this.axisX),w||(w=this.axisY),vt==SeriesVisibility.Visible||vt==SeriesVisibility.Plot){b=y[w._uniqueId];b?(l=b.index,a=b.count,b.index++,s.onRendering(n,l,a)||r.plotSeries(n,et,w,s,this,l,a)):(l=r.seriesIndex,a=r.seriesCount,r.seriesIndex++,s.onRendering(n,l,a)||r.plotSeries(n,et,w,s,this,l,a));s.onRendered(n)}n.endGroup()}n.endGroup();this._lblAreas=[];this.dataLabel.content&&this.dataLabel.position!=LabelPosition.None&&this._renderLabels(n);e?(this._legendHost=n.startGroup(FlexChart._CSS_LEGEND),this._rectLegend=new wjcCore.Rect(c.x,c.y,e.width,e.height),n.textFill=FlexChart._FG,this.legend._render(n,c,k,e.width,e.height),n.textFill=null,n.endGroup()):(this._legendHost=null,this._rectLegend=null);this._highlightCurrent();this.onRendered(new RenderEventArgs(n))}n.endRender()},t.prototype._renderLabels=function(n){var r=this.series,e=r.length,u,t,f,i;for(n.stroke='null',n.fill='transparent',n.strokeWidth=1,u='wj-data-labels',n.startGroup(u),t=0;t<e;t++)f=r[t],i=this._hitTester._map[t],i&&f._renderLabels(n,i,this,this._lblAreas);n.endGroup()},t.prototype._getAxes=function(){for(var u,t,i,n=[this.axisX,this.axisY],f=this.series.length,r=0;r<f;r++)u=this.series[r],t=u.axisX,t&&n.indexOf(t)===-1&&n.push(t),i=u.axisY,i&&n.indexOf(i)===-1&&n.push(i);return n},t.prototype._clearPlotters=function(){for(var t=this._plotters.length,n=0;n<t;n++)this._plotters[n].clear()},t.prototype._initPlotter=function(n){n.chart=this;n.dataInfo=this._dataInfo;n.hitTester=this._hitTester;this._plotters.push(n)},Object.defineProperty(t.prototype,"_barPlotter",{get:function(){return this.__barPlotter===null&&(this.__barPlotter=new _BarPlotter,this._initPlotter(this.__barPlotter)),this.__barPlotter},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_linePlotter",{get:function(){return this.__linePlotter===null&&(this.__linePlotter=new _LinePlotter,this._initPlotter(this.__linePlotter)),this.__linePlotter},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_areaPlotter",{get:function(){return this.__areaPlotter===null&&(this.__areaPlotter=new _AreaPlotter,this._initPlotter(this.__areaPlotter)),this.__areaPlotter},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_bubblePlotter",{get:function(){return this.__bubblePlotter===null&&(this.__bubblePlotter=new _BubblePlotter,this._initPlotter(this.__bubblePlotter)),this.__bubblePlotter},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_financePlotter",{get:function(){return this.__financePlotter===null&&(this.__financePlotter=new _FinancePlotter,this._initPlotter(this.__financePlotter)),this.__financePlotter},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_funnelPlotter",{get:function(){return this.__funnelPlotter===null&&(this.__funnelPlotter=new _FunnelPlotter,this._initPlotter(this.__funnelPlotter)),this.__funnelPlotter},enumerable:!0,configurable:!0}),t.prototype._getPlotter=function(n){var u=this._getChartType(),f=!1,r,t,i;n&&(r=n._getChartType(),r!==null&&r!==undefined&&r!=u&&(u=r,f=!0));switch(u){case ChartType.Column:this._barPlotter.isVolume=!1;this._barPlotter.width=.7;t=this._barPlotter;break;case ChartType.Bar:this._barPlotter.rotated=!this._rotated;this._barPlotter.isVolume=!1;this._barPlotter.width=.7;t=this._barPlotter;break;case ChartType.Line:this._linePlotter.hasSymbols=!1;this._linePlotter.hasLines=!0;this._linePlotter.isSpline=!1;t=this._linePlotter;break;case ChartType.Scatter:this._linePlotter.hasSymbols=!0;this._linePlotter.hasLines=!1;this._linePlotter.isSpline=!1;t=this._linePlotter;break;case ChartType.LineSymbols:this._linePlotter.hasSymbols=!0;this._linePlotter.hasLines=!0;this._linePlotter.isSpline=!1;t=this._linePlotter;break;case ChartType.Area:this._areaPlotter.isSpline=!1;t=this._areaPlotter;break;case ChartType.Bubble:t=this._bubblePlotter;break;case ChartType.Candlestick:i=this._financePlotter;i.isCandle=!0;i.isEqui=!1;i.isArms=!1;i.isVolume=!1;t=i;break;case ChartType.HighLowOpenClose:i=this._financePlotter;i.isCandle=!1;i.isEqui=!1;i.isArms=!1;i.isVolume=!1;t=i;break;case ChartType.Spline:this._linePlotter.hasSymbols=!1;this._linePlotter.hasLines=!0;this._linePlotter.isSpline=!0;t=this._linePlotter;break;case ChartType.SplineSymbols:this._linePlotter.hasSymbols=!0;this._linePlotter.hasLines=!0;this._linePlotter.isSpline=!0;t=this._linePlotter;break;case ChartType.SplineArea:this._areaPlotter.isSpline=!0;t=this._areaPlotter;break;case ChartType.Funnel:t=this._funnelPlotter;break;default:throw'Invalid chart type.';}return t.rotated=this._rotated,u==ChartType.Bar&&(t.rotated=!t.rotated),f&&(t.rotated=this._isRotated()),t},t.prototype._layout=function(n,t,i){this.plotAreas.length>0?this._layoutMultiple(n,t,i):this._layoutSingle(n,t,i)},t.prototype._layoutSingle=function(n,t,i){for(var u,nt,y,r,s,p,d,tt,g,f=n.width,e=n.height,rt=new wjcCore.Size(f,.75*e),ut=new wjcCore.Size(e,.75*f),h=0,c=0,w=f,b=e,v=0,o=0,l=f,a=e,it=this._getAxes(),k=0;k<it.length;k++)r=it[k],s=r.origin,r.axisType==AxisType.X?(u=r._getHeight(i,f),u>rt.height&&(u=rt.height),r._desiredSize=new wjcCore.Size(rt.width,u),nt=r._hasOrigin=wjcCore.isNumber(s)&&s>this.axisY._getMinNum()&&s<this.axisY._getMaxNum(),r.position==Position.Bottom?(h=Math.max(h,r._annoSize.width*.5),w=Math.min(w,f-r._annoSize.width*.5),nt?(d=this._convertY(s,o,a),a=a-Math.max(0,d+u-a)):a=a-u):r.position==Position.Top&&(h=Math.max(h,r._annoSize.width*.5),w=Math.min(w,f-r._annoSize.width*.5),nt?(d=this._convertY(s,o,a),o=o+Math.max(0,o-(d-u))):o=o+u)):r.axisType==AxisType.Y&&(u=r._getHeight(i,e),u>ut.height&&(u=ut.height),r._desiredSize=new wjcCore.Size(ut.width,u),nt=r._hasOrigin=wjcCore.isNumber(s)&&s>this.axisX._getMinNum()&&s<this.axisX._getMaxNum(),r.position==Position.Left?(c=Math.max(c,r._annoSize.width*.5),b=Math.min(b,e-r._annoSize.width*.5),nt?(g=this._convertX(s,v,l),v+=Math.max(0,v-(g-u))):v+=u):r.position==Position.Right&&(c=Math.max(c,r._annoSize.width*.5),b=Math.min(b,e-r._annoSize.width*.5),nt?(g=this._convertX(s,v,l),l=l-Math.max(0,g+u-l)):l=l-u));for(y=this._parseMargin(this.plotMargin),h=isNaN(y.left)?v=Math.max(h,v)+n.left:v=y.left,w=isNaN(y.right)?l=Math.min(w,l)+n.left:l=t.width-y.right,c=isNaN(y.top)?o=Math.max(c,o)+n.top:o=y.top,b=isNaN(y.bottom)?a=Math.min(b,a)+n.top:a=t.height-y.bottom,f=Math.max(1,w-h),e=Math.max(1,b-c),this._plotRect=new wjcCore.Rect(h,c,f,e),i.stroke=null,k=0;k<it.length;k++)r=it[k],s=r.origin,r.axisType==AxisType.X?(r._hasOrigin?(d=this._convertY(s,this._plotRect.top,this._plotRect.bottom),r.position==Position.Bottom?(p=new wjcCore.Rect(h,d,f,r._desiredSize.height),a+=Math.max(0,p.bottom-this._plotRect.bottom)):r.position==Position.Top&&(p=new wjcCore.Rect(h,d-r._desiredSize.height,f,r._desiredSize.height),o-=Math.max(0,this._plotRect.top-p.top))):r.position==Position.Bottom?(p=new wjcCore.Rect(h,a,f,r._desiredSize.height),a+=r._desiredSize.height):r.position==Position.Top?(p=new wjcCore.Rect(h,o-r._desiredSize.height,f,r._desiredSize.height),o-=r._desiredSize.height):p=new wjcCore.Rect(h,o,f,1),r._layout(p,this._plotRect)):r.axisType==AxisType.Y&&(r._hasOrigin?(g=this._convertX(s,this._plotRect.left,this._plotRect.right),r.position==Position.Left?(tt=new wjcCore.Rect(g-r._desiredSize.height,c,e,r._desiredSize.height),v-=r._desiredSize.height):r.position==Position.Right&&(tt=new wjcCore.Rect(g,c,e,r._desiredSize.height),l+=r._desiredSize.height)):r.position==Position.Left?(tt=new wjcCore.Rect(v-r._desiredSize.height,c,e,r._desiredSize.height),v-=r._desiredSize.height):r.position==Position.Right?(tt=new wjcCore.Rect(l,c,e,r._desiredSize.height),l+=r._desiredSize.height):tt=new wjcCore.Rect(v,c,e,1),r._layout(tt,this._plotRect))},t.prototype._layoutMultiple=function(n,t,i){for(var at,vt,st,ht,d,e,g,wt,tt,dt,o,u,it,r,w,bt,nt,s=n.width,h=n.height,y=[],p=[],kt=this._getAxes(),gt=kt.length,f=0;f<gt;f++)if(r=kt[f],r._plotrect=null,r.axisType==AxisType.X){for(at=r.plotArea?r.plotArea.column:0;y.length<=at;)y.push(new _AreaDef);y[at].axes.push(r)}else if(r.axisType==AxisType.Y){for(vt=r.plotArea?r.plotArea.row:0;p.length<=vt;)p.push(new _AreaDef);p[vt].axes.push(r)}var rt=y.length,ut=p.length,yt=new wjcCore.Size(s,.3*h),pt=new wjcCore.Size(h,.3*s),b=0,k=0,et=s,ot=h;for(e=0;e<rt;e++)for(u=y[e],u.right=s,u.bottom=h,f=0;f<u.axes.length;f++)r=u.axes[f],st=r._getHeight(i,r.axisType==AxisType.X?s:h),st>yt.height&&(st=yt.height),ht=new wjcCore.Size(yt.width,st),r._desiredSize=ht,e==0&&(u.left=Math.max(u.left,r._annoSize.width*.5)),e==rt-1&&(u.right=Math.min(u.right,s-r._annoSize.width*.5)),r.position==Position.Bottom?u.bottom-=ht.height:r.position==Position.Top&&(u.top+=ht.height);for(o=0;o<ut;o++)for(u=p[o],u.right=s,u.bottom=h,f=0;f<u.axes.length;f++)r=u.axes[f],d=new wjcCore.Size(pt.width,r._getHeight(i,r.axisType==AxisType.X?s:h)),d.height>pt.height&&(d.height=pt.height),r._desiredSize=d,o==0&&(u.top=Math.max(u.top,r._annoSize.width*.5)),o==ut-1&&(u.bottom=Math.min(u.bottom,h-r._annoSize.width*.5)),r.position==Position.Left?u.left+=d.height:r.position==Position.Right&&(u.right-=d.height);var c=0,l=0,a=s,v=h;for(e=0;e<rt;e++)u=y[e],c=Math.max(c,u.left),l=Math.max(l,u.top),a=Math.min(a,u.right),v=Math.min(v,u.bottom);for(o=0;o<ut;o++)u=p[o],c=Math.max(c,u.left),l=Math.max(l,u.top),a=Math.min(a,u.right),v=Math.min(v,u.bottom);c=b=Math.max(b,c);a=et=Math.min(et,a);l=k=Math.max(k,l);v=ot=Math.min(ot,v);this._plotRect=new wjcCore.Rect(b,k,et-b,ot-k);var ct=this._plotRect.clone(),ft=b,lt=this.plotAreas._calculateWidths(this._plotRect.width,rt);for(e=0;e<rt;e++){for(v=ot,l=k,u=y[e],g=lt[e],f=0;f<u.axes.length;f++)r=u.axes[f],w=new wjcCore.Rect(ft,ct.top,g,ct.height),r.position==Position.Bottom?(wt=new wjcCore.Rect(ft,v,g,r._desiredSize.height),v+=r._desiredSize.height):r.position==Position.Top&&(wt=new wjcCore.Rect(ft,l-r._desiredSize.height,g,r._desiredSize.height),l-=r._desiredSize.height),r._layout(wt,w);for(f=0;f<this.plotAreas.length;f++)nt=this.plotAreas[f],nt.column==e&&nt._setPlotX(ft,g);ft+=g}for(tt=k,dt=this.plotAreas._calculateHeights(this._plotRect.height,ut),o=0;o<ut;o++){for(c=b,a=et,u=p[o],it=dt[o],f=0;f<u.axes.length;f++)r=u.axes[f],w=new wjcCore.Rect(ct.left,tt,ct.width,it),r._plotrect?(w.left=r._plotrect.left,w.width=r._plotrect.width):lt&&lt.length>0&&(w.width=lt[0]),r.position==Position.Left?(bt=new wjcCore.Rect(c-r._desiredSize.height,tt,it,r._desiredSize.height),c-=r._desiredSize.height):r.position==Position.Right&&(bt=new wjcCore.Rect(a,tt,it,r._desiredSize.height),a+=r._desiredSize.height),r._layout(bt,w);for(f=0;f<this.plotAreas.length;f++)nt=this.plotAreas[f],nt.row==o&&nt._setPlotY(tt,it);tt+=it}},t.prototype._convertX=function(n,t,i){var r=this.axisX;return r.reversed?i-(i-t)*(n-r._getMinNum())/(r._getMaxNum()-r._getMinNum()):t+(i-t)*(n-r._getMinNum())/(r._getMaxNum()-r._getMinNum())},t.prototype._convertY=function(n,t,i){var r=this.axisY;return r.reversed?t+(i-t)*(n-r._getMinNum())/(r._getMaxNum()-r._getMinNum()):i-(i-t)*(n-r._getMinNum())/(r._getMaxNum()-r._getMinNum())},t.prototype._getLabelContent=function(n,t){return wjcCore.isString(t)?this._keywords.replace(t,n):wjcCore.isFunction(t)?t(n):null},t.prototype._select=function(n,t){var r=!1,i;(n!=this._selection||t!=this._selectionIndex)&&(r=!0);this._selection&&this._highlight(this._selection,!1,this._selectionIndex);this._selection=n;this._selectionIndex=t;this._selection&&this._highlight(this._selection,!0,this._selectionIndex);this.selectionMode==SelectionMode.Point&&(i=n?n.collectionView:this._cv,i&&(this._notifyCurrentChanged=!1,i.moveCurrentToPosition(n?t:-1),this._notifyCurrentChanged=!0));r&&this.onSelectionChanged()},t.prototype._highlightCurrent=function(){var t,i,n;this.selectionMode!=SelectionMode.None&&(t=this._selection,i=-1,t&&(n=t.collectionView,n||(n=this._cv),n&&(i=n.currentPosition),this._highlight(t,!0,i)))},t.prototype._highlight=function(n,t,i){var e,r,f,u;n=wjcCore.asType(n,SeriesBase,!0);this.selectionMode==SelectionMode.Series?(e=this.series.indexOf(n),r=n.hostElement,t?r.parentNode.appendChild(r):r.parentNode.insertBefore(r,r.parentNode.childNodes.item(e)),u=this._find(r,['rect','ellipse','polyline','polygon','line','path']),this._highlightItems(u,FlexChart._CSS_SELECTION,t),n.legendElement&&this._highlightItems(this._find(n.legendElement,['rect','ellipse','line']),FlexChart._CSS_SELECTION,t)):this.selectionMode==SelectionMode.Point&&(e=this.series.indexOf(n),r=n.hostElement,t?(r.parentNode.appendChild(r),f=n.getPlotElement(i),f&&(f.nodeName!='g'&&this._highlightItems([f],FlexChart._CSS_SELECTION,t),u=this._find(f,['line','rect','ellipse','path','polygon']),this._highlightItems(u,FlexChart._CSS_SELECTION,t))):(r.parentNode.insertBefore(r,r.parentNode.childNodes.item(e)),u=this._find(r,['rect','ellipse','line','path','polygon']),this._highlightItems(u,FlexChart._CSS_SELECTION,t)))},t.prototype._updateAuxAxes=function(n,t){for(var e,o,h,u,f,r,i,c,s=2;s<n.length;s++){for(e=n[s],e._chart=this,o=[],r=0;r<this.series.length;r++)h=this.series[r],(h.axisX==e||h.axisY==e)&&o.push(h);for(r=0;r<o.length;r++)i=o[r].getDataRect()||o[r]._getDataRect(),i&&(e.axisType==AxisType.X&&!t||e.axisType==AxisType.Y&&t?((u===undefined||i.left<u)&&(u=i.left),(f===undefined||i.right>f)&&(f=i.right)):((u===undefined||i.top<u)&&(u=i.top),(f===undefined||i.bottom>f)&&(f=i.bottom)));c=o[0].getDataType(0);c==null&&(c=wjcCore.DataType.Number);n[s]._updateActualLimits(c,u,f)}},t._contains=function(n,t){return n&&t?t.x>=n.left&&t.x<=n.right&&t.y>=n.top&&t.y<=n.bottom:!1},t._intersects=function(n,t){return n.left>t.right||n.right<t.left||n.top>t.bottom||n.bottom<t.top?!1:!0},t._toOADate=function(n){return n.valueOf()},t._fromOADate=function(n){return new Date(n)},t._renderText=function(n,t,i,r,u,f,e,o,s){var h=n.measureString(t,f,e,o),c=i.x,l=i.y,a;switch(r){case 1:c-=.5*h.width;break;case 2:c-=h.width}switch(u){case 1:l+=.5*h.height;break;case 0:l+=h.height}return a=new wjcCore.Rect(c,l-h.height,h.width,h.height),s?s(a)?(n.drawString(t,new wjcCore.Point(c,l),f,o),a):null:(n.drawString(t,new wjcCore.Point(c,l),f,o),a)},t._renderRotatedText=function(n,t,i,r,u,f,e,o,s,h){var c=n.measureString(t,o,s,h),l=i.x,a=i.y;switch(r){case 1:l-=.5*c.width;break;case 2:l-=c.width}switch(u){case 1:a+=.5*c.height;break;case 0:a+=c.height}n.drawStringRotated(t,new wjcCore.Point(l,a),f,e,o,h)},t._CSS_AXIS_X='wj-axis-x',t._CSS_AXIS_Y='wj-axis-y',t._CSS_LINE='wj-line',t._CSS_GRIDLINE='wj-gridline',t._CSS_TICK='wj-tick',t._CSS_GRIDLINE_MINOR='wj-gridline-minor',t._CSS_TICK_MINOR='wj-tick-minor',t._CSS_LABEL='wj-label',t._CSS_LEGEND='wj-legend',t._CSS_HEADER='wj-header',t._CSS_FOOTER='wj-footer',t._CSS_TITLE='wj-title',t._CSS_SELECTION='wj-state-selected',t._CSS_PLOT_AREA='wj-plot-area',t._FG='#666',t._epoch=new Date(1899,11,30).getTime(),t._msPerDay=864e5,t}(FlexChartBase);exports.FlexChartCore=FlexChartCore;_AreaDef=function(){function n(){this._axes=[];this.left=0;this.right=0;this.top=0;this.bottom=0}return Object.defineProperty(n.prototype,"axes",{get:function(){return this._axes},enumerable:!0,configurable:!0}),n}();_DataInfo=function(){function n(){this.stackAbs={};this._xvals=null}return n.prototype.analyse=function(t,i,r,u,f,e){var ht=this,et,v,o,it,l,p,w,nt,h,a,c,d,y,tt,rt,ut;this.minY=NaN;this.maxY=NaN;this.minX=NaN;this.maxX=NaN;this.minXp=NaN;this.minYp=NaN;this.dx=0;var b={},k={},g={};if(this.dataTypeX=null,this.dataTypeY=null,this._xvals=u,u!=null)for(et=u.length,v=0;v<et;v++)c=u[v],(isNaN(this.minX)||this.minX>c)&&(this.minX=c),(isNaN(this.maxX)||this.maxX<c)&&(this.maxX=c),c>0&&(isNaN(this.minXp)||this.minXp>c)&&(this.minXp=c),v>0&&(p=Math.abs(c-u[v-1]),!isNaN(p)&&(p<this.dx||this.dx==0)&&(this.dx=p));for(v=0;v<t.length;v++){var s=t[v],ft=s._getChartType(),ot=s.chartType!==undefined,st=s.visibility;if(st!=SeriesVisibility.Hidden&&st!=SeriesVisibility.Legend){if(o=s.getDataRect(),o&&(!isNaN(this.minX)&&this.minX<o.left&&(it=o.right,o.left=this.minX,o.width=it-this.minX),!isNaN(this.maxX)&&this.maxX>o.right&&(o.width=this.maxX-o.left),!isNaN(this.minY)&&this.minY<o.top&&(it=o.bottom,o.top=this.minY,o.height=it-this.minY),!isNaN(this.maxY)&&this.maxY>o.bottom&&(o.height=this.maxY-o.top)),l=null,i?s._isCustomAxisY()||(l=s.getValues(1)):s._isCustomAxisX()||(l=s.getValues(1)),l)for(this.dataTypeX||(this.dataTypeX=s.getDataType(1)),h=0;h<l.length;h++)a=l[h],n.isValid(a)&&((isNaN(this.minX)||this.minX>a)&&(this.minX=a),(isNaN(this.maxX)||this.maxX<a)&&(this.maxX=a),h>0&&(!ft||ft==ChartType.Column||ft==ChartType.Bar)&&(p=Math.abs(a-l[h-1]),!isNaN(p)&&p>0&&(p<this.dx||this.dx==0)&&(this.dx=p)));if(w=null,nt=!1,i?(nt=s._isCustomAxisX(),w=s.getValues(0)):(nt=s._isCustomAxisY(),w=s.getValues(0)),w&&(this.dataTypeY||nt||(this.dataTypeY=s.getDataType(0)),isNaN(this.minX)?this.minX=0:l||u||(this.minX=Math.min(this.minX,0)),isNaN(this.maxX)?this.maxX=w.length-1:l||u||(this.maxX=Math.max(this.maxX,w.length-1)),!nt))for(h=0;h<w.length;h++)a=w[h],c=l?wjcCore.asNumber(l[h],!0):u?wjcCore.asNumber(u[h],!0):h,wjcCore.isArray(a)?a.forEach(function(n){ht._parseYVal(n,c,ot,g,b,k)}):this._parseYVal(a,c,ot,g,b,k);d=s.getDataRect(new wjcCore.Rect(this.minX,this.minY,this.maxX-this.minX,this.maxY-this.minY),o);d&&(this.minX=d.left,this.maxX=d.right,this.minY=d.top,this.maxY=d.bottom)}}if(r==Stacking.Stacked){for(y in b)b[y]>this.maxY&&(this.maxY=b[y]);for(y in k)k[y]<this.minY&&(this.minY=k[y])}else if(r==Stacking.Stacked100pc){this.minY=0;this.maxY=1;for(y in g)tt=g[y],isFinite(tt)&&tt!=0&&(rt=b[y],ut=k[y],isFinite(rt)&&(rt=Math.min(rt/tt,this.maxY)),isFinite(ut)&&(ut=Math.max(ut/tt,this.minY)))}this.stackAbs=g;f&&(i?this.minY=isNaN(this.minYp)?1:this.minYp:this.minX=isNaN(this.minXp)?1:this.minXp);e&&(i?this.minX=isNaN(this.minXp)?1:this.minXp:this.minY=isNaN(this.minYp)?1:this.minYp)},n.prototype._parseYVal=function(t,i,r,u,f,e){n.isValid(t)&&((isNaN(this.minY)||this.minY>t)&&(this.minY=t),(isNaN(this.maxY)||this.maxY<t)&&(this.maxY=t),r||(t>0?(isNaN(f[i])?f[i]=t:f[i]+=t,(isNaN(this.minYp)||this.minYp>t)&&(this.minYp=t)):isNaN(e[i])?e[i]=t:e[i]+=t,isNaN(u[i])?u[i]=Math.abs(t):u[i]+=Math.abs(t)))},n.prototype.getMinY=function(){return this.minY},n.prototype.getMaxY=function(){return this.maxY},n.prototype.getMinX=function(){return this.minX},n.prototype.getMaxX=function(){return this.maxX},n.prototype.getMinXp=function(){return this.minXp},n.prototype.getMinYp=function(){return this.minYp},n.prototype.getDeltaX=function(){return this.dx},n.prototype.getDataTypeX=function(){return this.dataTypeX},n.prototype.getDataTypeY=function(){return this.dataTypeY},n.prototype.getStackedAbsSum=function(n){var t=this.stackAbs[n];return isFinite(t)?t:0},n.prototype.getXVals=function(){return this._xvals},n.isValid=function(n){return isFinite(n)},n}();exports._DataInfo=_DataInfo;ChartTooltip=function(n){function t(){n.call(this);this._content='<b>{seriesName}</b><br/>{x} {y}';this._threshold=15}return __extends(t,n),Object.defineProperty(t.prototype,"content",{get:function(){return this._content},set:function(n){n!=this._content&&(this._content=n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"threshold",{get:function(){return this._threshold},set:function(n){n!=this._threshold&&(this._threshold=wjcCore.asNumber(n))},enumerable:!0,configurable:!0}),t}(wjcCore.Tooltip);exports.ChartTooltip=ChartTooltip,function(n){n[n.Column=0]="Column";n[n.Bar=1]="Bar";n[n.Scatter=2]="Scatter";n[n.Line=3]="Line";n[n.LineSymbols=4]="LineSymbols";n[n.Area=5]="Area";n[n.Bubble=6]="Bubble";n[n.Candlestick=7]="Candlestick";n[n.HighLowOpenClose=8]="HighLowOpenClose";n[n.Spline=9]="Spline";n[n.SplineSymbols=10]="SplineSymbols";n[n.SplineArea=11]="SplineArea";n[n.Funnel=12]="Funnel"}(exports.ChartType||(exports.ChartType={}));ChartType=exports.ChartType;FlexChart=function(n){function t(t,i){n.call(this,t,null);this._chartType=ChartType.Column;this.initialize(i)}return __extends(t,n),t.prototype._getChartType=function(){return this._chartType},Object.defineProperty(t.prototype,"chartType",{get:function(){return this._chartType},set:function(n){n!=this._chartType&&(this._chartType=wjcCore.asEnum(n,ChartType),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotated",{get:function(){return this._rotated},set:function(n){n!=this._rotated&&(this._rotated=wjcCore.asBoolean(n),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stacking",{get:function(){return this._stacking},set:function(n){n!=this._stacking&&(this._stacking=wjcCore.asEnum(n,Stacking),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this._options},set:function(n){n!=this._options&&(this._options=n,this.invalidate())},enumerable:!0,configurable:!0}),t}(FlexChartCore);exports.FlexChart=FlexChart,function(n){n[n.None=0]="None";n[n.Left=1]="Left";n[n.Top=2]="Top";n[n.Right=3]="Right";n[n.Bottom=4]="Bottom";n[n.Auto=5]="Auto"}(exports.Position||(exports.Position={}));Position=exports.Position,function(n){n[n.X=0]="X";n[n.Y=1]="Y"}(exports.AxisType||(exports.AxisType={}));AxisType=exports.AxisType,function(n){n[n.Auto=0]="Auto";n[n.Show=1]="Show"}(exports.OverlappingLabels||(exports.OverlappingLabels={}));OverlappingLabels=exports.OverlappingLabels,function(n){n[n.None=0]="None";n[n.Outside=1]="Outside";n[n.Inside=2]="Inside";n[n.Cross=3]="Cross"}(exports.TickMark||(exports.TickMark={}));TickMark=exports.TickMark;Axis=function(){function n(t){this._GRIDLINE_WIDTH=.25;this._LINE_WIDTH=1;this._TICK_WIDTH=1;this._TICK_HEIGHT=4;this._TICK_OVERLAP=1;this._TICK_LABEL_DISTANCE=4;this._minorGrid=!1;this._labels=!0;this._axisLine=!0;this._isTimeAxis=!1;this._labelPadding=2;this.rangeChanged=new wjcCore.Event;this._customConvert=null;this._customConvertBack=null;this.__uniqueId=n._id++;this._position=t;t==Position.Bottom||t==Position.Top?this._axisType=AxisType.X:(this._axisType=AxisType.Y,this._axisLine=!1);this._minorTickMarks=TickMark.None;this._overlap=OverlappingLabels.Auto}return Object.defineProperty(n.prototype,"hostElement",{get:function(){return this._hostElement},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"actualMin",{get:function(){return this._isTimeAxis?new Date(this._actualMin):this._actualMin},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"actualMax",{get:function(){return this._isTimeAxis?new Date(this._actualMax):this._actualMax},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"min",{get:function(){return this._min},set:function(n){n!=this._min&&(this._min=wjcCore.isDate(n)?wjcCore.asDate(n,!0):wjcCore.asNumber(n,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"max",{get:function(){return this._max},set:function(n){n!=this._max&&(this._max=wjcCore.isDate(n)?wjcCore.asDate(n,!0):wjcCore.asNumber(n,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"reversed",{get:function(){return this._reversed},set:function(n){this._reversed!=n&&(this._reversed=wjcCore.asBoolean(n),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"position",{get:function(){return this._position},set:function(n){n!=this._position&&(this._position=wjcCore.asEnum(n,Position,!1),this._axisType=this._position==Position.Bottom||this._position==Position.Top?AxisType.X:AxisType.Y,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"majorUnit",{get:function(){return this._majorUnit},set:function(n){n!=this._majorUnit&&(this._majorUnit=wjcCore.asNumber(n,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"minorUnit",{get:function(){return this._minorUnit},set:function(n){n!=this._minorUnit&&(this._minorUnit=wjcCore.asNumber(n,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"name",{get:function(){return this._name},set:function(n){n!=this._name&&(this._name=wjcCore.asString(n,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"title",{get:function(){return this._title},set:function(n){n!=this._title&&(this._title=wjcCore.asString(n,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"format",{get:function(){return this._format},set:function(n){n!=this._format&&(this._format=wjcCore.asString(n,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"majorGrid",{get:function(){return this._majorGrid},set:function(n){n!=this._majorGrid&&(this._majorGrid=wjcCore.asBoolean(n,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"majorTickMarks",{get:function(){return this._majorTickMarks},set:function(n){n!=this._majorTickMarks&&(this._majorTickMarks=wjcCore.asEnum(n,TickMark,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"minorGrid",{get:function(){return this._minorGrid},set:function(n){n!=this._minorGrid&&(this._minorGrid=wjcCore.asBoolean(n,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"minorTickMarks",{get:function(){return this._minorTickMarks},set:function(n){n!=this._minorTickMarks&&(this._minorTickMarks=wjcCore.asEnum(n,TickMark,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"axisLine",{get:function(){return this._axisLine},set:function(n){n!=this._axisLine&&(this._axisLine=wjcCore.asBoolean(n,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"labels",{get:function(){return this._labels},set:function(n){n!=this._labels&&(this._labels=wjcCore.asBoolean(n,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"labelAlign",{get:function(){return this._labelAlign},set:function(n){n!=this._labelAlign&&(this._labelAlign=wjcCore.asString(n,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"labelAngle",{get:function(){return this._labelAngle},set:function(n){n!=this._labelAngle&&(this._labelAngle=wjcCore.asNumber(n,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"origin",{get:function(){return this._origin},set:function(n){n!=this._origin&&(this._origin=wjcCore.asNumber(n,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"overlappingLabels",{get:function(){return this._overlap},set:function(n){n!=this._overlap&&(this._overlap=wjcCore.asEnum(n,OverlappingLabels,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"itemsSource",{get:function(){return this._items},set:function(n){this._items!=n&&(this._cv&&(this._cv.collectionChanged.removeHandler(this._cvCollectionChanged,this),this._cv=null),this._items=n,this._cv=wjcCore.asCollectionView(n),this._cv!=null&&this._cv.collectionChanged.addHandler(this._cvCollectionChanged,this))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"binding",{get:function(){return this._binding},set:function(n){n!=this._binding&&(this._binding=wjcCore.asString(n,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"itemFormatter",{get:function(){return this._ifmt},set:function(n){this._ifmt!=n&&(this._ifmt=wjcCore.asFunction(n,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"logBase",{get:function(){return this._logBase},set:function(n){n!=this._logBase&&(this._logBase=wjcCore.asNumber(n,!0,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"plotArea",{get:function(){return this._parea},set:function(n){n!=this._parea&&(this._parea=wjcCore.asType(n,PlotArea,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"labelPadding",{get:function(){return this._labelPadding},set:function(n){n!=this._labelPadding&&(this._labelPadding=wjcCore.asNumber(n,!0,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"_groupClass",{get:function(){return this.axisType===AxisType.X?FlexChartCore._CSS_AXIS_X:FlexChartCore._CSS_AXIS_Y},enumerable:!0,configurable:!0}),n.prototype.onRangeChanged=function(n){this.rangeChanged.raise(this,n)},n.prototype._isOverlapped=function(n,t,i){var u=this._lbls,r,f,e,o;if(u!=null&&u.length>1){var s=u.length,h=this._values&&this._values.length==s?this._values:null,c=0,l=0;for(r=0;r<s;r++)if(f=h?h[r]:r,f>=this._actualMin&&f<=this._actualMax){if(e=t*(f-this._actualMin)/(this._actualMax-this._actualMin),o=n.measureString(u[r],i,this._groupClass),r>0&&Math.abs(e-c)<Math.max(o.width,l)+12)return!0;c=e;l=o.width}}return!1},n.prototype._getHeight=function(n,t){var y,p,f,w,e,i,u,d,o,r;this._actualAngle=undefined;var s=FlexChart._CSS_LABEL,g=FlexChart._CSS_TITLE,b=this._actualMax-this._actualMin,v=this._nicePrecision(b);(v<0||v>15)&&(v=0);var h=.1*b,c=this._lbls,l=this.labelAngle;if(this.labels&&this._chart._getChartType()!==ChartType.Funnel){if(h=this._updateAutoFormat(h),c!=null&&c.length>0){for(y=c.length,p=this._values&&this._values.length==y?this._values:null,this._annoSize=new wjcCore.Size,f=0;f<y;f++)w=p?p[f]:f,w>=this._actualMin&&w<=this._actualMax&&(i=n.measureString(c[f],s,this._groupClass),this.axisType==AxisType.X?i.width>this._annoSize.width&&(this._annoSize.width=i.width):i.width>this._annoSize.width&&(this._annoSize.width=i.width),i.height>this._annoSize.height&&(this._annoSize.height=i.height));l===undefined&&this.axisType==AxisType.X&&(this._isOverlapped(n,t,s)?l=this._actualAngle=-45:this._actualAngle=0)}else e=this._formatValue(this._actualMin-h),i=n.measureString(e,s,this._groupClass),this._annoSize=i,e=this._formatValue(this._actualMax+h),i=n.measureString(e,s,this._groupClass),i.width>this._annoSize.width&&(this._annoSize.width=i.width),i.height>this._annoSize.height&&(this._annoSize.height=i.height);if(l){var a=l*Math.PI/180,k=this._annoSize.width,u=this._annoSize.height;this._annoSize.width=k*Math.abs(Math.cos(a))+u*Math.abs(Math.sin(a));this._annoSize.height=k*Math.abs(Math.sin(a))+u*Math.abs(Math.cos(a))}}else this._annoSize=new wjcCore.Size;return u=2*this._labelPadding,u+=this._axisType==AxisType.X?this._annoSize.height:this._annoSize.width+this._TICK_LABEL_DISTANCE+2,d=this._TICK_HEIGHT,o=this._TICK_OVERLAP,r==TickMark.Outside?o=1:r==TickMark.Inside?o=-1:r==TickMark.Cross&&(o=0),r=this.majorTickMarks,(r===undefined||r===null)&&(r=TickMark.Outside),r!=TickMark.None&&(u+=.5*(1+o)*d),this._title&&(e=this._title,this._szTitle=n.measureString(e,g,this._groupClass),u+=this._szTitle.height),n.fontSize=null,u},n.prototype._updateAutoFormat=function(n){if(this._isTimeAxis){var t=this.format,r=.001*(this._actualMax-this._actualMin)/10,u=new _timeSpan(r*_timeSpan.TicksPerSecond),i=isNaN(this._majorUnit)?_timeHelper.NiceTimeSpan(u,t):_timeSpan.fromDays(this._majorUnit);t||(this._tfmt=_timeHelper.GetTimeDefaultFormat(1e3*i.TotalSeconds,0));n=i.TotalSeconds}return n},n.prototype._updateActualLimitsByChartType=function(n,t,i){if(n&&n.length>0&&!this._isTimeAxis){var r=this._chart._getChartType();r!=ChartType.Column&&r!=ChartType.Bar&&(t-=.5,i+=.5)}return{min:t,max:i}},n.prototype._updateActualLimits=function(n,t,i,r,u){var c,l,a,f,e,o,v,w,b,s,h,y,p;if(r===void 0&&(r=null),u===void 0&&(u=null),c=this._actualMin,l=this._actualMax,this._isTimeAxis=n==wjcCore.DataType.Date,a=this._updateActualLimitsByChartType(r,t,i),t=a.min,i=a.max,f=this._min,e=this._max,wjcCore.isDate(f)&&(f=f.valueOf()),wjcCore.isDate(e)&&(e=e.valueOf()),this._actualMin=f!==null&&f!==undefined?f:t,this._actualMax=e!==null&&e!==undefined?e:i,this._actualMin==this._actualMax&&(this._actualMin-=.5,this._actualMax+=.5),this.logBase>0&&(o=this.logBase,v=Math.log(o),this._max||(w=Math.ceil(Math.log(this._actualMax)/v),this._actualMax=Math.pow(o,w)),this._min||(b=Math.floor(Math.log(this._actualMin)/v),this._actualMin=Math.pow(o,b)),(this._actualMin<=0||isNaN(this._actualMin))&&(this._actualMin=1),this._actualMax<this._actualMin&&(this._actualMax=this._actualMin+1)),(c==this._actualMin||isNaN(c)&&isNaN(this._actualMin))&&(l==this._actualMax||isNaN(l)&&isNaN(this._actualMax))||this.onRangeChanged(),this._items){this._values=[];this._lbls=[];var g=this._items.length,k='value',d='text';for(this.binding&&(s=this.binding.split(','),s.length==2&&(k=s[0],d=s[1])),h=0;h<g;h++)y=this._items[h],p=y[k],wjcCore.isNumber(p)&&(this._values.push(p),this._lbls.push(y[d]))}else this._lbls=r,this._values=u},n.prototype._layout=function(n,t){var i=this.axisType==AxisType.Y,r=this._position!=Position.Top&&this._position!=Position.Right;this._plotrect=t;this._axrect=i?new wjcCore.Rect(n.left,n.top,n.height,n.width):n},n.prototype._render=function(t){var u,f,s,l,b,k,i;if(this.position!=Position.None){this._vals={};u=0;this.labelAngle&&(u=this.labelAngle,u>90?u=90:u<-90&&(u=-90));this.labelAngle===undefined&&this._actualAngle!==undefined&&(u=this._actualAngle);var nt=this.axisType==AxisType.Y,tt=this._position!=Position.Top&&this._position!=Position.Right,p=FlexChart._FG,a=this._actualMax-this._actualMin;if(!isNaN(a)){f=this._calcMajorUnit();f==0&&(f=this._niceTickNumber(a)*.1);var c=Math.min(n.MAX_MAJOR,Math.floor(a/f)+1),r=[],e=[];if(this._rects=[],this._vals.major=r,this._vals.hasLbls=[],s=Math.floor(this._actualMin/f)*f,s<this._actualMin&&(s+=f),l=!1,this._lbls&&this._lbls.length>0)if(e=this._lbls,this._values.length==0)for(l=!0,i=0;i<e.length;i++)r.push(i);else r=this._values;else this._isTimeAxis?this._createTimeLabels(s,c,r,e):this.logBase?this._createLogarithmicLabels(this._actualMin,this._actualMax,this.majorUnit,r,e,!0):this._createLabels(s,c,f,r,e);c=Math.min(r.length,e.length);t.textFill=p;var w=this._TICK_HEIGHT,h=this._TICK_OVERLAP,o=this.majorTickMarks;for((o===undefined||o===null)&&(o=TickMark.Outside),o==TickMark.Outside?h=1:o==TickMark.Inside?h=-1:o==TickMark.Cross&&(h=0),b=.5*(h-1)*w,k=.5*(1+h)*w,i=0;i<c;i++){var d=!0,v=r[i],g=e[i],y=this.labels;y&&(l||this.itemsSource)&&this.majorUnit&&i%this.majorUnit!=0&&(y=!1);v>=this._actualMin&&v<=this._actualMax&&(d=this._renderLabelsAndTicks(t,i,v,g,u,o,y,b,k));this._vals.hasLbls.push(d)}}(this.minorGrid||this.minorTickMarks!=TickMark.None)&&this._renderMinor(t,r,l);t.stroke=p;t.fontSize=null;this._renderLineAndTitle(t);t.stroke=null;t.fontSize=null;t.textFill=null;t.strokeWidth=null}},n.prototype._renderLineAndTitle=function(n){var f=this.axisType==AxisType.Y,u=this._position!=Position.Top&&this._position!=Position.Right,i=FlexChart._CSS_TITLE,r=FlexChart._CSS_LINE,t;f?u?(this._title&&(t=new wjcCore.Point(this._axrect.left+this._szTitle.height*.5,this._axrect.top+.5*this._axrect.height),FlexChart._renderRotatedText(n,this._title,t,1,1,t,-90,i,this._groupClass)),this.axisLine&&n.drawLine(this._axrect.right,this._axrect.top,this._axrect.right,this._axrect.bottom,r)):(this._title&&(t=new wjcCore.Point(this._axrect.right-this._szTitle.height*.5,this._axrect.top+.5*this._axrect.height),FlexChart._renderRotatedText(n,this._title,t,1,1,t,90,i,this._groupClass)),this.axisLine&&n.drawLine(this._axrect.left,this._axrect.top,this._axrect.left,this._axrect.bottom,r)):u?(this.axisLine&&n.drawLine(this._axrect.left,this._axrect.top,this._axrect.right,this._axrect.top,r),this._title&&FlexChart._renderText(n,this._title,new wjcCore.Point(this._axrect.left+.5*this._axrect.width,this._axrect.bottom),1,2,i)):(this.axisLine&&n.drawLine(this._axrect.left,this._axrect.bottom,this._axrect.right,this._axrect.bottom,r),this._title&&FlexChart._renderText(n,this._title,new wjcCore.Point(this._axrect.left+.5*this._axrect.width,this._axrect.top),1,0,i))},n.prototype._renderMinor=function(n,t,i){var o=this.axisType==AxisType.Y,s=this._position!=Position.Top&&this._position!=Position.Right,r,e,u,f;if(this.logBase){if(this.minorUnit>0){for(r=[],this._createLogarithmicLabels(this._actualMin,this._actualMax,this.minorUnit,r,null,!1),e=[],u=0;u<r.length;u++)f=r[u],t.indexOf(f)==-1&&f>this._actualMin&&e.push(f);this._renderMinors(n,e,o,s)}}else this._createMinors(n,t,o,s,i)},n.prototype._renderLabelsAndTicks=function(n,t,i,r,u,f,e,o,s){var v=!0,k=this.axisType==AxisType.Y,y=this._position!=Position.Top&&this._position!=Position.Right,p=this.labelPadding||2,d=this._TICK_WIDTH,w=this._getLabelAlign(k),c=FlexChart._CSS_LABEL,g=FlexChart._CSS_GRIDLINE,b=FlexChart._CSS_TICK,nt=FlexChart._FG,tt=FlexChart._FG,it=this._GRIDLINE_WIDTH,rt=i!=this._actualMin&&this.majorGrid,a,l,h;return k?(a=this.convert(i),rt&&(n.stroke=nt,n.strokeWidth=it,n.drawLine(this._plotrect.left,a,this._plotrect.right,a,g)),n.stroke=tt,n.strokeWidth=d,y?(f!=TickMark.None&&n.drawLine(this._axrect.right-o,a,this._axrect.right-s,a,b),e&&(h=new wjcCore.Point(this._axrect.right-s-this._TICK_LABEL_DISTANCE-p,a),u>0?u==90?FlexChart._renderRotatedText(n,r,h,1,0,h,u,c,this._groupClass):FlexChart._renderRotatedText(n,r,h,2,1,h,u,c,this._groupClass):u<0?u==-90?FlexChart._renderRotatedText(n,r,h,1,2,h,u,c,this._groupClass):FlexChart._renderRotatedText(n,r,h,2,1,h,u,c,this._groupClass):this._renderLabel(n,i,r,h,2,w,c))):(f!=TickMark.None&&n.drawLine(this._axrect.left+o,a,this._axrect.left+s,a,b),e&&(h=new wjcCore.Point(this._axrect.left+s+this._TICK_LABEL_DISTANCE+p,a),u>0?u==90?FlexChart._renderRotatedText(n,r,h,1,2,h,u,c,this._groupClass):FlexChart._renderRotatedText(n,r,h,0,1,h,u,c,this._groupClass):u<0?u==-90?FlexChart._renderRotatedText(n,r,h,1,0,h,u,c,this._groupClass):FlexChart._renderRotatedText(n,r,h,0,1,h,u,c,this._groupClass):this._renderLabel(n,i,r,h,0,w,c)))):(l=this.convert(i),this.overlappingLabels==OverlappingLabels.Auto&&this._xCross(l)&&(e=!1),rt&&(n.stroke=nt,n.strokeWidth=it,n.drawLine(l,this._plotrect.top,l,this._plotrect.bottom,g)),n.stroke=tt,n.strokeWidth=d,y?(v=!1,e&&(h=new wjcCore.Point(l,this._axrect.top+s+p),v=u!=0?this._renderRotatedLabel(n,r,h,u,c,y):this._renderLabel(n,i,r,h,w,0,c)),f!=TickMark.None&&v&&(l=this.convert(i),n.drawLine(l,this._axrect.top+o,l,this._axrect.top+s,b))):(e&&(h=new wjcCore.Point(l,this._axrect.bottom-s-p),v=u!=0?this._renderRotatedLabel(n,r,h,u,c,y):this._renderLabel(n,i,r,h,w,2,c)),f!=TickMark.None&&(l=this.convert(i),n.drawLine(l,this._axrect.bottom-o,l,this._axrect.bottom-s,b)))),v},n.prototype._xCross=function(n){for(var i,r=this._rects.length,t=0;t<r;t++)if(i=this._rects[t],n>=i.left&&n<=i.right)return!0;return!1},n.prototype._createMinors=function(t,i,r,u,f){var e;if(i&&i.length>1){var h=this.majorUnit?this._isTimeAxis?this.majorUnit*864e5:this.majorUnit:i[1]-i[0],s=wjcCore.isNumber(this.minorUnit)?this._isTimeAxis?this.minorUnit*864e5:this.minorUnit:h*.5,o=[];for(e=i[0];e>this._actualMin&&o.length<n.MAX_MINOR;e-=s)i.indexOf(e)==-1&&o.push(e);for(e=i[0]+s;e<this._actualMax&&o.length<n.MAX_MINOR;e+=s)i.indexOf(e)==-1?o.push(e):f&&this.majorUnit&&e%this.majorUnit!=0&&o.push(e);this._renderMinors(t,o,r,u)}},n.prototype._renderMinors=function(n,t,i,r){var y=this._TICK_HEIGHT,p=this._TICK_WIDTH,o=this._TICK_OVERLAP,w=FlexChart._FG,a=this.minorTickMarks,v=!0,u,f,e;this._vals.minor=t;a==TickMark.Outside?o=1:a==TickMark.Inside?o=-1:a==TickMark.Cross?o=0:v=!1;var s=.5*(o-1)*y,h=.5*(1+o)*y,nt=t?t.length:0,b=this.minorGrid,c=this._plotrect,k=this._GRIDLINE_WIDTH,d=FlexChart._FG,g=FlexChart._CSS_GRIDLINE_MINOR,l=FlexChart._CSS_TICK_MINOR;for(u=0;u<nt;u++)t[u]>=this.actualMin&&t[u]<=this.actualMax&&(i?(f=this.convert(t[u]),v&&(n.stroke=w,n.strokeWidth=p,r?n.drawLine(this._axrect.right-s,f,this._axrect.right-h,f,l):n.drawLine(this._axrect.left+s,f,this._axrect.left+h,f,l)),b&&(n.stroke=d,n.strokeWidth=k,n.drawLine(c.left,f,c.right,f,g))):(e=this.convert(t[u]),v&&(n.stroke=w,n.strokeWidth=p,r?n.drawLine(e,this._axrect.top+s,e,this._axrect.top+h,l):n.drawLine(e,this._axrect.bottom-s,e,this._axrect.bottom-h,l)),b&&(n.stroke=d,n.strokeWidth=k,n.drawLine(e,c.top,e,c.bottom,g))))},n.prototype._renderLabel=function(n,t,i,r,u,f,e){var l=!1,s,o;if(this.itemFormatter&&(s=r.clone(),this.axisType==AxisType.X?s.y=this.position==Position.Top?this._plotrect.top:this._plotrect.bottom:s.x=this.position==Position.Right?this._plotrect.right:this._plotrect.left,o={val:t,text:i,pos:s,cls:e},o=this.itemFormatter(n,o),o?(i=o.text,e=o.cls):i=null),i){var c=this._rects,a=this.overlappingLabels==OverlappingLabels.Auto&&this._actualAngle===undefined,h=FlexChart._renderText(n,i,r,u,f,e,null,null,function(n){var i,t;if(a)for(i=c.length,t=0;t<i;t++)if(FlexChart._intersects(c[t],n))return!1;return!0});h&&(h.left+=4,h.width+=8,c.push(h),l=!0)}return l},n.prototype._renderRotatedLabel=function(n,t,i,r,u,f){var l,e,s,a;if(t){var o=n.measureString(t,u,this._groupClass),h=new wjcCore.Rect(i.x,i.y,o.height+2,o.width),c=this._rects,v=this.overlappingLabels==OverlappingLabels.Auto;if(v)for(l=c.length,e=0;e<l;e++)if(FlexChart._intersects(c[e],h))return!1;return r!=90&&r!=-90&&(s=.5*o.height*Math.abs(Math.sin(r*Math.PI/180)),f?i.y+=s:i.y-=s),a=f?r>0?0:2:r>0?2:0,FlexChart._renderRotatedText(n,t,i,a,1,i,r,u,this._groupClass),this._rects.push(h),!0}return!1},n.prototype._getLabelAlign=function(n){var t=1,i;return this.labelAlign&&(i=this.labelAlign.toLowerCase(),n?i=='top'?t=0:i=='bottom'&&(t=2):i=='left'?t=0:i=='right'&&(t=2)),t},n.prototype.convert=function(n,t,i){var u=t==null?this._actualMax:t,r=i==null?this._actualMin:i,c,l,h;if(u==r)return 0;var o=this._axrect.left,f=this._axrect.width,s=this._axrect.top,e=this._axrect.height;return this._customConvert!=null?(c=this._customConvert(n,r,u),this.axisType==AxisType.Y?s+c*e:o+c*f):(l=this.logBase,l?n<=0?NaN:(h=Math.log(u/r),this._reversed?this.axisType==AxisType.Y?s+Math.log(n/r)/h*e:o+f-Math.log(n/r)/h*f:this.axisType==AxisType.Y?s+e-Math.log(n/r)/h*e:o+Math.log(n/r)/h*f):this._reversed?this.axisType==AxisType.Y?s+(n-r)/(u-r)*e:o+f-(n-r)/(u-r)*f:this.axisType==AxisType.Y?s+e-(n-r)/(u-r)*e:o+(n-r)/(u-r)*f)},n.prototype.convertBack=function(n){var o;if(this._actualMax==this._actualMin)return 0;var i=this._plotrect.left,t=this._plotrect.width,r=this._plotrect.top,u=this._plotrect.height,f=this._actualMax-this._actualMin,e=this.logBase;return this._customConvertBack!=null?this.axisType==AxisType.Y?this._customConvertBack((n-r)/u,this._actualMin,this._actualMax):this._customConvertBack((n-i)/t,this._actualMin,this._actualMax):e?(o=0,o=this._reversed?this.axisType==AxisType.Y?(n-r)/u:1-(n-i)/t:this.axisType==AxisType.Y?1-(n-r)/u:(n-i)/t,Math.pow(e,(Math.log(this._actualMin)+(Math.log(this._actualMax)-Math.log(this._actualMin))*o)/Math.log(e))):this._reversed?this.axisType==AxisType.Y?this._actualMin+(n-r)*f/u:this._actualMin+(i+t-n)*f/t:this.axisType==AxisType.Y?this._actualMax-(n-r)*f/u:this._actualMin+(n-i)*f/t},Object.defineProperty(n.prototype,"axisType",{get:function(){var n=this._chart;if(n){if(n.axisX==this)return AxisType.X;if(n.axisY==this)return AxisType.Y}return this._axisType},enumerable:!0,configurable:!0}),n.prototype._getMinNum=function(){return this._actualMin},n.prototype._getMaxNum=function(){return this._actualMax},n.prototype._invalidate=function(){this._chart&&this._chart.invalidate()},n.prototype._cvCollectionChanged=function(){this._invalidate()},n.prototype._createLabels=function(n,t,i,r,u){for(var f=0;f<t;f++){var o=(n+i*f).toFixed(14),e=parseFloat(o),s=this._formatValue(e);r.push(e);u.push(s)}},n.prototype._createLogarithmicLabels=function(n,t,i,r,u,f){var o=this.logBase,p=Math.log(o),w=Math.floor(Math.log(n)/p),b=Math.ceil(Math.log(t)/p),s=o,v=!0,h,y,c,l,k,a,e;for(i>0&&(v=!1,s=i),s<o&&(s=o),h=(b-w+1)*o/s,y=1,f&&(c=this._getAnnoNumber(this.position===Position.Left||this.position===Position.Right),h>c?y=Math.floor(h/c+1):v&&(h<=.2*c?s=.2*o:h<=.1*c&&(s=.1*o))),l=w;l<=b;l+=y)if(v)for(k=Math.pow(o,l),a=0;a*s<o-1;a++)e=k*(1+a*s),e>=n&&e<=t&&(a==0?(r.unshift(e),u&&u.unshift(this._formatValue(e))):(r.push(e),u&&u.push(this._formatValue(e))));else e=Math.pow(s,l),e>=n&&e<=t&&(r.push(e),u&&u.push(this._formatValue(e)))},n.prototype._createTimeLabels=function(n,t,i,r){var a=this._actualMin,v=this._actualMax,s=new Date(this._actualMin),y=new Date(this._actualMax),p=this._format,w=this._getAnnoNumber(this._axisType==AxisType.Y),d,b,k,f,it,h,c,u,e;w>12&&(w=12);var nt=.001*(this._actualMax-this._actualMin)/w,tt=new _timeSpan(nt*_timeSpan.TicksPerSecond),o=isNaN(this._majorUnit)?_timeHelper.NiceTimeSpan(tt,p):_timeSpan.fromDays(this._majorUnit);if(p||(this._tfmt=p=_timeHelper.GetTimeDefaultFormat(1e3*o.TotalSeconds,0)),d=o.Ticks,b=_timeHelper.RoundTime(a,o.TotalDays,!1),isFinite(b)&&(a=b),k=_timeHelper.RoundTime(v,o.TotalDays,!0),isFinite(k)&&(v=k),f=new Date(a),it=new Date(v),o.TotalDays>=365&&isNaN(this._majorUnit))for(f=new Date(s.getFullYear(),1,1),f<s&&f.setFullYear(f.getFullYear()+1),h=o.TotalDays/365,h=h-h%1,u=f;u<=y;u.setFullYear(u.getFullYear()+h))e=u.valueOf(),i.push(e),r.push(this._formatValue(e));else if(o.TotalDays>=30&&isNaN(this._majorUnit))for(f=new Date(s.getFullYear(),s.getMonth(),1),f<s&&f.setMonth(f.getMonth()+1),c=o.TotalDays/30,c=c-c%1,u=f;u<=y;u.setMonth(u.getMonth()+c))e=u.valueOf(),i.push(e),r.push(this._formatValue(e));else{var l=1e3*d/_timeSpan.TicksPerSecond,u=f,g=s.getTime()-u.getTime();for(g>l&&(u=new Date(u.getTime()+Math.floor(g/l)*l));u<=y;u=new Date(u.getTime()+l))u>=s&&(e=u.valueOf(),i.push(e),r.push(this._formatValue(e)))}},n.prototype._formatValue=function(n){if(this._isTimeAxis)return this._format?wjcCore.Globalize.format(new Date(n),this._format):wjcCore.Globalize.format(new Date(n),this._tfmt);if(this._format)return wjcCore.Globalize.format(n,this._format);var t=n==Math.round(n)?'n0':'n';return wjcCore.Globalize.format(n,t)},n.prototype._calcMajorUnit=function(){var n=this._majorUnit;if(isNaN(n)){var i=this._actualMax-this._actualMin,r=this._nicePrecision(i),t=i/this._getAnnoNumber(this.axisType==AxisType.Y);n=this._niceNumber(2*t,-r,!0);n<t&&(n=this._niceNumber(t,-r+1,!1));n<t&&(n=this._niceTickNumber(t))}return n},n.prototype._getAnnoNumber=function(n){var i=n?this._annoSize.height:this._annoSize.width,r=n?this._axrect.height:this._axrect.width,t;return i>0&&r>0?(t=Math.floor(r/(i+6)),t<=0&&(t=1),t):10},n.prototype._nicePrecision=function(n){var i,t,r;return n<=0||isNaN(n)?0:(i=Math.log(n)/Math.LN10,t=i>=0?Math.floor(i):Math.ceil(i),r=n/Math.pow(10,t),r<3&&(t=-t+1,r=n/Math.pow(10,t),r<3&&(t=t+1)),t)},n.prototype._niceTickNumber=function(n){if(n==0)return n;n<0&&(n=-n);var u=Math.log(n)/Math.LN10,r=Math.floor(u),i=n/Math.pow(10,r),t=10;return i<=1?t=1:i<=2?t=2:i<=5&&(t=5),t*Math.pow(10,r)},n.prototype._niceNumber=function(n,t,i){if(n==0)return n;n<0&&(n=-n);var u=n/Math.pow(10,t),r=10;return i?u<1.5?r=1:u<3?r=2:u<4.5?r=4:u<7&&(r=5):u<=1?r=1:u<=2?r=2:u<=5&&(r=5),r*Math.pow(10,t)},Object.defineProperty(n.prototype,"_uniqueId",{get:function(){return this.__uniqueId},enumerable:!0,configurable:!0}),n.MAX_MAJOR=1e3,n.MAX_MINOR=2e3,n._id=0,n}();exports.Axis=Axis;AxisCollection=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.getAxis=function(n){var t=this.indexOf(n);return t>-1?this[t]:null},t.prototype.indexOf=function(n){for(var t=0;t<this.length;t++)if(this[t].name==n)return t;return-1},t}(wjcCore.ObservableArray);exports.AxisCollection=AxisCollection,function(n){n[n.tickf7=-7]="tickf7";n[n.tickf6=-6]="tickf6";n[n.tickf5=-5]="tickf5";n[n.tickf4=-4]="tickf4";n[n.tickf3=-3]="tickf3";n[n.tickf2=-2]="tickf2";n[n.tickf1=-1]="tickf1";n[n.second=1]="second";n[n.minute=60]="minute";n[n.hour=3600]="hour";n[n.day=86400]="day";n[n.week=604800]="week";n[n.month=2678400]="month";n[n.year=31536e3]="year";n[n.maxtime=Number.MAX_VALUE]="maxtime"}(_tmInc||(_tmInc={}));_timeSpan=function(){function n(n){this.ticks=n}return Object.defineProperty(n.prototype,"Ticks",{get:function(){return this.ticks},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"TotalSeconds",{get:function(){return this.ticks/1e7},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"TotalDays",{get:function(){return this.ticks/864e9},enumerable:!0,configurable:!0}),n.fromSeconds=function(t){return new n(t*1e7)},n.fromDays=function(t){return new n(t*864e9)},n.TicksPerSecond=1e7,n}();_timeHelper=function(){function n(n){wjcCore.isDate(n)?this.init(n):wjcCore.isNumber(n)&&this.init(FlexChart._fromOADate(n))}return n.prototype.init=function(n){this.year=n.getFullYear();this.month=n.getMonth();this.day=n.getDate();this.hour=n.getHours();this.minute=n.getMinutes();this.second=n.getSeconds()},n.prototype.getTimeAsDateTime=function(){var t=0,n=0,r=0,i;return this.hour>=24&&(this.hour-=24,this.day+=1),this.month<0?(t=-1-this.day,this.month=1):this.month>11&&(t=this.month-12,this.month=12),this.day<1?(n=-1-this.day,this.day=1):this.day>28&&this.month==2?(n=this.day-28,this.day=28):this.day>30&&(this.month==4||this.month==4||this.month==6||this.month==9||this.month==11)?(n=this.day-30,this.day=30):this.day>31&&(n=this.day-31,this.day=31),this.second>59&&(r=this.second-59,this.second=59),i=0,this.minute>59&&(i=this.minute-59,this.minute=59),new Date(this.year,this.month,this.day,this.hour,this.minute,this.second)},n.prototype.getTimeAsDouble=function(){return this.getTimeAsDateTime().valueOf()},n.tround=function(n,t,i){var r=n/t*t;return r=r-r%1,i&&r!=n&&(t=t-t%1,r+=t),r},n.RoundTime=function(t,i,r){var f=i*86400,u;if(f>0)return(u=new n(t),f<_tmInc.minute)?(u.second=this.tround(u.second,f,r),u.getTimeAsDouble()):(u.second=0,f<_tmInc.hour)?(f/=_tmInc.minute,u.minute=this.tround(u.minute,f,r),u.getTimeAsDouble()):(u.minute=0,f<_tmInc.day)?(f/=_tmInc.hour,u.hour=this.tround(u.hour,f,r),u.getTimeAsDouble()):(u.hour=0,f<_tmInc.month)?(f/=_tmInc.day,u.day=this.tround(u.day,f,r),u.getTimeAsDouble()):(u.day=1,f<_tmInc.year)?(f/=_tmInc.month,u.month!=1&&(u.month=this.tround(u.month,f,r)),u.getTimeAsDouble()):(u.month=1,f/=_tmInc.year,u.year=this.tround(u.year,f,r),u.getTimeAsDouble());var s=t,o=s-f,e=o/i*i;return r&&e!=o&&(e+=i),f+e},n.TimeSpanFromTmInc=function(n){var i=_timeSpan.fromSeconds(1),t,r;if(n!=_tmInc.maxtime)if(n>_tmInc.tickf1)i=_timeSpan.fromSeconds(n);else{for(t=n,r=1,t+=7;t>0;)r*=10,t--;i=new _timeSpan(r)}return i},n.manualTimeInc=function(n){var t=_tmInc.second,i,u,r,f;if(n==null||n.length==0)return t;if(i=n.indexOf('f'),i>=0){if(u=-1,i>0&&n.substr(i-1,1)=='%')u=-1;else for(r=1;r<6;r++){if(i+r>=n.length)break;if(f=n.substr(i+r,1),f!='f')break;u--}t=u}else n.indexOf('s')>=0?t=_tmInc.second:n.indexOf('m')>=0?t=_tmInc.minute:n.indexOf('h')>=0||n.indexOf('H')?t=_tmInc.hour:n.indexOf('d')>=0?t=_tmInc.day:n.indexOf('M')>=0?t=_tmInc.month:n.indexOf('y')>=0&&(t=_tmInc.year);return t},n.getNiceInc=function(n,t,i){for(var u,r=0;r<n.length;r++)if(u=n[r]*i,t<=u)return u;return 0},n.NiceTimeSpan=function(t,i){var u=_tmInc.second,f,r,e;if(i!=null&&i.length>0&&(u=n.manualTimeInc(i)),f=0,r=0,u<_tmInc.second&&t.TotalSeconds<10){for(f=t.Ticks,r=n.TimeSpanFromTmInc(u).Ticks;f>10*r;)r*=10;return e=r,f>e&&(e*=2),f>e&&(e=5*r),f>e&&(e=10*r),new _timeSpan(e)}if(f=Math.ceil(t.TotalSeconds),f==0)return n.TimeSpanFromTmInc(u);if(r=1,u<_tmInc.minute){if(f<_tmInc.minute&&(r=n.getNiceInc([1,2,5,10,15,30],f,u),r!=0))return _timeSpan.fromSeconds(r);u=_tmInc.minute}if(u<_tmInc.hour){if(f<_tmInc.hour&&(r=n.getNiceInc([1,2,5,10,15,30],f,u),r!=0))return _timeSpan.fromSeconds(r);u=_tmInc.hour}if(u<_tmInc.day){if(f<_tmInc.day&&(r=n.getNiceInc([1,3,6,12],f,u),r!=0))return _timeSpan.fromSeconds(r);u=_tmInc.day}if(u<_tmInc.month){if(f<_tmInc.month&&(r=n.getNiceInc([1,2,7,14],f,u),r!=0))return _timeSpan.fromSeconds(r);u=_tmInc.month}if(u<_tmInc.year){if(f<_tmInc.year&&(r=n.getNiceInc([1,2,3,4,6],f,u),r!=0))return _timeSpan.fromSeconds(r);u=_tmInc.year}return r=100*_tmInc.year,f<r&&(r=n.getNiceInc([1,2,5,10,20,50],f,u),r==0&&(r=100*_tmInc.year)),_timeSpan.fromSeconds(r)},n.NiceTimeUnit=function(t,i){var r=_timeSpan.fromDays(t);return r=n.NiceTimeSpan(r,i),r.TotalDays},n.GetTimeDefaultFormat=function(n,t){var u;if(isNaN(n)||isNaN(t))return'';var i='s',f=_timeSpan.fromSeconds(.001*(n-t)),r=f.TotalSeconds;if(r>=_tmInc.year)i='yyyy';else if(r>=_tmInc.month)i='MMM yyyy';else if(r>=_tmInc.day)i='MMM d';else if(r>=_tmInc.hour)i='ddd H:mm';else if(r>=.5*_tmInc.hour)i='H:mm';else if(r>=1)i='H:mm:ss';else if(r>0)for(u=f.Ticks,i="s.";u<_timeSpan.TicksPerSecond;)u*=10,i+='f';return i},n.secInYear=86400,n}();PlotArea=function(){function n(){this._row=0;this._col=0;this._rect=new wjcCore.Rect(0,0,0,0)}return Object.defineProperty(n.prototype,"row",{get:function(){return this._row},set:function(n){n!=this._row&&(this._row=wjcCore.asInt(n,!0,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"column",{get:function(){return this._col},set:function(n){n!=this._col&&(this._col=wjcCore.asInt(n,!0,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"name",{get:function(){return this._name},set:function(n){n!=this._name&&(this._name=wjcCore.asString(n,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"width",{get:function(){return this._width},set:function(n){n!=this._width&&(this._width=n,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this._height},set:function(n){n!=this._height&&(this._height=n,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"style",{get:function(){return this._style},set:function(n){n!=this._style&&(this._style=n,this._invalidate())},enumerable:!0,configurable:!0}),n.prototype._invalidate=function(){this._chart&&this._chart.invalidate()},n.prototype._render=function(n){n.drawRect(this._rect.left,this._rect.top,this._rect.width,this._rect.height,null,this.style)},n.prototype._setPlotX=function(n,t){this._rect.left=n;this._rect.width=t},n.prototype._setPlotY=function(n,t){this._rect.top=n;this._rect.height=t},n}();exports.PlotArea=PlotArea;PlotAreaCollection=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.getPlotArea=function(n){var t=this.indexOf(n);return t>-1?this[t]:null},t.prototype.indexOf=function(n){for(var t=0;t<this.length;t++)if(this[t].name==n)return t;return-1},t.prototype._getWidth=function(n){for(var t,r,i=0;i<this.length;i++)if(t=this[i],t.column==n&&t.row==0)return t.width;return r},t.prototype._getHeight=function(n){for(var t,r,i=0;i<this.length;i++)if(t=this[i],t.row==n&&t.column==0)return t.height;return r},t.prototype._calculateWidths=function(n,t){var r,i,u;if(t<=0)throw"ncols";for(r=[],i=0;i<t;i++)u=this._getWidth(i),r[i]=new _GridLength(u);return this._calculateLengths(n,t,r)},t.prototype._calculateHeights=function(n,t){var r,i,u;if(t<=0)throw"nrows";for(r=[],i=0;i<t;i++)u=this._getHeight(i),r[i]=new _GridLength(u);return this._calculateLengths(n,t,r)},t.prototype._calculateLengths=function(n,t,i){for(var s,e,u=[t],o=0,f=0,r=0;r<t;r++)i[r].isAbsolute?(u[r]=i[r].value,o+=u[r]):i[r].isStar?f+=i[r].value:i[r].isAuto&&f++;for(s=n-o,e=s/f,r=0;r<t;r++)i[r].isStar?u[r]=e*i[r].value:i[r].isAuto&&(u[r]=e),u[r]<0&&(u[r]=0);return u},t}(wjcCore.ObservableArray);exports.PlotAreaCollection=PlotAreaCollection,function(n){n[n.Auto=0]="Auto";n[n.Pixel=1]="Pixel";n[n.Star=2]="Star"}(_GridUnitType||(_GridUnitType={}));_GridLength=function(){function n(n){n===void 0&&(n=null);this._unitType=_GridUnitType.Auto;n&&(n=n.toString(),n.indexOf('*')>=0?(this._unitType=_GridUnitType.Star,n=n.replace('*',''),this._value=parseFloat(n),isNaN(this._value)&&(this._value=1)):(this._unitType=_GridUnitType.Pixel,this._value=parseFloat(n),isNaN(this._value)&&(this._unitType=_GridUnitType.Auto,this._value=1)))}return Object.defineProperty(n.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isStar",{get:function(){return this._unitType==_GridUnitType.Star},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isAbsolute",{get:function(){return this._unitType==_GridUnitType.Pixel},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isAuto",{get:function(){return this._unitType==_GridUnitType.Auto},enumerable:!0,configurable:!0}),n}(),function(n){n[n.Visible=0]="Visible";n[n.Plot=1]="Plot";n[n.Legend=2]="Legend";n[n.Hidden=3]="Hidden"}(exports.SeriesVisibility||(exports.SeriesVisibility={}));SeriesVisibility=exports.SeriesVisibility,function(n){n[n.Dot=0]="Dot";n[n.Box=1]="Box"}(exports.Marker||(exports.Marker={}));Marker=exports.Marker;DataArray=function(){function n(){}return n}();exports.DataArray=DataArray;SeriesEventArgs=function(n){function t(t){n.call(this);this._series=wjcCore.asType(t,SeriesBase)}return __extends(t,n),Object.defineProperty(t.prototype,"series",{get:function(){return this._series},enumerable:!0,configurable:!0}),t}(wjcCore.EventArgs);exports.SeriesEventArgs=SeriesEventArgs;SeriesBase=function(){function n(){this._altStyle=null;this._symbolMarker=Marker.Dot;this._visibility=SeriesVisibility.Visible;this.rendering=new wjcCore.Event;this.rendered=new wjcCore.Event}return Object.defineProperty(n.prototype,"_chart",{get:function(){return this.__chart},set:function(n){n!==this.__chart&&(this.__chart=n)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"style",{get:function(){return this._style},set:function(n){n!=this._style&&(this._style=n,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"altStyle",{get:function(){return this._altStyle},set:function(n){n!=this._altStyle&&(this._altStyle=n,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"symbolStyle",{get:function(){return this._symbolStyle},set:function(n){n!=this._symbolStyle&&(this._symbolStyle=n,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"symbolSize",{get:function(){return this._symbolSize},set:function(n){n!=this._symbolSize&&(this._symbolSize=wjcCore.asNumber(n,!0,!0),this._invalidate())},enumerable:!0,configurable:!0}),n.prototype._getSymbolSize=function(){return this.symbolSize!=null?this.symbolSize:this.chart.symbolSize},Object.defineProperty(n.prototype,"symbolMarker",{get:function(){return this._symbolMarker},set:function(n){n!=this._symbolMarker&&(this._symbolMarker=wjcCore.asEnum(n,Marker,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"binding",{get:function(){return this._binding?this._binding:this._chart?this._chart.binding:null},set:function(n){n!=this._binding&&(this._binding=wjcCore.asString(n,!0),this._clearValues(),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bindingX",{get:function(){return this._bindingX?this._bindingX:this._chart?this._chart.bindingX:null},set:function(n){n!=this._bindingX&&(this._bindingX=wjcCore.asString(n,!0),this._clearValues(),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"name",{get:function(){return this._name},set:function(n){this._name=n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"itemsSource",{get:function(){return this._itemsSource},set:function(n){n!=this._itemsSource&&(this._cv&&(this._cv.currentChanged.removeHandler(this._cvCurrentChanged,this),this._cv.collectionChanged.removeHandler(this._cvCollectionChanged,this),this._cv=null),this._itemsSource=n,this._cv=wjcCore.asCollectionView(n),this._cv!=null&&(this._cv.currentChanged.addHandler(this._cvCurrentChanged,this),this._cv.collectionChanged.addHandler(this._cvCollectionChanged,this)),this._clearValues(),this._itemsSource=n,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"collectionView",{get:function(){return this._cv?this._cv:this._chart?this._chart.collectionView:null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"chart",{get:function(){return this._chart},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hostElement",{get:function(){return this._hostElement},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"legendElement",{get:function(){return this._legendElement},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"cssClass",{get:function(){return this._cssClass},set:function(n){this._cssClass=wjcCore.asString(n,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"visibility",{get:function(){return this._visibility},set:function(n){if(n!=this._visibility&&(this._visibility=wjcCore.asEnum(n,SeriesVisibility),this._clearValues(),this._invalidate(),this._chart))this._chart.onSeriesVisibilityChanged(new SeriesEventArgs(this))},enumerable:!0,configurable:!0}),n.prototype.onRendering=function(n,t,i){var r=new SeriesRenderingEventArgs(n,t,i);return this.rendering.raise(this,r),r.cancel},n.prototype.onRendered=function(n){this.rendered.raise(this,new RenderEventArgs(n))},n.prototype.hitTest=function(n,t){return wjcCore.isNumber(n)&&wjcCore.isNumber(t)?n=new wjcCore.Point(n,t):n instanceof MouseEvent&&(n=new wjcCore.Point(n.pageX,n.pageY)),wjcCore.asType(n,wjcCore.Point),this._chart?this._chart._hitTestSeries(n,this._chart.series.indexOf(this)):null},n.prototype.getPlotElement=function(n){if(this.hostElement&&n<this._pointIndexes.length){var t=this._pointIndexes[n];if(t<this.hostElement.childNodes.length)return this.hostElement.childNodes[t]}return null},Object.defineProperty(n.prototype,"axisX",{get:function(){return this._axisX},set:function(n){if(n!=this._axisX){if(this._axisX=wjcCore.asType(n,Axis,!0),this._axisX){var t=this._axisX._chart=this._chart;t&&t.axes.indexOf(this._axisX)==-1&&t.axes.push(this._axisX)}this._invalidate()}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"axisY",{get:function(){return this._axisY},set:function(n){if(n!=this._axisY){if(this._axisY=wjcCore.asType(n,Axis,!0),this._axisY){var t=this._axisY._chart=this._chart;t&&t.axes.indexOf(this._axisY)==-1&&t.axes.push(this._axisY)}this._invalidate()}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"_plotter",{get:function(){return this.chart&&!this.__plotter&&(this.__plotter=this.chart._getPlotter(this)),this.__plotter},set:function(n){n!=this.__plotter&&(this.__plotter=n)},enumerable:!0,configurable:!0}),n.prototype.getDataType=function(n){return n==0?this._valueDataType:n==1?this._xvalueDataType:null},n.prototype.getValues=function(n){var i,t;if(n==0)return this._values==null&&(this._valueDataType=null,this._cv!=null?(t=this._bindValues(this._cv.items,this._getBinding(0)),this._values=t.values,this._valueDataType=t.dataType):this.binding!=null&&this._chart!=null&&this._chart.collectionView!=null&&(t=this._bindValues(this._chart.collectionView.items,this._getBinding(0)),this._values=t.values,this._valueDataType=t.dataType)),this._values;if(n==1){if(this._xvalues==null&&(this._xvalueDataType=null,i=this,this.bindingX!=null))if(i._cv!=null)t=this._bindValues(i._cv.items,this.bindingX,!0),this._xvalueDataType=t.dataType,this._xvalues=t.values;else{if(this._bindingX==null)return null;i._chart!=null&&i._chart.collectionView!=null&&(t=this._bindValues(i._chart.collectionView.items,this.bindingX,!0),this._xvalueDataType=t.dataType,this._xvalues=t.values)}return this._xvalues}return null},n.prototype.drawLegendItem=function(n,t,i){var r=this._getChartType();r==null&&(r=this._chart._getChartType());r===ChartType.Funnel?this._drawFunnelLegendItem(n,t,i,this.style,this.symbolStyle):this._drawLegendItem(n,t,r,this.name,this.style,this.symbolStyle)},n.prototype.measureLegendItem=function(n,t){var i=this._getChartType();return i==null&&(i=this._chart._getChartType()),i===ChartType.Funnel?this._measureLegendItem(n,this._getFunnelLegendName(t)):this._measureLegendItem(n,this.name)},n.prototype.legendItemLength=function(){var n=this._getChartType();return n==null&&(n=this._chart._getChartType()),n===ChartType.Funnel?this._chart._xlabels&&this._chart._xlabels.length?this._chart._xlabels.length:1:1},n.prototype.getDataRect=function(){return null},n.prototype._getChartType=function(){return this._chartType},n.prototype._clearValues=function(){this._values=null;this._xvalues=null;this.__plotter=null},n.prototype._getBinding=function(n){var i=null,t;return this.binding&&(t=this.binding.split(','),t&&t.length>n&&(i=t[n].trim())),i},n.prototype._getBindingValues=function(n){var t,i;return this._cv!=null?t=this._cv.items:this._chart!=null&&this._chart.collectionView!=null&&(t=this._chart.collectionView.items),i=this._bindValues(t,this._getBinding(n)),i.values},n.prototype._getItem=function(n){var i=null,t=null;return this.itemsSource!=null?t=this._cv!=null?this._cv.items:this.itemsSource:this._chart.itemsSource!=null&&(t=this._chart.collectionView!=null?this._chart.collectionView.items:this._chart.itemsSource),t!=null&&(i=t[n]),i},n.prototype._getLength=function(){var t=0,n=null;return this.itemsSource!=null?n=this._cv!=null?this._cv.items:this.itemsSource:this._chart.itemsSource!=null&&(n=this._chart.collectionView!=null?this._chart.collectionView.items:this._chart.itemsSource),n!=null&&(t=n.length),t},n.prototype._setPointIndex=function(n,t){this._pointIndexes[n]=t},n.prototype._getDataRect=function(){var o=this.getValues(0),s=this.getValues(1),f,n,r;if(o){var t=NaN,i=NaN,e=NaN,u=NaN,h=o.length;for(f=0;f<h;f++)n=o[f],isFinite(n)&&(isNaN(i)?i=u=n:n<i?i=n:n>u&&(u=n)),s&&(r=s[f],isFinite(r)&&(isNaN(t)?t=e=r:r<t?t=r:n>u&&(e=r)));if(s||(t=0,e=h-1),!isNaN(i))return new wjcCore.Rect(t,i,e-t,u-i)}return null},n.prototype._isCustomAxisX=function(){return this._axisX?this._chart?this._axisX!=this.chart.axisX:!0:!1},n.prototype._isCustomAxisY=function(){return this._axisY?this._chart?this._axisY!=this.chart.axisY:!0:!1},n.prototype._getAxisX=function(){var n=null;return this.axisX?n=this.axisX:this.chart&&(n=this.chart.axisX),n},n.prototype._getAxisY=function(){var n=null;return this.axisY?n=this.axisY:this.chart&&(n=this.chart.axisY),n},n.prototype._measureLegendItem=function(n,t){var i=new wjcCore.Size,r;return i.width=Series._LEGEND_ITEM_WIDTH,i.height=Series._LEGEND_ITEM_HEIGHT,this._name&&(r=n.measureString(t,FlexChart._CSS_LABEL),i.width+=r.width,i.height<r.height&&(i.height=r.height)),i.width+=3*Series._LEGEND_ITEM_MARGIN,i.height+=2*Series._LEGEND_ITEM_MARGIN,i},n.prototype._drawFunnelLegendItem=function(n,t,i,r,u){n.strokeWidth=1;var s=Series._LEGEND_ITEM_MARGIN,f=null,e=null;f===null&&(f=this._chart._getColorLight(i));e===null&&(e=this._chart._getColor(i));n.fill=f;n.stroke=e;var h=t.top+.5*t.height,l=Series._LEGEND_ITEM_WIDTH,o=Series._LEGEND_ITEM_HEIGHT,c=this._getFunnelLegendName(i);n.drawRect(t.left+s,h-.5*o,l,o,null,u?u:r);c&&FlexChart._renderText(n,c,new wjcCore.Point(t.left+o+2*s,h),0,1,FlexChart._CSS_LABEL)},n.prototype._getFunnelLegendName=function(n){var t;return this._chart._xlabels&&this._chart._xlabels.length&&(t=this._chart._xlabels[n]),t||(t=this.name),t},n.prototype._drawLegendItem=function(n,t,i,r,u,f){var h,c;n.strokeWidth=1;var e=Series._LEGEND_ITEM_MARGIN,a=null,v=null;a===null&&(a=this._chart._getColorLight(this._chart.series.indexOf(this)));v===null&&(v=this._chart._getColor(this._chart.series.indexOf(this)));n.fill=a;n.stroke=v;var o=t.top+.5*t.height,s=Series._LEGEND_ITEM_WIDTH,l=Series._LEGEND_ITEM_HEIGHT;switch(i){case ChartType.Area:case ChartType.SplineArea:n.drawRect(t.left+e,o-.5*l,s,l,null,u);break;case ChartType.Bar:case ChartType.Column:n.drawRect(t.left+e,o-.5*l,s,l,null,f?f:u);break;case ChartType.Scatter:case ChartType.Bubble:h=.3*s;c=.3*l;this.symbolMarker==Marker.Box?n.drawRect(t.left+e+.5*s-h,o-c,2*h,2*c,null,f?f:u):n.drawEllipse(t.left+.5*s+e,o,h,c,null,f?f:u);break;case ChartType.Line:case ChartType.Spline:n.drawLine(t.left+e,o,t.left+s+e,o,null,u);break;case ChartType.LineSymbols:case ChartType.SplineSymbols:h=.3*s;c=.3*l;this.symbolMarker==Marker.Box?n.drawRect(t.left+e+.5*s-h,o-c,2*h,2*c,null,f?f:u):n.drawEllipse(t.left+.5*s+e,o,h,c,null,f?f:u);n.drawLine(t.left+e,o,t.left+s+e,o,null,u);break;case ChartType.Candlestick:case ChartType.HighLowOpenClose:n.drawLine(t.left+e,o,t.left+s+e,o,null,f?f:u)}this._name&&FlexChart._renderText(n,r,new wjcCore.Point(t.left+l+2*e,o),0,1,FlexChart._CSS_LABEL)},n.prototype._cvCollectionChanged=function(){this._clearValues();this._invalidate()},n.prototype._cvCurrentChanged=function(){this._chart&&this._chart._notifyCurrentChanged&&this._invalidate()},n.prototype._bindValues=function(n,t,i){var f,o,e,h,u,r,s;if(i===void 0&&(i=!1),n!=null)for(h=n.length,f=new Array(n.length),u=0;u<h;u++)e=null,r=n[u],t!=null&&(r=r[t]),wjcCore.isArray(r)&&r.length>0&&(e=r,r=r[0]),wjcCore.isNumber(r)?(f[u]=r,o=wjcCore.DataType.Number):wjcCore.isDate(r)?(f[u]=r.valueOf(),o=wjcCore.DataType.Date):i&&r&&(f[u]=u,o=wjcCore.DataType.Number),wjcCore.isArray(e)&&e.length>0&&(f[u]=e);return s=new DataArray,s.values=f,s.dataType=o,s},n.prototype._invalidate=function(){this._chart&&this._chart.invalidate()},n.prototype._indexToPoint=function(n){if(n>=0&&n<this._values.length){var t=this._values[n],i=this._xvalues?this._xvalues[n]:n;return new wjcCore.Point(i,t)}return null},n.prototype._getSymbolFill=function(n){var t=null;return this.symbolStyle&&(t=this.symbolStyle.fill),!t&&this.style&&(t=this.style.fill),!t&&this.chart&&(t=this.chart._getColorLight(n)),t},n.prototype._getSymbolStroke=function(n){var t=null;return this.symbolStyle&&(t=this.symbolStyle.stroke),!t&&this.style&&(t=this.style.stroke),!t&&this.chart&&(t=this.chart._getColor(n)),t},n.prototype._getAltSymbolStroke=function(){var n=null;return this.altStyle&&(n=this.altStyle.stroke),n},n.prototype._getAltSymbolFill=function(){var n=null;return this.altStyle&&(n=this.altStyle.fill),n},n.prototype._renderLabels=function(n,t,i,r){this._plotter&&this._plotter._renderLabels(n,this,t,i,r)},n._LEGEND_ITEM_WIDTH=10,n._LEGEND_ITEM_HEIGHT=10,n._LEGEND_ITEM_MARGIN=4,n._DEFAULT_SYM_SIZE=10,n}();exports.SeriesBase=SeriesBase;Series=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),Object.defineProperty(t.prototype,"chartType",{get:function(){return this._chartType},set:function(n){n!=this._chartType&&(this._chartType=wjcCore.asEnum(n,ChartType,!0),this._invalidate())},enumerable:!0,configurable:!0}),t}(SeriesBase);exports.Series=Series;_SvgRenderEngine=function(){function n(t){this._strokeWidth=1;this._fontSize=null;this._fontFamily=null;this._savedGradient={};this._element=t;this._create();this._element.appendChild(this._svg);n._isff===undefined&&(n._isff=navigator.userAgent.toLowerCase().indexOf('firefox')>=0)}return n.prototype.beginRender=function(){while(this._svg.firstChild)this._svg.removeChild(this._svg.firstChild);this._savedGradient={};this._svg.appendChild(this._defs);this._svg.appendChild(this._textGroup)},n.prototype.endRender=function(){this._textGroup.parentNode&&this._svg.removeChild(this._textGroup)},n.prototype.setViewportSize=function(n,t){this._svg.setAttribute('width',n.toString());this._svg.setAttribute('height',t.toString())},Object.defineProperty(n.prototype,"element",{get:function(){return this._svg},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"fill",{get:function(){return this._fill},set:function(n){this._fill=n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"fontSize",{get:function(){return this._fontSize},set:function(n){this._fontSize=n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(n){this._fontFamily=n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"stroke",{get:function(){return this._stroke},set:function(n){this._stroke=n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"strokeWidth",{get:function(){return this._strokeWidth},set:function(n){this._strokeWidth=n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"textFill",{get:function(){return this._textFill},set:function(n){this._textFill=n},enumerable:!0,configurable:!0}),n.prototype.addClipRect=function(t,i){if(t&&i){var u=document.createElementNS(n.svgNS,'clipPath'),r=document.createElementNS(n.svgNS,'rect');r.setAttribute('x',(t.left-1).toFixed());r.setAttribute('y',(t.top-1).toFixed());r.setAttribute('width',(t.width+2).toFixed());r.setAttribute('height',(t.height+2).toFixed());u.appendChild(r);u.setAttribute('id',i);this._svg.appendChild(u)}},n.prototype.drawEllipse=function(t,i,r,u,f,e){var o=document.createElementNS(n.svgNS,'ellipse');return this._applyColor(o,'stroke',this._stroke),this._strokeWidth!==null&&o.setAttribute('stroke-width',this._strokeWidth.toString()),this._applyColor(o,'fill',this._fill),o.setAttribute('cx',t.toFixed(1)),o.setAttribute('cy',i.toFixed(1)),o.setAttribute('rx',r.toFixed(1)),o.setAttribute('ry',u.toFixed(1)),f&&o.setAttribute('class',f),this._applyStyle(o,e),this._appendChild(o),o},n.prototype.drawRect=function(t,i,r,u,f,e,o){var s=document.createElementNS(n.svgNS,'rect');return this._applyColor(s,'fill',this._fill),this._applyColor(s,'stroke',this._stroke),this._strokeWidth!==null&&s.setAttribute('stroke-width',this._strokeWidth.toString()),s.setAttribute('x',t.toFixed(1)),s.setAttribute('y',i.toFixed(1)),r>0&&r<.05?s.setAttribute('width','0.1'):s.setAttribute('width',r.toFixed(1)),u>0&&u<.05?s.setAttribute('height','0.1'):s.setAttribute('height',u.toFixed(1)),o&&s.setAttribute('clip-path','url(#'+o+')'),f&&s.setAttribute('class',f),this._applyStyle(s,e),this._appendChild(s),s},n.prototype.drawLine=function(t,i,r,u,f,e){var o=document.createElementNS(n.svgNS,'line');return this._applyColor(o,'stroke',this._stroke),this._strokeWidth!==null&&o.setAttribute('stroke-width',this._strokeWidth.toString()),o.setAttribute('x1',t.toFixed(1)),o.setAttribute('x2',r.toFixed(1)),o.setAttribute('y1',i.toFixed(1)),o.setAttribute('y2',u.toFixed(1)),f&&o.setAttribute('class',f),this._applyStyle(o,e),this._appendChild(o),o},n.prototype.drawLines=function(t,i,r,u,f){var s,e,h,o;if(t&&i&&(s=Math.min(t.length,i.length),s>0)){for(e=document.createElementNS(n.svgNS,'polyline'),this._applyColor(e,'stroke',this._stroke),this._strokeWidth!==null&&e.setAttribute('stroke-width',this._strokeWidth.toString()),e.setAttribute('fill','none'),h='',o=0;o<s;o++)h+=t[o].toFixed(1)+','+i[o].toFixed(1)+' ';return e.setAttribute('points',h),r&&e.setAttribute('class',r),f&&e.setAttribute('clip-path','url(#'+f+')'),this._applyStyle(e,u),this._appendChild(e),e}return null},n.prototype.drawSplines=function(t,i,r,u,f){var e,s,o;if(t&&i){var v=new _Spline(t,i),h=v.calculate(),c=h.xs,l=h.ys,a=Math.min(c.length,l.length);if(a>0){for(e=document.createElementNS(n.svgNS,'polyline'),this._applyColor(e,'stroke',this._stroke),this._strokeWidth!==null&&e.setAttribute('stroke-width',this._strokeWidth.toString()),e.setAttribute('fill','none'),s='',o=0;o<a;o++)s+=c[o].toFixed(1)+','+l[o].toFixed(1)+' ';return e.setAttribute('points',s),r&&e.setAttribute('class',r),f&&e.setAttribute('clip-path','url(#'+f+')'),this._applyStyle(e,u),this._appendChild(e),e}}return null},n.prototype.drawPolygon=function(t,i,r,u,f){var s,e,h,o;if(t&&i&&(s=Math.min(t.length,i.length),s>0)){for(e=document.createElementNS(n.svgNS,'polygon'),this._applyColor(e,'stroke',this._stroke),this._strokeWidth!==null&&e.setAttribute('stroke-width',this._strokeWidth.toString()),this._applyColor(e,'fill',this._fill),h='',o=0;o<s;o++)h+=t[o].toFixed(1)+','+i[o].toFixed(1)+' ';return e.setAttribute('points',h),r&&e.setAttribute('class',r),f&&e.setAttribute('clip-path','url(#'+f+')'),this._applyStyle(e,u),this._appendChild(e),e}return null},n.prototype.drawPieSegment=function(t,i,r,u,f,e,o,s){var h,c,v,l,y,a;return f>=Math.PI*2?this.drawEllipse(t,i,r,r,e,o):(h=document.createElementNS(n.svgNS,'path'),this._applyColor(h,'fill',this._fill),this._applyColor(h,'stroke',this._stroke),this._strokeWidth!==null&&h.setAttribute('stroke-width',this._strokeWidth.toString()),c=new wjcCore.Point(t,i),c.x+=r*Math.cos(u),c.y+=r*Math.sin(u),v=u+f,l=new wjcCore.Point(t,i),l.x+=r*Math.cos(v),l.y+=r*Math.sin(v),y=' 0 0,1 ',Math.abs(f)>Math.PI&&(y=' 0 1,1 '),a='M '+c.x.toFixed(1)+','+c.y.toFixed(1),a+=' A '+r.toFixed(1)+','+r.toFixed(1)+y,a+=l.x.toFixed(1)+','+l.y.toFixed(1),a+=' L '+t.toFixed(1)+','+i.toFixed(1)+' z',h.setAttribute('d',a),s&&h.setAttribute('clip-path','url(#'+s+')'),e&&h.setAttribute('class',e),this._applyStyle(h,o),this._appendChild(h),h)},n.prototype.drawDonutSegment=function(t,i,r,u,f,e,o,s,h){var b=!1,c,v,y,p,a,w,k,d,l;return e>=Math.PI*2&&(b=!0,e-=.001),c=document.createElementNS(n.svgNS,'path'),this._applyColor(c,'fill',this._fill),this._applyColor(c,'stroke',this._stroke),this._strokeWidth!==null&&c.setAttribute('stroke-width',this._strokeWidth.toString()),v=new wjcCore.Point(t,i),v.x+=r*Math.cos(f),v.y+=r*Math.sin(f),y=f+e,p=new wjcCore.Point(t,i),p.x+=r*Math.cos(y),p.y+=r*Math.sin(y),a=new wjcCore.Point(t,i),a.x+=u*Math.cos(y),a.y+=u*Math.sin(y),w=new wjcCore.Point(t,i),w.x+=u*Math.cos(f),w.y+=u*Math.sin(f),k=' 0 0,1 ',d=' 0 0,0 ',Math.abs(e)>Math.PI&&(k=' 0 1,1 ',d=' 0 1,0 '),l='M '+v.x.toFixed(3)+','+v.y.toFixed(3),l+=' A '+r.toFixed(3)+','+r.toFixed(3)+k,l+=p.x.toFixed(3)+','+p.y.toFixed(3),l+=b?' M '+a.x.toFixed(3)+','+a.y.toFixed(3):' L '+a.x.toFixed(3)+','+a.y.toFixed(3),l+=' A '+u.toFixed(3)+','+u.toFixed(3)+d,l+=w.x.toFixed(3)+','+w.y.toFixed(3),b||(l+=' z'),c.setAttribute('d',l),h&&c.setAttribute('clip-path','url(#'+h+')'),o&&c.setAttribute('class',o),this._applyStyle(c,s),this._appendChild(c),c},n.prototype.drawString=function(n,t,i,r){var u=this._createText(t,n),f;return i&&u.setAttribute('class',i),this._applyStyle(u,r),this._appendChild(u),f=this._getBBox(u),u.setAttribute('y',(t.y-(f.y+f.height-t.y)).toFixed(1)),u},n.prototype.drawStringRotated=function(t,i,r,u,f,e){var o=this._createText(i,t),s,h;return f&&o.setAttribute('class',f),this._applyStyle(o,e),s=document.createElementNS(n.svgNS,'g'),s.setAttribute('transform','rotate('+u.toFixed(1)+','+r.x.toFixed(1)+','+r.y.toFixed(1)+')'),s.appendChild(o),this._appendChild(s),h=this._getBBox(o),o.setAttribute('y',(i.y-(h.y+h.height-i.y)).toFixed(1)),o},n.prototype.measureString=function(n,t,i,r){var u=new wjcCore.Size(0,0),f,e;if(this._fontSize&&this._text.setAttribute('font-size',this._fontSize),this._fontFamily&&this._text.setAttribute('font-family',this._fontFamily),t&&this._text.setAttribute('class',t),i&&this._textGroup.setAttribute('class',i),this._applyStyle(this._text,r),this._setText(this._text,n),f=this._getBBox(this._text),u.width=f.width,u.height=f.height,this._text.removeAttribute('font-size'),this._text.removeAttribute('font-family'),this._text.removeAttribute('class'),r)for(e in r)this._text.removeAttribute(this._deCase(e));return this._textGroup.removeAttribute('class'),this._text.textContent=null,u},n.prototype.startGroup=function(t,i,r){r===void 0&&(r=!1);var u=document.createElementNS(n.svgNS,'g');return t&&u.setAttribute('class',t),i&&u.setAttribute('clip-path','url(#'+i+')'),this._appendChild(u),r&&u.transform.baseVal.appendItem(this._svg.createSVGTransform()),this._group=u,u},n.prototype.endGroup=function(){if(this._group){var n=this._group.parentNode;this._group=n==this._svg?null:n}},n.prototype.drawImage=function(t,i,r,u,f){var e=document.createElementNS(n.svgNS,'image');return e.setAttributeNS(n.xlinkNS,'href',t),e.setAttribute('x',i.toFixed(1)),e.setAttribute('y',r.toFixed(1)),e.setAttribute('width',u.toFixed(1)),e.setAttribute('height',f.toFixed(1)),this._appendChild(e),e},n.prototype._appendChild=function(n){var t=this._group;t||(t=this._svg);t.appendChild(n)},n.prototype._create=function(){this._svg=document.createElementNS(n.svgNS,'svg');this._defs=document.createElementNS(n.svgNS,'defs');this._svg.appendChild(this._defs);this._text=this._createText(new wjcCore.Point(-1e3,-1e3),'');this._textGroup=document.createElementNS(n.svgNS,'g');this._textGroup.appendChild(this._text);this._svg.appendChild(this._textGroup)},n.prototype._setText=function(n,t){var i=t?t.toString():null;if(i&&i.indexOf('tspan')>=0)try{n.textContent=null;for(var u=new DOMParser,f='<svg xmlns="http://www.w3.org/2000/svg\">'+i+'</svg>',e=u.parseFromString(f,'text/xml').documentElement,r=e.firstChild;r;)n.appendChild(n.ownerDocument.importNode(r,!0)),r=r.nextSibling}catch(o){throw new Error('Error parsing XML string.');}else n.textContent=i},n.prototype._createText=function(t,i){var r=document.createElementNS(n.svgNS,'text');return this._setText(r,i),r.setAttribute('fill',this._textFill),r.setAttribute('x',t.x.toFixed(1)),r.setAttribute('y',t.y.toFixed(1)),this._fontSize&&r.setAttribute('font-size',this._fontSize),this._fontFamily&&r.setAttribute('font-family',this._fontFamily),r},n.prototype._applyStyle=function(n,t){if(t)for(var i in t)i==='fill'||i==='stroke'?this._applyColor(n,i,t[i]):n.setAttribute(this._deCase(i),t[i])},n.prototype._deCase=function(n){return n.replace(/[A-Z]/g,function(n){return'-'+n.toLowerCase()})},n.prototype._getBBox=function(t){if(n._isff)try{return t.getBBox()}catch(i){return{x:0,y:0,width:0,height:0}}else return t.getBBox()},n.prototype._applyColor=function(t,i,r){var u=GradientColorUtil.tryParse(r),e,f;u!=null&&(wjcCore.isString(u)?t.setAttribute(i,u):(this._savedGradient[r]==null&&(e='gc'+(1e6*Math.random()).toFixed(),u.x1!=null?(f=document.createElementNS(n.svgNS,'linearGradient'),['x1','y1','x2','y2','gradientUnits'].forEach(function(n){u[n]!=null&&f.setAttribute(n,u[n])})):u.r!=null&&(f=document.createElementNS(n.svgNS,'radialGradient'),['cx','cy','r','fx','fy','fr','gradientUnits'].forEach(function(n){u[n]!=null&&f.setAttribute(n,u[n])})),u.colors&&u.colors&&u.colors.length>0&&u.colors.forEach(function(t){var i=document.createElementNS(n.svgNS,'stop');t.color!=null&&i.setAttribute('stop-color',t.color);t.offset!=null&&i.setAttribute('offset',t.offset);t.opacity!=null&&i.setAttribute('stop-opacity',t.opacity);f.appendChild(i)}),f.setAttribute('id',e),this._defs.appendChild(f),this._savedGradient[r]=e),t.setAttribute(i,'url(#'+this._savedGradient[r]+')')))},n.svgNS='http://www.w3.org/2000/svg',n.xlinkNS='http://www.w3.org/1999/xlink',n}();exports._SvgRenderEngine=_SvgRenderEngine;GradientColorUtil=function(){function n(){}return n.tryParse=function(t){var o;if(n.parsedColor[t])return n.parsedColor[t];if(t==null||t.indexOf('-')===-1)return t;var e=t.replace(/\s+/g,'').split(/\-/g),u=e[0][0],f=!1,i,r=e[0].match(/\(\S+\)/)[0].replace(/[\(\\)]/g,'').split(/\,/g);return u==='l'||u==='L'?(i={x1:'0',y1:'0',x2:'0',y2:'0',colors:[]},u==='l'&&(f=!0),['x1','y1','x2','y2'].forEach(function(n,t){r[t]!=null&&(i[n]=f?+r[t]*100+'%':r[t]+'')})):(u==='r'||u==='R')&&(i={cx:'0',cy:'0',r:'0',colors:[]},u==='r'&&(f=!0),['cx','cy','r','fx','fy','fr'].forEach(function(n,t){r[t]!=null&&r[t]!==''&&(i[n]=f?+r[t]*100+'%':r[t]+'')})),f||(i.gradientUnits="userSpaceOnUse"),n.parsedColor[t]=i,o=e.length-1,e.forEach(function(n,t){n.indexOf(')')>-1&&(n=n.match(/\)\S+/)[0].replace(')',''));var r=n.split(':'),u={color:'black'};r[0]!=null&&(u.color=r[0]);u.offset=r[1]!=null?f?+r[1]*100+'%':r[1]+'':t/o*100+'%';r[2]!=null&&(u.opacity=r[2]);i.colors.push(u)}),i},n.parsedColor={},n}();Legend=function(){function n(n){this._position=Position.Right;this._areas=[];this._sz=new wjcCore.Size;this._colRowLens=[];this._chart=n}return Object.defineProperty(n.prototype,"position",{get:function(){return this._position},set:function(n){this._position!=n&&(this._position=wjcCore.asEnum(n,Position),this._chart&&this._chart.invalidate())},enumerable:!0,configurable:!0}),n.prototype._getDesiredSize=function(n,t,i,r){if(t==Position.None)return null;var u=t==Position.Right||t==Position.Left;if(this._chart instanceof FlexChartCore)this._sz=this._getDesiredSizeSeriesChart(n,u,i,r);else if(this._chart instanceof FlexPie)this._sz=this._getDesiredSizePieChart(n,u,i,r);else return null;return this._sz},n.prototype._getDesiredSizeSeriesChart=function(n,t,i,r){for(var s,l,v,h,o,u=new wjcCore.Size,a=this._chart.series,y=a.length,f=0,e=0,c=0;c<y;c++)if(s=wjcCore.tryCast(a[c],SeriesBase),l=s.visibility,s.name&&l!=SeriesVisibility.Hidden&&l!=SeriesVisibility.Plot)for(v=s.legendItemLength(),h=0;h<v;h++)o=s.measureLegendItem(n,h),t?(f+o.height>r?(u.width+=e,e=0,u.height<f&&(u.height=f),f=0):f+=o.height,e<o.width&&(e=o.width)):(e+o.width>i?(u.height+=f,f=0,u.width<e&&(u.width=e),e=o.width):e+=o.width,f<o.height&&(f=o.height));return t?(u.height<f&&(u.height=f),u.width+=e):(u.width<e&&(u.width=e),u.height+=f),u},n.prototype._renderSeriesChart=function(n,t,i,r,u){for(var f,o,w,a,s,e,y,p=this._chart.series,b=p.length,h=t.clone(),c=0,l=0,v=0;v<b;v++)if(f=wjcCore.tryCast(p[v],SeriesBase),f){if(o=f.visibility,!f.name||o==SeriesVisibility.Hidden||o==SeriesVisibility.Plot){f._legendElement=null;this._areas.push(null);continue}for(w=f.legendItemLength(),a=n.startGroup(f.cssClass),o==SeriesVisibility.Legend?(a.setAttribute('opacity','0.5'),f._legendElement=a):f._legendElement=o==SeriesVisibility.Visible?a:null,s=0;s<w;s++)e=f.measureLegendItem(n,s),i?t.y+e.height>h.y+u&&(t.y=h.y,t.x+=l,l=0):t.x+e.width>h.x+r&&(t.x=h.x,t.y+=c,c=0),y=new wjcCore.Rect(t.x,t.y,e.width,e.height),(o==SeriesVisibility.Legend||o==SeriesVisibility.Visible)&&f.drawLegendItem(n,y,s),this._areas.push(y),i?(t.y+=e.height,l<e.width&&(l=e.width)):(t.x+=e.width,c<e.height&&(c=e.height));n.endGroup()}},n.prototype._getDesiredSizePieChart=function(n,t,i,r){var e=new wjcCore.Size,l=this._chart,h=new wjcCore.Size(i,r),a=l._getLabelsForLegend(),c=a.length,u=0,f=0,s,o;for(this._colRowLens=[],s=0;s<c;s++)o=l._measureLegendItem(n,a[s]),t?(u<o.width&&(u=o.width),f+o.height>h.height&&(e.height=h.height,this._colRowLens.push(u),f=0,u=0),f+=o.height,s===c-1&&(e.height<f&&(e.height=f),this._colRowLens.push(u))):(f<o.height&&(f=o.height),u+o.width>h.width&&(e.width=h.width,this._colRowLens.push(f),f=0,u=0),u+=o.width,s===c-1&&(e.width<u&&(e.width=u),this._colRowLens.push(f))),t?e.width=this._colRowLens.reduce(function(n,t){return n+t},0):e.height=this._colRowLens.reduce(function(n,t){return n+t},0);return e},n.prototype._renderPieChart=function(n,t,i){for(var u,c,e=this._chart,o=e._rectLegend,h=e._getLabelsForLegend(),l=h.length,s=0,r=t.clone(),f=0;f<l;f++)u=e._measureLegendItem(n,h[f]),i?r.y+u.height>o.top+o.height+1&&(r.x+=this._colRowLens[s],s++,r.y=t.y):r.x+u.width>o.left+o.width+1&&(r.y+=this._colRowLens[s],s++,r.x=t.x),c=new wjcCore.Rect(r.x,r.y,u.width,u.height),e._drawLegendItem(n,c,f,h[f]),this._areas.push(c),i?r.y+=u.height:r.x+=u.width},n.prototype._getPosition=function(n,t){return this.position==Position.Auto?n>=t?Position.Right:Position.Bottom:this.position},n.prototype._render=function(n,t,i,r,u){this._areas=[];var f=i==Position.Right||i==Position.Left;if(n.fill='transparent',n.stroke=null,n.drawRect(t.x,t.y,this._sz.width,this._sz.height),this._chart instanceof FlexChartCore)this._renderSeriesChart(n,t,f,r,u);else if(this._chart instanceof FlexPie)this._renderPieChart(n,t,f);else return null},n.prototype._hitTest=function(n){for(var i=this._areas,t=0;t<i.length;t++)if(i[t]&&FlexChartCore._contains(i[t],n))return t;return null},n}();exports.Legend=Legend,function(n){n[n.PlotArea=0]="PlotArea";n[n.AxisX=1]="AxisX";n[n.AxisY=2]="AxisY";n[n.ChartArea=3]="ChartArea";n[n.Legend=4]="Legend";n[n.Header=5]="Header";n[n.Footer=6]="Footer";n[n.Series=7]="Series";n[n.SeriesSymbol=8]="SeriesSymbol";n[n.DataLabel=9]="DataLabel";n[n.None=10]="None"}(exports.ChartElement||(exports.ChartElement={}));ChartElement=exports.ChartElement;HitTestInfo=function(){function n(n,t,i){this._pointIndex=null;this._chartElement=ChartElement.None;this._chart=n;this._pt=t;this._chartElement=i}return Object.defineProperty(n.prototype,"point",{get:function(){return this._pt},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"series",{get:function(){return this._series},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"pointIndex",{get:function(){return this._pointIndex},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"chartElement",{get:function(){return this._chartElement},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"distance",{get:function(){return this._dist},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"item",{get:function(){if(this._item==null&&this.pointIndex!==null)if(this.series!=null)this._item=this.series._getItem(this.pointIndex);else if(this._chart instanceof FlexPie){var t=this._chart,n=null;n=t._cv!=null?t._cv.items:t.itemsSource;n&&this.pointIndex<n.length&&(this._item=n[this.pointIndex])}return this._item},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"x",{get:function(){return this._x===undefined&&(this._x=this._getValue(1,!1)),this._x},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this._y===undefined&&(this._y=this._getValue(0,!1)),this._y},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){if(this._chart instanceof FlexPie){var n=this._chart;return n._values[this.pointIndex]}return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"name",{get:function(){if(this._name===undefined){if(this._chart instanceof FlexPie){var n=this._chart;return n._labels[this.pointIndex]}return this.series.name}return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"_xfmt",{get:function(){return this.__xfmt===undefined&&(this.__xfmt=this._getValue(1,!0)),this.__xfmt},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"_yfmt",{get:function(){return this.__yfmt===undefined&&(this.__yfmt=this._getValue(0,!0)),this.__yfmt},enumerable:!0,configurable:!0}),n.prototype._setData=function(n,t){this._series=n;this._pointIndex=t},n.prototype._setDataPoint=function(n){if(n=wjcCore.asType(n,_DataPoint,!0),n){this._pointIndex=n.pointIndex;var i=wjcCore.asType(this._chart,FlexChartCore,!0),t=n.seriesIndex;t!==null&&t>=0&&t<i.series.length&&(this._series=i.series[t]);n.item!=null&&(this._item=n.item);n.x!=null&&(this._x=n.x);n.y!=null&&(this._y=n.y);n.xfmt!=null&&(this.__xfmt=n.xfmt);n.yfmt!=null&&(this.__yfmt=n.yfmt);n.name!=null&&(this._name=n.name)}},n.prototype._getValue=function(n,t){var e,f,o;if(this._chart instanceof FlexPie)return e=this._chart,e._values[this.pointIndex];var i=null,r=this._chart,u=this.pointIndex,s=r._isRotated();return this.series!==null&&u!==null&&(f=this.series.getValues(n),o=this.series.getDataType(n),f&&this.pointIndex<f.length?(i=f[this.pointIndex],o!=wjcCore.DataType.Date||t||(i=new Date(i))):n==1&&(r._xlabels&&r._xlabels.length>0&&u<r._xlabels.length?i=r._xlabels[u]:r._xvals&&u<r._xvals.length&&(i=r._xvals[u],r._xDataType!=wjcCore.DataType.Date||t||(i=new Date(i))))),i!==null&&t&&(s?n==0?i=r.axisX._formatValue(i):n==1&&(i=r.axisY._formatValue(i)):n==0?i=r.axisY._formatValue(i):n==1&&(i=r.axisX._formatValue(i))),i},n}();exports.HitTestInfo=HitTestInfo;Palettes=function(){function n(){}return n.standard=['#88bde6','#fbb258','#90cd97','#f6aac9','#bfa554','#bc99c7','#eddd46','#f07e6e','#8c8c8c'],n.cocoa=['#466bb0','#c8b422','#14886e','#b54836','#6e5944','#8b3872','#73b22b','#b87320','#141414'],n.coral=['#84d0e0','#f48256','#95c78c','#efa5d6','#ba8452','#ab95c2','#ede9d0','#e96b7d','#888888'],n.dark=['#005fad','#f06400','#009330','#e400b1','#b65800','#6a279c','#d5a211','#dc0127','#000000'],n.highcontrast=['#ff82b0','#0dda2c','#0021ab','#bcf28c','#19c23b','#890d3a','#607efd','#1b7700','#000000'],n.light=['#ddca9a','#778deb','#cb9fbb','#b5eae2','#7270be','#a6c7a7','#9e95c7','#95b0c7','#9b9b9b'],n.midnight=['#83aaca','#e37849','#14a46a','#e097da','#a26d54','#a584b7','#d89c54','#e86996','#2c343b'],n.modern=['#2d9fc7','#ec993c','#89c235','#e377a4','#a68931','#a672a6','#d0c041','#e35855','#68706a'],n.organic=['#9c88d9','#a3d767','#8ec3c0','#e9c3a9','#91ab36','#d4ccc0','#61bbd8','#e2d76f','#80715a'],n.slate=['#7493cd','#f99820','#71b486','#e4a491','#cb883b','#ae83a4','#bacc5c','#e5746a','#505d65'],n.zen=['#7bb5ae','#e2d287','#92b8da','#eac4cb','#7b8bbd','#c7d189','#b9a0c8','#dfb397','#a9a9a9'],n.cyborg=['#2a9fd6','#77b300','#9933cc','#ff8800','#cc0000','#00cca3','#3d6dcc','#525252','#000000'],n.superhero=['#5cb85c','#f0ad4e','#5bc0de','#d9534f','#9f5bde','#46db8c','#b6b86e','#4e5d6c','#2b3e4b'],n.flatly=['#18bc9c','#3498db','#f39c12','#6cc1be','#99a549','#8f54b5','#e74c3c','#8a9899','#2c3e50'],n.darkly=['#375a7f','#00bc8c','#3498db','#f39c12','#e74c3c','#8f61b3','#b08725','#4a4949','#000000'],n.cerulan=['#033e76','#87c048','#59822c','#53b3eb','#fc6506','#d42323','#e3bb00','#cccccc','#222222'],n}();exports.Palettes=Palettes;_Spline=function(){function n(n,t){var o,i;if(this.k=.002,this._a=[],this._b=[],this._c=[],this._d=[],this.m=[[-1*.5,3*.5,-3*.5,1*.5],[2*.5,-5*.5,4*.5,-1*.5],[-1*.5,0,1*.5,0],[0,2*.5,0,0],],this._x=n,this._y=t,o=this._len=Math.min(n.length,t.length),o>3)for(i=0;i<o-1;i++){var r=i==0?new wjcCore.Point(n[i],t[i]):new wjcCore.Point(n[i-1],t[i-1]),u=new wjcCore.Point(n[i],t[i]),f=new wjcCore.Point(n[i+1],t[i+1]),e=i==o-2?new wjcCore.Point(n[i+1],t[i+1]):new wjcCore.Point(n[i+2],t[i+2]),s=new wjcCore.Point,h=new wjcCore.Point,c=new wjcCore.Point,l=new wjcCore.Point;s.x=r.x*this.m[0][0]+u.x*this.m[0][1]+f.x*this.m[0][2]+e.x*this.m[0][3];h.x=r.x*this.m[1][0]+u.x*this.m[1][1]+f.x*this.m[1][2]+e.x*this.m[1][3];c.x=r.x*this.m[2][0]+u.x*this.m[2][1]+f.x*this.m[2][2]+e.x*this.m[2][3];l.x=r.x*this.m[3][0]+u.x*this.m[3][1]+f.x*this.m[3][2]+e.x*this.m[3][3];s.y=r.y*this.m[0][0]+u.y*this.m[0][1]+f.y*this.m[0][2]+e.y*this.m[0][3];h.y=r.y*this.m[1][0]+u.y*this.m[1][1]+f.y*this.m[1][2]+e.y*this.m[1][3];c.y=r.y*this.m[2][0]+u.y*this.m[2][1]+f.y*this.m[2][2]+e.y*this.m[2][3];l.y=r.y*this.m[3][0]+u.y*this.m[3][1]+f.y*this.m[3][2]+e.y*this.m[3][3];this._a.push(s);this._b.push(h);this._c.push(c);this._d.push(l)}}return n.prototype.calculatePoint=function(n){var t=Math.floor(n);t<0&&(t=0);t>this._len-2&&(t=this._len-2);var i=n-t,r=((this._a[t].x*i+this._b[t].x)*i+this._c[t].x)*i+this._d[t].x,u=((this._a[t].y*i+this._b[t].y)*i+this._c[t].y)*i+this._d[t].y;return{x:r,y:u}},n.prototype.calculate=function(){var f,e,i,n;if(this._len<=3)return{xs:this._x,ys:this._y};var r=[],u=[],t=this.calculatePoint(0);for(r.push(t.x),u.push(t.y),f=this._len*this.k,e=3,i=f;i<=this._len-1;i+=f)n=this.calculatePoint(i),(Math.abs(t.x-n.x)>=e||Math.abs(t.y-n.y)>=e)&&(r.push(n.x),u.push(n.y),t=n);return{xs:r,ys:u}},n}();exports._Spline=_Spline,function(n){n[n.None=0]="None";n[n.Left=1]="Left";n[n.Top=2]="Top";n[n.Right=3]="Right";n[n.Bottom=4]="Bottom";n[n.Center=5]="Center"}(exports.LabelPosition||(exports.LabelPosition={}));LabelPosition=exports.LabelPosition,function(n){n[n.None=0]="None";n[n.Inside=1]="Inside";n[n.Center=2]="Center";n[n.Outside=3]="Outside"}(exports.PieLabelPosition||(exports.PieLabelPosition={}));PieLabelPosition=exports.PieLabelPosition;DataLabelRenderEventArgs=function(n){function t(t,i,r,u){n.call(this,t);this.cancel=!1;this._ht=i;this._pt=r;this._text=u}return __extends(t,n),Object.defineProperty(t.prototype,"point",{get:function(){return this._pt},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hitTestInfo",{get:function(){return this._ht},enumerable:!0,configurable:!0}),t}(RenderEventArgs);exports.DataLabelRenderEventArgs=DataLabelRenderEventArgs;DataLabelBase=function(){function n(){this.rendering=new wjcCore.Event}return Object.defineProperty(n.prototype,"content",{get:function(){return this._content},set:function(n){n!=this._content&&(this._content=n,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"border",{get:function(){return this._bdr},set:function(n){n!=this._bdr&&(this._bdr=wjcCore.asBoolean(n,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"offset",{get:function(){return this._off},set:function(n){n!=this._off&&(this._off=wjcCore.asNumber(n,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"connectingLine",{get:function(){return this._line},set:function(n){n!=this._line&&(this._line=wjcCore.asBoolean(n,!0),this._invalidate())},enumerable:!0,configurable:!0}),n.prototype.onRendering=function(n){return this.rendering.raise(this,n),n.cancel},n.prototype._invalidate=function(){this._chart&&this._chart.invalidate()},n}();exports.DataLabelBase=DataLabelBase;DataLabel=function(n){function t(){n.apply(this,arguments);this._pos=LabelPosition.Top}return __extends(t,n),Object.defineProperty(t.prototype,"position",{get:function(){return this._pos},set:function(n){n!=this._pos&&(this._pos=wjcCore.asEnum(n,LabelPosition),this._invalidate())},enumerable:!0,configurable:!0}),t}(DataLabelBase);exports.DataLabel=DataLabel;PieDataLabel=function(n){function t(){n.apply(this,arguments);this._pos=PieLabelPosition.Center}return __extends(t,n),Object.defineProperty(t.prototype,"position",{get:function(){return this._pos},set:function(n){n!=this._pos&&(this._pos=wjcCore.asEnum(n,PieLabelPosition),this._invalidate())},enumerable:!0,configurable:!0}),t}(DataLabelBase);exports.PieDataLabel=PieDataLabel;LineMarkers=function(){function n(){this._moveMarker=function(n){var r=n.currentTarget,u=this._markers,t=r.getAttribute('data-markerIndex'),i;t!=null&&(i=u[t],i.forEach(function(t){t._moveMarker(n)}))};this._markers=[];this._bindMoveMarker=this._moveMarker.bind(this)}return n.prototype.attach=function(n){var i=n.chart.hostElement,r=this._markers,u=i.getAttribute('data-markerIndex'),f,t;u!=null?(t=r[u],t&&wjcCore.isArray(t)?t.push(n):(r[u]=[n],this._bindMoveEvent(i))):(f=r.length,t=[n],r.push(t),i.setAttribute('data-markerIndex',f),this._bindMoveEvent(i))},n.prototype.detach=function(n){var u=n.chart.hostElement,r=this._markers,f=u.getAttribute('data-markerIndex'),t,i;f!=null&&(i=r[f],t=i.indexOf(n),t>-1&&i.splice(t,1),i.length===0&&(t=r.indexOf(i),t>-1&&(r[t]=undefined),this._unbindMoveEvent(u)))},n.prototype._unbindMoveEvent=function(n){var t=this._bindMoveMarker;n.removeEventListener('mousemove',t);'ontouchstart'in window&&n.removeEventListener('touchmove',t)},n.prototype._bindMoveEvent=function(n){var t=this._bindMoveMarker;n.addEventListener('mousemove',t);'ontouchstart'in window&&n.addEventListener('touchmove',t)},n}();lineMarkers=new LineMarkers,function(n){n[n.None=0]="None";n[n.Vertical=1]="Vertical";n[n.Horizontal=2]="Horizontal";n[n.Both=3]="Both"}(exports.LineMarkerLines||(exports.LineMarkerLines={}));LineMarkerLines=exports.LineMarkerLines,function(n){n[n.None=0]="None";n[n.Move=1]="Move";n[n.Drag=2]="Drag"}(exports.LineMarkerInteraction||(exports.LineMarkerInteraction={}));LineMarkerInteraction=exports.LineMarkerInteraction,function(n){n[n.Auto=2]="Auto";n[n.Right=0]="Right";n[n.Left=1]="Left";n[n.Bottom=4]="Bottom";n[n.Top=6]="Top"}(exports.LineMarkerAlignment||(exports.LineMarkerAlignment={}));LineMarkerAlignment=exports.LineMarkerAlignment;LineMarker=function(){function n(n,t){this._wrapperMousedown=null;this._wrapperMouseup=null;this.positionChanged=new wjcCore.Event;var i=this;i._chart=n;n.rendered.addHandler(i._initialize,i);i._resetDefaultValue();wjcCore.copy(this,t);i._initialize()}return Object.defineProperty(n.prototype,"chart",{get:function(){return this._chart},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isVisible",{get:function(){return this._isVisible},set:function(n){var t=this;n!==t._isVisible&&(t._isVisible=wjcCore.asBoolean(n),t._marker)&&t._toggleVisibility()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"seriesIndex",{get:function(){return this._seriesIndex},set:function(n){var t=this;n!==t._seriesIndex&&(t._seriesIndex=wjcCore.asNumber(n,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"horizontalPosition",{get:function(){return this._horizontalPosition},set:function(n){var t=this;if(n!==t._horizontalPosition){if(t._horizontalPosition=wjcCore.asNumber(n,!0),t._horizontalPosition<0||t._horizontalPosition>1)throw'horizontalPosition\'s value should be in (0, 1).';t._marker&&t._updateMarkerPosition()}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"x",{get:function(){var n=this,t=n._targetPoint.x-n._plotRect.left,i=n._chart.axisX;return i.convertBack(t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){var n=this,t=n._targetPoint.y-n._plotRect.top,i=n._chart.axisY;return i.convertBack(t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"content",{get:function(){return this._content},set:function(n){n!==this._content&&(this._content=wjcCore.asFunction(n),this._updateMarkerPosition())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"verticalPosition",{get:function(){return this._verticalPosition},set:function(n){var t=this;if(n!==t._verticalPosition){if(t._verticalPosition=wjcCore.asNumber(n,!0),t._verticalPosition<0||t._verticalPosition>1)throw'verticalPosition\'s value should be in (0, 1).';t._marker&&t._updateMarkerPosition()}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"alignment",{get:function(){return this._alignment},set:function(n){var t=this;n!==t._alignment&&(t._alignment=n,t._marker)&&t._updatePositionByAlignment()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"lines",{get:function(){return this._lines},set:function(n){var t=this;n!==t._lines&&(t._lines=wjcCore.asEnum(n,LineMarkerLines),t._marker)&&t._resetLinesVisibility()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"interaction",{get:function(){return this._interaction},set:function(n){var t=this;n!==t._interaction&&(t._marker&&t._detach(),t._interaction=wjcCore.asEnum(n,LineMarkerInteraction),t._marker&&t._attach(),t._toggleElesDraggableClass(t._interaction===LineMarkerInteraction.Drag))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"dragThreshold",{get:function(){return this._dragThreshold},set:function(n){n!=this._dragThreshold&&(this._dragThreshold=wjcCore.asNumber(n))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"dragContent",{get:function(){return this._dragContent},set:function(t){var i=this;t!==i._dragContent&&(i._dragContent=wjcCore.asBoolean(t));wjcCore.toggleClass(i._dragEle,n._CSS_LINE_DRAGGABLE,i._interaction===LineMarkerInteraction.Drag&&i._dragContent&&i._lines!==LineMarkerLines.None)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"dragLines",{get:function(){return this._dragLines},set:function(n){n!=this._dragLines&&(this._dragLines=wjcCore.asBoolean(n))},enumerable:!0,configurable:!0}),n.prototype.onPositionChanged=function(n){this.positionChanged.raise(this,n)},n.prototype.remove=function(){var n=this,t=n._chart;n._marker&&(t.rendered.removeHandler(n._initialize,n),n._detach(),n._removeMarker(),n._wrapperMoveMarker=null,n._wrapperMousedown=null,n._wrapperMouseup=null)},n.prototype._attach=function(){var t=this,i=t._chart.hostElement;this._interaction!==LineMarkerInteraction.None?wjcCore.addClass(i,n._CSS_TOUCH_DISABLED):wjcCore.removeClass(i,n._CSS_TOUCH_DISABLED);lineMarkers.attach(t);t._attachDrag()},n.prototype._attachDrag=function(){var n=this;n._interaction===LineMarkerInteraction.Drag&&(n._wrapperMousedown||(n._wrapperMousedown=n._onMousedown.bind(n)),n._wrapperMouseup||(n._wrapperMouseup=n._onMouseup.bind(n)),n._toggleDragEventAttach(!0))},n.prototype._detach=function(){var t=this;wjcCore.removeClass(t._chart.hostElement,n._CSS_TOUCH_DISABLED);lineMarkers.detach(t);t._detachDrag()},n.prototype._detachDrag=function(){var n=this;n._interaction===LineMarkerInteraction.Drag&&n._toggleDragEventAttach(!1)},n.prototype._toggleDragEventAttach=function(n){var t=this,r=t._chart.hostElement,i=n?'addEventListener':'removeEventListener';r[i]('mousedown',t._wrapperMousedown);document[i]('mouseup',t._wrapperMouseup);'ontouchstart'in window&&r[i]('touchstart',t._wrapperMousedown);'ontouchend'in window&&document[i]('touchend',t._wrapperMouseup)},n.prototype._onMousedown=function(t){var i=this,r=i._getEventPoint(t),u,f,e,o,s;i._interaction===LineMarkerInteraction.Drag&&(u=wjcCore.getElementRect(i._hLine),o=!(u.width===0||u.height===0),f=wjcCore.getElementRect(i._vLine),s=!(f.width===0||f.height===0),e=wjcCore.getElementRect(i._markerContent),i._dragContent&&i._pointInRect(r,e)?(i._capturedEle=i._markerContent,i._contentDragStartPoint=new wjcCore.Point(r.x,r.y),i._mouseDownCrossPoint=new wjcCore.Point(i._targetPoint.x,i._targetPoint.y)):o&&(Math.abs(u.top-r.y)<=i._dragThreshold||Math.abs(r.y-u.top-u.height)<=i._dragThreshold||r.y>=u.top&&r.y<=u.top+u.height)?(i._capturedEle=i._hLine,i._contentDragStartPoint=undefined,wjcCore.addClass(i._chart.hostElement,n._CSS_LINE_DRAGGABLE)):s&&(Math.abs(f.left-r.x)<=i._dragThreshold||Math.abs(r.x-f.left-f.width)<=i._dragThreshold||r.x>=f.left&&r.x<=f.left+f.width)&&(i._capturedEle=i._vLine,i._contentDragStartPoint=undefined,wjcCore.addClass(i._chart.hostElement,n._CSS_LINE_DRAGGABLE)),t.preventDefault())},n.prototype._onMouseup=function(){var t=this,i=t._alignment===LineMarkerAlignment.Auto&&t._capturedEle===t._markerContent&&t._lines!==LineMarkerLines.None;t._capturedEle=undefined;t._contentDragStartPoint=undefined;t._mouseDownCrossPoint=undefined;i&&(t._updatePositionByAlignment(),t._updatePositionByAlignment());wjcCore.removeClass(t._chart.hostElement,n._CSS_LINE_DRAGGABLE)},n.prototype._moveMarker=function(n){var t=this,f=t._chart,i=t._getEventPoint(n),r=t._plotRect,s=t._interaction===LineMarkerInteraction.Drag,h=t._lines===LineMarkerLines.Horizontal,c=t._lines===LineMarkerLines.Vertical,e=t._seriesIndex,o,l=wjcCore.getElementRect(f.hostElement),u,a,v,y,p;if(r&&t._isVisible&&t._interaction!==LineMarkerInteraction.None&&(t._interaction!==LineMarkerInteraction.Drag||t._capturedEle&&t._lines!==LineMarkerLines.None)){if(s&&(t._contentDragStartPoint?(i.x=h?t._targetPoint.x:t._mouseDownCrossPoint.x+i.x-t._contentDragStartPoint.x,i.y=c?t._targetPoint.y:t._mouseDownCrossPoint.y+i.y-t._contentDragStartPoint.y):h||!t._dragLines&&t._capturedEle===t._hLine?i.x=t._targetPoint.x:(c||!t._dragLines&&t._capturedEle===t._vLine)&&(i.y=t._targetPoint.y)),s&&t._lines===LineMarkerLines.Horizontal||!t._dragLines&&t._capturedEle===t._hLine){if(i.y<=r.top||i.y>=r.top+r.height)return}else if(s&&t._lines===LineMarkerLines.Vertical||!t._dragLines&&t._capturedEle===t._vLine){if(i.x<=r.left||i.x>=r.left+r.width)return}else if(i.x<=r.left||i.y<=r.top||i.x>=r.left+r.width||i.y>=r.top+r.height)return;if(e!=null&&e>=0&&e<f.series.length){if(o=f.series[e],u=o.hitTest(new wjcCore.Point(i.x,NaN)),u==null||u.x==null||u.y==null)return;a=o.axisX||f.axisX;v=o._getAxisY();y=wjcCore.isDate(u.x)?FlexChart._toOADate(u.x):u.x;p=wjcCore.isDate(u.y)?FlexChart._toOADate(u.y):u.y;i.x=a.convert(y)+l.left;i.y=v.convert(p)+l.top}t._updateMarkerPosition(i);n.preventDefault()}},n.prototype._show=function(n){var t=n?n:this._marker;t.style.display='block'},n.prototype._hide=function(n){var t=n?n:this._marker;t.style.display='none'},n.prototype._toggleVisibility=function(){this._isVisible?this._show():this._hide()},n.prototype._resetDefaultValue=function(){var n=this;n._isVisible=!0;n._alignment=LineMarkerAlignment.Auto;n._lines=LineMarkerLines.None;n._interaction=LineMarkerInteraction.None;n._horizontalPosition=null;n._verticalPosition=null;n._content=null;n._seriesIndex=null;n._dragThreshold=15;n._dragContent=!1;n._dragLines=!1;n._targetPoint=new wjcCore.Point},n.prototype._initialize=function(){var n=this,t=n._chart.hostElement.querySelector("."+FlexChart._CSS_PLOT_AREA),i;n._plot=t;n._marker||n._createMarker();t&&(n._plotRect=wjcCore.getElementRect(t),i=t.getBBox(),n._plotRect.width=i.width,n._plotRect.height=i.height,n._updateMarkerSize(),n._updateLinesSize());n._updateMarkerPosition();n._wrapperMoveMarker=n._moveMarker.bind(n);n._attach()},n.prototype._createMarker=function(){var t=this,i,r;i=document.createElement('div');wjcCore.addClass(i,n._CSS_MARKER);r=t._getContainer();r.appendChild(i);t._markerContainer=r;t._marker=i;t._createChildren()},n.prototype._removeMarker=function(){var n=this,t=n._markerContainer;t.removeChild(n._marker);n._content=null;n._hLine=null;n._vLine=null;t.hasChildNodes()||(n._chart.hostElement.removeChild(n._markerContainer),n._markerContainer=null);n._marker=null},n.prototype._getContainer=function(){var t=this._chart.hostElement.querySelector(n._CSS_MARKER_CONTAINER);return t||(t=this._createContainer()),t},n.prototype._createContainer=function(){var t=document.createElement('div'),i=this._chart.hostElement;return wjcCore.addClass(t,n._CSS_MARKER_CONTAINER),i.insertBefore(t,i.firstChild),t},n.prototype._createChildren=function(){var t=this,r=t._marker,u,f,e,i;i=document.createElement('div');i.style.position='absolute';i.style.height='100%';i.style.width='100%';r.appendChild(i);t._dragEle=i;u=document.createElement('div');wjcCore.addClass(u,n._CSS_MARKER_CONTENT);r.appendChild(u);t._markerContent=u;f=document.createElement('div');wjcCore.addClass(f,n._CSS_MARKER_HLINE);r.appendChild(f);t._hLine=f;e=document.createElement('div');wjcCore.addClass(e,n._CSS_MARKER_VLINE);r.appendChild(e);t._vLine=e;t._toggleElesDraggableClass(t._interaction===LineMarkerInteraction.Drag);t._resetLinesVisibility()},n.prototype._toggleElesDraggableClass=function(t){var i=this;wjcCore.toggleClass(i._hLine,n._CSS_LINE_DRAGGABLE,t);wjcCore.toggleClass(i._vLine,n._CSS_LINE_DRAGGABLE,t);wjcCore.toggleClass(i._dragEle,n._CSS_LINE_DRAGGABLE,t&&i._dragContent&&i._lines!==LineMarkerLines.None)},n.prototype._updateMarkerSize=function(){var n=this,t=n._plotRect,i=n._chart.hostElement,r=window.getComputedStyle(i,null),u=wjcCore.getElementRect(i);n._marker&&(n._marker.style.marginTop=t.top-u.top-(parseFloat(r.getPropertyValue('padding-top'))||0)+'px',n._marker.style.marginLeft=t.left-u.left-(parseFloat(r.getPropertyValue('padding-left'))||0)+'px')},n.prototype._updateLinesSize=function(){var n=this,t=n._plotRect;n._hLine&&n._vLine&&(n._hLine.style.width=t.width+'px',n._vLine.style.height=t.height+'px')},n.prototype._resetLinesVisibility=function(){var n=this;n._hLine&&n._vLine&&(n._hide(n._hLine),n._hide(n._vLine),(n._lines===LineMarkerLines.Horizontal||n._lines===LineMarkerLines.Both)&&n._show(n._hLine),(n._lines===LineMarkerLines.Vertical||n._lines===LineMarkerLines.Both)&&n._show(n._vLine))},n.prototype._updateMarkerPosition=function(n){var t=this,u=t._plotRect,f=t._targetPoint,i,r,e=!1,o=t._interaction===LineMarkerInteraction.Drag;t._plot&&(i=u.left+u.width*(t._horizontalPosition||0),r=u.top+u.height*(t._verticalPosition||0),t._horizontalPosition==null&&n&&(i=n.x),t._verticalPosition==null&&n&&(r=n.y),(i!==f.x||r!==f.y)&&(e=!0),f.x=i,f.y=r,t._toggleVisibility(),t._content&&t._updateContent(),e&&t._raisePositionChanged(i,r),t._updatePositionByAlignment(n?!0:!1))},n.prototype._updateContent=function(){var n=this,r=n._chart,t=n._targetPoint,u=r.hitTest(t),i;i=n._content.call(null,u,t);n._markerContent.innerHTML=i||''},n.prototype._raisePositionChanged=function(n,t){var i=this._plotRect;this.onPositionChanged(new wjcCore.Point(n,t))},n.prototype._updatePositionByAlignment=function(){var n=this,s=n._alignment,r=n._targetPoint,e=n._marker,t=0,i=0,f=e.clientWidth,o=e.clientHeight,u=n._plotRect,h=12;n._plot&&(!n._capturedEle||n._capturedEle&&n._capturedEle!==n._markerContent?(s===LineMarkerAlignment.Auto?(r.x+f+h>u.left+u.width&&r.x-f>=0&&(i=f),t=o,r.y-o<u.top&&(t=0)):((1&s)==1&&(i=f),(2&s)==2&&(t=o)),n._interaction===LineMarkerInteraction.Move&&t===0&&i===0&&(i=-h)):(parseInt(n._hLine.style.top)>0&&(t=o),parseInt(n._vLine.style.left)>0&&(i=f)),e.style.left=r.x-i-u.left+'px',e.style.top=r.y-t-u.top+'px',n._hLine.style.top=t+'px',n._hLine.style.left=u.left-r.x+i+'px',n._vLine.style.top=u.top-r.y+t+'px',n._vLine.style.left=i+'px')},n.prototype._getEventPoint=function(n){return n instanceof MouseEvent?new wjcCore.Point(n.pageX,n.pageY):new wjcCore.Point(n.changedTouches[0].pageX,n.changedTouches[0].pageY)},n.prototype._pointInRect=function(n,t){return!n||!t?!1:n.x>=t.left&&n.x<=t.left+t.width&&n.y>=t.top&&n.y<=t.top+t.height?!0:!1},n._CSS_MARKER='wj-chart-linemarker',n._CSS_MARKER_HLINE='wj-chart-linemarker-hline',n._CSS_MARKER_VLINE='wj-chart-linemarker-vline',n._CSS_MARKER_CONTENT='wj-chart-linemarker-content',n._CSS_MARKER_CONTAINER='wj-chart-linemarker-container',n._CSS_LINE_DRAGGABLE='wj-chart-linemarker-draggable',n._CSS_TOUCH_DISABLED='wj-flexchart-touch-disabled',n}();exports.LineMarker=LineMarker;_DataPoint=function(){function n(n,t,i,r){this._seriesIndex=n;this._pointIndex=t;this._dataX=i;this._dataY=r}return Object.defineProperty(n.prototype,"seriesIndex",{get:function(){return this._seriesIndex},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"pointIndex",{get:function(){return this._pointIndex},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"dataX",{get:function(){return this._dataX},set:function(n){n!==this._dataX&&(this._dataX=n)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"dataY",{get:function(){return this._dataY},set:function(n){n!==this._dataY&&(this._dataY=n)},enumerable:!0,configurable:!0}),n}();exports._DataPoint=_DataPoint,function(n){n[n.X=0]="X";n[n.Y=1]="Y";n[n.XY=2]="XY"}(exports._MeasureOption||(exports._MeasureOption={}));_MeasureOption=exports._MeasureOption;_RectArea=function(){function n(n){this._rect=n}return Object.defineProperty(n.prototype,"rect",{get:function(){return this._rect},enumerable:!0,configurable:!0}),n.prototype.contains=function(n){var t=this._rect;return n.x>=t.left&&n.x<=t.right&&n.y>=t.top&&n.y<=t.bottom},n.prototype.pointDistance=function(n,t,i){var r=t.x-n.x,u=t.y-n.y;return i==_MeasureOption.X?Math.abs(r):i==_MeasureOption.Y?Math.abs(u):Math.sqrt(r*r+u*u)},n.prototype.distance=function(n){var i=_MeasureOption.XY,t;return n.x===null?i=_MeasureOption.Y:n.y===null&&(i=_MeasureOption.X),t=this._rect,n.x<t.left?n.y<t.top?this.pointDistance(n,new wjcCore.Point(t.left,t.top),i):n.y>t.bottom?this.pointDistance(n,new wjcCore.Point(t.left,t.bottom),i):i==_MeasureOption.Y?0:t.left-n.x:n.x>t.right?n.y<t.top?this.pointDistance(n,new wjcCore.Point(t.right,t.top),i):n.y>t.bottom?this.pointDistance(n,new wjcCore.Point(t.right,t.bottom),i):i==_MeasureOption.Y?0:n.x-t.right:i==_MeasureOption.X?0:n.y<t.top?t.top-n.y:n.y>t.bottom?n.y-t.bottom:0},n}();exports._RectArea=_RectArea;_CircleArea=function(){function n(n,t){this._center=n;this.setRadius(t)}return n.prototype.setRadius=function(n){this._rad=n;this._rad2=n*n},Object.defineProperty(n.prototype,"center",{get:function(){return this._center},enumerable:!0,configurable:!0}),n.prototype.contains=function(n){var t=this._center.x-n.x,i=this._center.y-n.y;return t*t+i*i<=this._rad2},n.prototype.distance=function(n){var t=isNaN(n.x)?0:this._center.x-n.x,i=isNaN(n.y)?0:this._center.y-n.y,r=t*t+i*i;return r<=this._rad2?0:Math.sqrt(r)-this._rad},n}();exports._CircleArea=_CircleArea;_LinesArea=function(){function n(n,t){this._x=[];this._y=[];this._x=n;this._y=t}return n.prototype.contains=function(){return!1},n.prototype.distance=function(n){for(var r,i=NaN,t=0;t<this._x.length-1;t++)r=FlexChart._dist(n,new wjcCore.Point(this._x[t],this._y[t]),new wjcCore.Point(this._x[t+1],this._y[t+1])),(isNaN(i)||r<i)&&(i=r);return i},n}();exports._LinesArea=_LinesArea;_HitResult=function(){function n(){}return n}();exports._HitResult=_HitResult;_HitTester=function(){function n(n){this._map={};this._chart=n}return n.prototype.add=function(n,t){this._map[t]&&(n.tag||(n.tag=new _DataPoint(t,NaN,NaN,NaN)),this._map[t].push(n))},n.prototype.clear=function(){var t,n;for(this._map={},t=this._chart.series,n=0;n<t.length;n++)t[n].hitTest===Series.prototype.hitTest&&(this._map[n]=[])},n.prototype.hitTest=function(n,t){var r,u,c,f,e,h,o;t===void 0&&(t=!1);var s=null,i=Number.MAX_VALUE,l=this._chart.series;for(r=l.length-1;r>=0;r--)if(u=this._map[r],u){for(c=u.length,f=c-1;f>=0;f--)if((e=u[f],!wjcCore.tryCast(e,_LinesArea)||t)&&(h=e.distance(n),h<i&&(i=h,s=e,i==0)))break;if(i==0)break}return s?(o=new _HitResult,o.area=s,o.distance=i,o):null},n.prototype.hitTestSeries=function(n,t){var f=null,i=Number.MAX_VALUE,e=this._map[t],h,r,o,s,u;if(e)for(h=e.length,r=h-1;r>=0;r--)if(o=e[r],s=o.distance(n),s<i&&(i=s,f=o,i==0))break;return f?(u=new _HitResult,u.area=f,u.distance=i,u):null},n}();exports._HitTester=_HitTester;_BasePlotter=function(){function n(){this._DEFAULT_WIDTH=2;this._DEFAULT_SYM_SIZE=10;this.clipping=!0}return n.prototype.clear=function(){this.seriesCount=0;this.seriesIndex=0},n.prototype._renderLabels=function(n,t,i,r,u){var c=i.length,f=r.dataLabel,l=f.border,e=f.offset,a=f.connectingLine,o,s,h;for(e===undefined&&(e=a?16:0),l&&(e-=2),o=0;o<c;o++)s=i[o],h=wjcCore.asType(s.tag,_DataPoint,!0),h&&this._renderLabel(n,s,h,r,f,t,e,u)},n.prototype._renderLabel=function(n,t,i,r,u,f,e,o){var y=u.position,p=u.border,w=u.connectingLine,l=new HitTestInfo(r,s),h,s,c,a,v;(l._setDataPoint(i),h=r._getLabelContent(l,u.content),s=this._getLabelPoint(f,i),this._getPointAndPosition(s,y,t,r),r._plotRect.contains(s))&&(c=new DataLabelRenderEventArgs(n,l,s,h),u.onRendering(c)||(h=c.text,s=c.point,a=this._renderLabelAndBorder(n,h,y,e,s,w,2,p),a&&(v=new _RectArea(a),v.tag=i,o.push(v))))},n.prototype._getPointAndPosition=function(n,t,i,r){if(i instanceof _RectArea){var u=i;r._isRotated()?n.y=u.rect.top+.5*u.rect.height:n.x=u.rect.left+.5*u.rect.width}},n.prototype._getLabelPoint=function(n,t){var i=n._getAxisX(),r=n._getAxisY();return new wjcCore.Point(i.convert(t.dataX),r.convert(t.dataY))},n.prototype._renderLabelAndBorder=function(n,t,i,r,u,f,e,o){var s,h='wj-data-label',c='wj-data-label-line';switch(i){case LabelPosition.Top:f&&n.drawLine(u.x,u.y,u.x,u.y-r,c);u.y-=e+r;s=FlexChart._renderText(n,t,u,1,2,h);break;case LabelPosition.Bottom:f&&n.drawLine(u.x,u.y,u.x,u.y+r,c);u.y+=e+r;s=FlexChart._renderText(n,t,u,1,0,h);break;case LabelPosition.Left:f&&n.drawLine(u.x,u.y,u.x-r,u.y,c);u.x-=e+r;s=FlexChart._renderText(n,t,u,2,1,h);break;case LabelPosition.Right:f&&n.drawLine(u.x,u.y,u.x+r,u.y,c);u.x+=e+r;s=FlexChart._renderText(n,t,u,0,1,h);break;case LabelPosition.Center:s=FlexChart._renderText(n,t,u,1,1,h)}return o&&s&&n.drawRect(s.left-e,s.top-e,s.width+2*e,s.height+2*e,'wj-data-label-border'),s},n.prototype.getNumOption=function(n,t){var i=this.chart.options;return(t&&(i=i?i[t]:null),i&&i[n])?wjcCore.asNumber(i[n],!0):undefined},n.cloneStyle=function(n,t){var r,i;if(!n)return n;r={};for(i in n)t&&t.indexOf(i)>=0||(r[i]=n[i]);return r},n.prototype.isValid=function(n,t){return _DataInfo.isValid(n)&&_DataInfo.isValid(t)&&FlexChart._contains(this.chart._plotRect,new wjcCore.Point(n,t))},n.prototype.load=function(){},n.prototype.unload=function(){},n}();exports._BasePlotter=_BasePlotter;_BarPlotter=function(n){function t(){n.apply(this,arguments);this.origin=0;this.width=.7;this.isVolume=!1;this._volHelper=null;this.stackPosMap={};this.stackNegMap={};this.stacking=Stacking.None}return __extends(t,n),t.prototype.clear=function(){n.prototype.clear.call(this);this.stackNegMap[this.chart.axisY._uniqueId]={};this.stackPosMap[this.chart.axisY._uniqueId]={};this._volHelper=null},t.prototype.load=function(){var t,u,r,e,h,i,o,f,c,l,s;if(n.prototype.load.call(this),this.isVolume)for(c=null,l=null,i=0;i<this.chart.series.length;i++){if(t=this.chart.series[i],h=t.getDataType(1)||t.chart._xDataType,u=t._getAxisX(),r=t._getChartType(),r=r===null||wjcCore.isUndefined(r)?this.chart._getChartType():r,e=r===ChartType.Column?t._getBindingValues(1):r===ChartType.Candlestick?t._getBindingValues(4):null,h===wjcCore.DataType.Date)for(o=[],f=[],i=0;i<t._getLength();i++)s=t._getItem(i)[t.bindingX].valueOf(),o.push(s),f.push({value:s,text:wjcCore.Globalize.format(new Date(s),u.format||"d")});else o=this.dataInfo.getXVals();if(c=this.dataInfo.getMinX(),l=this.dataInfo.getMaxX(),e&&e.length>0){this._volHelper=new _VolumeHelper(e,o,c,l,h);u._customConvert=this._volHelper.convert.bind(this._volHelper);u._customConvertBack=this._volHelper.convertBack.bind(this._volHelper);f&&f.length>0&&(this._itemsSource=u.itemsSource=f);break}}},t.prototype.unload=function(){var r,t,i;for(n.prototype.unload.call(this),i=0;i<this.chart.series.length;i++)r=this.chart.series[i],t=r._getAxisX(),t&&(t._customConvert=null,t._customConvertBack=null,t.itemsSource&&t.itemsSource==this._itemsSource&&(this._itemsSource=t.itemsSource=null))},t.prototype.adjustLimits=function(n){this.dataInfo=n;var u=n.getMinX(),t=n.getMinY(),f=n.getMaxX(),i=n.getMaxY(),r=n.getDeltaX();return r<=0&&(r=1),this.isVolume&&(this.chart._getChartType()===ChartType.Column||this.chart._getChartType()===ChartType.Candlestick)?this.load():this.unload(),this.rotated?(this.chart.axisY.logBase||(this.origin>i?i=this.origin:this.origin<t&&(t=this.origin)),new wjcCore.Rect(t,u-.5*r,i-t,f-u+r)):(this.chart.axisY.logBase||(this.origin>i?i=this.origin:this.origin<t&&(t=this.origin)),new wjcCore.Rect(u-.5*r,t,f-u+r,i-t))},t.prototype.plotSeries=function(n,t,i,r,u,f,e,o){var ot=[],tt=this.chart.series.indexOf(r),ft=wjcCore.asType(r,SeriesBase),yi=this.chart.options,g=this.width,nt=0,kt,st,d,ui,ti,ci,c,h,l,a,y,v,hi,w,b,p,ii,s,bt,k,vi,rt;f=f||0;e=e||1;yi&&yi.groupWidth&&(kt=yi.groupWidth,wjcCore.isNumber(kt)?(d=wjcCore.asNumber(kt),isFinite(d)&&d>0&&(nt=d,g=1)):wjcCore.isString(kt)&&(st=wjcCore.asString(kt),st&&st.indexOf('%')>=0?(st=st.replace('%',''),d=parseFloat(st),isFinite(d)&&(d<0?d=0:d>100&&(d=100),nt=0,g=d/100)):(d=parseFloat(st),isFinite(d)&&d>0&&(nt=d,g=1))));var dt=g/e,pi=ft._getAxisY()._uniqueId,lt=this.stackNegMap[pi],at=this.stackPosMap[pi],ri=r.getValues(0),ut=r.getValues(1);if(ri){ut||(ut=this.dataInfo.getXVals());ut&&(ui=this.dataInfo.getDeltaX(),ui>0&&(g*=ui,dt*=ui));var ht=ft._getSymbolFill(tt),vt=ft._getAltSymbolFill(tt)||ht,ct=ft._getSymbolStroke(tt),yt=ft._getAltSymbolStroke(tt)||ct,pt=ri.length;ut!=null&&(pt=Math.min(pt,ut.length));var it=this.origin,et=0,fi,ei,gt=this.stacking!=Stacking.None,ni=this.stacking==Stacking.Stacked100pc;if(ft._getChartType()!==undefined&&(gt=ni=!1),this.rotated){it<t.actualMin?it=t.actualMin:it>t.actualMax&&(it=t.actualMax);ft._isCustomAxisY()&&(gt=ni=!1);var wt=t.convert(it),li=i.actualMin,ai=i.actualMax;for(c=0;c<pt;c++)if(h=ut?ut[c]:c,l=ri[c],this._getSymbolOrigin&&(wt=i.convert(this._getSymbolOrigin(it,c))),this._getSymbolStyles&&(a=this._getSymbolStyles(c),ht=a&&a.fill?a.fill:ht,vt=a&&a.fill?a.fill:vt,ct=a&&a.stroke?a.fill:ct,yt=a&&a.stroke?a.fill:yt),fi=l>0?ht:vt,ei=l>0?ct:yt,n.fill=fi,n.stroke=ei,_DataInfo.isValid(h)&&_DataInfo.isValid(l))if(gt){if(b=h-.5*g,p=h+.5*g,b<li&&p<li||b>ai&&p>ai)continue;b=i.convert(b);p=i.convert(p);ni&&(hi=this.dataInfo.getStackedAbsSum(h),l=l/hi);w=0;l>0?(w=isNaN(at[h])?0:at[h],y=t.convert(w),v=t.convert(w+l),at[h]=w+l):(w=isNaN(lt[h])?0:lt[h],y=t.convert(w),v=t.convert(w+l),lt[h]=w+l);o&&ot.push(new wjcCore.Point(v,i.convert(h)));s=new wjcCore.Rect(Math.min(y,v),Math.min(b,p),Math.abs(v-y),Math.abs(p-b));nt>0&&(k=1-nt/s.height,k<0&&(k=0),vi=s.top+.5*s.height,s.top+=(vi-s.top)*k,s.height=Math.min(nt,s.height));rt=new _RectArea(s);this.drawSymbol(n,s,r,c,new wjcCore.Point(v,s.top+.5*s.height));r._setPointIndex(c,et);et++;rt.tag=new _DataPoint(tt,c,w+l,h);this.hitTester.add(rt,tt)}else{if(b=h-.5*g+f*dt,p=h-.5*g+(f+1)*dt,b<li&&p<li||b>ai&&p>ai)continue;b=i.convert(b);p=i.convert(p);ii=t.convert(l);s=new wjcCore.Rect(Math.min(ii,wt),Math.min(b,p),Math.abs(wt-ii),Math.abs(p-b));o&&ot.push(new wjcCore.Point(ii,(b+p)/2));nt>0&&(bt=nt/e,k=1-bt/s.height,k<0&&(k=0),vi=i.convert(h),s.top+=(vi-s.top)*k,s.height=Math.min(bt,s.height));rt=new _RectArea(s);this.drawSymbol(n,s,r,c,new wjcCore.Point(ii,s.top+.5*s.height));r._setPointIndex(c,et);et++;rt.tag=new _DataPoint(tt,c,l,h);this.hitTester.add(rt,tt)}}else{it<i.actualMin?it=i.actualMin:it>i.actualMax&&(it=i.actualMax);var wt=i.convert(it),oi=t.actualMin,si=t.actualMax;for(ft._isCustomAxisY()&&(gt=ni=!1),c=0;c<pt;c++)if(h=ut?ut[c]:c,l=ri[c],this._getSymbolOrigin&&(wt=i.convert(this._getSymbolOrigin(it,c,pt))),this._getSymbolStyles&&(a=this._getSymbolStyles(c,pt),ht=a&&a.fill?a.fill:ht,vt=a&&a.fill?a.fill:vt,ct=a&&a.stroke?a.stroke:ct,yt=a&&a.stroke?a.stroke:yt),fi=l>0?ht:vt,ei=l>0?ct:yt,n.fill=fi,n.stroke=ei,_DataInfo.isValid(h)&&_DataInfo.isValid(l))if(gt){if(y=h-.5*g,v=h+.5*g,y<oi&&v<oi||y>si&&v>si)continue;if(y=t.convert(y),v=t.convert(v),!_DataInfo.isValid(y)||!_DataInfo.isValid(v))continue;ni&&(hi=this.dataInfo.getStackedAbsSum(h),l=l/hi);w=0;l>0?(w=isNaN(at[h])?0:at[h],b=i.convert(w),p=i.convert(w+l),at[h]=w+l):(w=isNaN(lt[h])?0:lt[h],b=i.convert(w),p=i.convert(w+l),lt[h]=w+l);o&&ot.push(new wjcCore.Point(t.convert(h),p));s=new wjcCore.Rect(Math.min(y,v),Math.min(b,p),Math.abs(v-y),Math.abs(p-b));nt>0&&(k=1-nt/s.width,k<0&&(k=0),ci=s.left+.5*s.width,s.left+=(ci-s.left)*k,s.width=Math.min(nt,s.width));rt=new _RectArea(s);this.drawSymbol(n,s,r,c,new wjcCore.Point(s.left+.5*s.width,p));r._setPointIndex(c,et);et++;rt.tag=new _DataPoint(tt,c,h,w+l);this.hitTester.add(rt,tt)}else{if(y=h-.5*g+f*dt,v=h-.5*g+(f+1)*dt,y<oi&&v<oi||y>si&&v>si)continue;if(y=t.convert(y),v=t.convert(v),!_DataInfo.isValid(y)||!_DataInfo.isValid(v))continue;ti=i.convert(l);s=new wjcCore.Rect(Math.min(y,v),Math.min(ti,wt),Math.abs(v-y),Math.abs(wt-ti));o&&ot.push(new wjcCore.Point((y+v)/2,ti));nt>0&&(bt=nt/e,k=1-bt/s.width,k<0&&(k=0),ci=t.convert(h),s.left+=(ci-s.left)*k,s.width=Math.min(bt,s.width));rt=new _RectArea(s);this.drawSymbol(n,s,r,c,new wjcCore.Point(s.left+.5*s.width,ti));r._setPointIndex(c,et);et++;rt.tag=new _DataPoint(tt,c,h,l);this.hitTester.add(rt,tt)}}o&&ot&&ot.length&&o(ot)}},t.prototype.drawSymbol=function(n,t,i,r,u){var e=this,f;this.chart.itemFormatter?(n.startGroup(),f=new HitTestInfo(this.chart,u,ChartElement.SeriesSymbol),f._setData(i,r),this.chart.itemFormatter(n,f,function(){e.drawDefaultSymbol(n,t,i)}),n.endGroup()):this.drawDefaultSymbol(n,t,i)},t.prototype.drawDefaultSymbol=function(n,t,i){n.drawRect(t.left,t.top,t.width,t.height,null,i.symbolStyle)},t}(_BasePlotter);exports._BarPlotter=_BarPlotter;_LinePlotter=function(n){function t(){n.call(this);this.hasSymbols=!1;this.hasLines=!0;this.isSpline=!1;this.stacking=Stacking.None;this.stackPos={};this.stackNeg={};this.clipping=!1}return __extends(t,n),t.prototype.clear=function(){n.prototype.clear.call(this);this.stackNeg={};this.stackPos={}},t.prototype.adjustLimits=function(n){var u;this.dataInfo=n;var i=n.getMinX(),t=n.getMinY(),f=n.getMaxX(),r=n.getMaxY();return this.isSpline&&!this.chart.axisY.logBase&&(u=.1*(r-t),t-=u,r+=u),this.rotated?new wjcCore.Rect(t,i,r-t,f-i):new wjcCore.Rect(i,t,f-i,r-t)},t.prototype.plotSeries=function(n,t,i,r,u,f,e,o){var tt=[],a=wjcCore.asType(r,SeriesBase),l=this.chart.series.indexOf(r),g=r.getValues(0),b=r.getValues(1),nt,ut,pt,ft,ct,wt,lt,d,v,w,et,s,h,c;if(g){b||(b=this.dataInfo.getXVals());var ot=_BasePlotter.cloneStyle(r.style,['fill']),k=g.length,at=!0;b?k=Math.min(k,b.length):(at=!1,b=new Array(k));var bt=this._DEFAULT_WIDTH,it=a._getSymbolFill(l),kt=a._getAltSymbolFill(l)||it,st=a._getSymbolStroke(l),dt=a._getAltSymbolStroke(l)||st,ht=a._getSymbolSize();n.stroke=st;n.strokeWidth=bt;n.fill=it;var y=[],p=[],rt=[],gt=this.rotated,vt=this.stacking!=Stacking.None&&!a._isCustomAxisY(),yt=this.stacking==Stacking.Stacked100pc&&!a._isCustomAxisY();for(a._getChartType()!==undefined&&(vt=yt=!1),nt=this.chart.interpolateNulls,ut=!1,s=0;s<k;s++)h=at?b[s]:s,c=g[s],_DataInfo.isValid(h)&&_DataInfo.isValid(c)?(vt&&(yt&&(pt=this.dataInfo.getStackedAbsSum(h),c=c/pt),c>=0?(ft=isNaN(this.stackPos[h])?0:this.stackPos[h],c=this.stackPos[h]=ft+c):(ft=isNaN(this.stackNeg[h])?0:this.stackNeg[h],c=this.stackNeg[h]=ft+c)),gt?(ct=new _DataPoint(l,s,c,h),wt=t.convert(c),c=i.convert(h),h=wt):(ct=new _DataPoint(l,s,h,c),h=t.convert(h),c=i.convert(c)),isNaN(h)||isNaN(c)?(ut=!0,nt!==!0&&(y.push(undefined),p.push(undefined)),rt.push(!0)):(y.push(h),p.push(c),rt.push(!1),o&&tt.push(new wjcCore.Point(h,c)),lt=new _CircleArea(new wjcCore.Point(h,c),.5*ht),lt.tag=ct,this.hitTester.add(lt,l))):(ut=!0,nt!==!0&&(y.push(undefined),p.push(undefined)),rt.push(!0));if(d=0,this.hasLines)if(n.fill=null,ut&&nt!==!0){for(v=[],w=[],s=0;s<k;s++)y[s]===undefined?(v.length>1&&(this._drawLines(n,v,w,null,ot,this.chart._plotrectId),this.hitTester.add(new _LinesArea(v,w),l),d++),v=[],w=[]):(v.push(y[s]),w.push(p[s]));v.length>1&&(this._drawLines(n,v,w,null,ot,this.chart._plotrectId),this.hitTester.add(new _LinesArea(v,w),l),d++)}else this._drawLines(n,y,p,null,ot,this.chart._plotrectId),this.hitTester.add(new _LinesArea(y,p),l),d++;if((this.hasSymbols||this.chart.itemFormatter)&&ht>0)for(n.fill=it,et=0,s=0;s<k;s++)nt&&rt[s]||(h=y[et],c=p[et],this.hasLines===!1&&(n.fill=g[s]>0?it:kt,n.stroke=g[s]>0?st:dt),this.isValid(h,c,t,i)&&(this._drawSymbol(n,h,c,ht,a,s),r._setPointIndex(s,d),d++),et++);o&&tt&&tt.length&&o(tt)}},t.prototype._drawLines=function(n,t,i,r,u,f){this.isSpline?n.drawSplines(t,i,r,u,f):n.drawLines(t,i,r,u,f)},t.prototype._drawSymbol=function(n,t,i,r,u,f){var o=this,e;this.chart.itemFormatter?(n.startGroup(),e=new HitTestInfo(this.chart,new wjcCore.Point(t,i),ChartElement.SeriesSymbol),e._setData(u,f),this.chart.itemFormatter(n,e,function(){o.hasSymbols&&o._drawDefaultSymbol(n,t,i,r,u.symbolMarker,u.symbolStyle)}),n.endGroup()):this._drawDefaultSymbol(n,t,i,r,u.symbolMarker,u.symbolStyle)},t.prototype._drawDefaultSymbol=function(n,t,i,r,u,f){u==Marker.Dot?n.drawEllipse(t,i,.5*r,.5*r,null,f):u==Marker.Box&&n.drawRect(t-.5*r,i-.5*r,r,r,null,f)},t}(_BasePlotter);exports._LinePlotter=_LinePlotter;_AreaPlotter=function(n){function t(){n.call(this);this.stacking=Stacking.None;this.isSpline=!1;this.stackPos={};this.stackNeg={}}return __extends(t,n),t.prototype.adjustLimits=function(n){var u;this.dataInfo=n;var i=n.getMinX(),t=n.getMinY(),f=n.getMaxX(),r=n.getMaxY();return this.isSpline&&(u=.1*(r-t),this.chart.axisY.logBase||(t-=u),r+=u),this.rotated?new wjcCore.Rect(t,i,r-t,f-i):new wjcCore.Rect(i,t,f-i,r-t)},t.prototype.clear=function(){n.prototype.clear.call(this);this.stackNeg={};this.stackPos={}},t.prototype.plotSeries=function(n,t,i,r,u,f,e,o){var st=[],b=this.chart.series.indexOf(r),lt=r,at=r.getValues(0),nt=r.getValues(1),tt,vt,l,y,p,ti,w,k,ft,s,a,v,d,dt;if(at&&(tt=at.length,tt)){nt||(nt=this.dataInfo.getXVals());vt=!0;nt?nt.length<tt&&(tt=nt.length):(vt=!1,nt=new Array(tt));var h=[],c=[],it=[],rt=[],g=this.stacking!=Stacking.None&&!lt._isCustomAxisY(),gt=this.stacking==Stacking.Stacked100pc&&!lt._isCustomAxisY();lt._getChartType()!==undefined&&(g=gt=!1);var ut=this.rotated,ht=!1,ct=this.chart.interpolateNulls,et=null,ot=null,ni=this.chart._plotRect;for(v=0;v<tt;v++)l=vt?nt[v]:v,y=at[v],(et===null||l>et)&&(et=l),(ot===null||l<ot)&&(ot=l),_DataInfo.isValid(l)&&_DataInfo.isValid(y)?(p=ut?i.convert(l):t.convert(l),g&&(gt&&(ti=this.dataInfo.getStackedAbsSum(l),y=y/ti),w=0,y>=0?(w=isNaN(this.stackPos[l])?0:this.stackPos[l],y=this.stackPos[l]=w+y):(w=isNaN(this.stackNeg[l])?0:this.stackNeg[l],y=this.stackNeg[l]=w+y),ut?(w<t.actualMin&&(w=t.actualMin),it.push(t.convert(w)),rt.push(p)):(it.push(p),w<i.actualMin&&(w=i.actualMin),rt.push(i.convert(w)))),ut?(k=t.convert(y),isNaN(p)||isNaN(k)?(ht=!0,g||ct===!0||(h.push(undefined),c.push(undefined))):(h.push(k),c.push(p),FlexChart._contains(ni,new wjcCore.Point(k,p))&&(ft=new _CircleArea(new wjcCore.Point(k,p),this._DEFAULT_SYM_SIZE),ft.tag=new _DataPoint(b,v,y,l),this.hitTester.add(ft,b)))):(k=i.convert(y),isNaN(p)||isNaN(k)?(ht=!0,g||ct===!0||(h.push(undefined),c.push(undefined))):(h.push(p),c.push(k),FlexChart._contains(ni,new wjcCore.Point(p,k))&&(ft=new _CircleArea(new wjcCore.Point(p,k),this._DEFAULT_SYM_SIZE),ft.tag=new _DataPoint(b,v,l,y),this.hitTester.add(ft,b))))):(ht=!0,g||ct===!0||(h.push(undefined),c.push(undefined)));o&&h.forEach(function(n,t){n!=null&&st.push(new wjcCore.Point(n,c[t]))});var yt=this._DEFAULT_WIDTH,pt=u._getColorLight(b),wt=u._getColor(b),bt=_BasePlotter.cloneStyle(r.style,['fill']),kt=_BasePlotter.cloneStyle(r.style,['stroke']);if(!g&&ct!==!0&&ht){for(s=[],a=[],v=0;v<tt;v++)h[v]===undefined?(s.length>1&&(this.isSpline&&(d=this._convertToSpline(s,a),s=d.xs,a=d.ys),n.stroke=wt,n.strokeWidth=yt,n.fill='none',n.drawLines(s,a,null,bt),this.hitTester.add(new _LinesArea(s,a),b),ut?(s.push(t.convert(t.actualMin),t.convert(t.actualMin)),a.push(i.convert(i.actualMax),i.convert(i.actualMin))):(s.push(s[s.length-1],s[0]),a.push(i.convert(i.actualMin),i.convert(i.actualMin))),n.fill=pt,n.stroke='none',n.drawPolygon(s,a,null,kt)),s=[],a=[]):(s.push(h[v]),a.push(c[v]));s.length>1&&(this.isSpline&&(d=this._convertToSpline(s,a),s=d.xs,a=d.ys),n.stroke=wt,n.strokeWidth=yt,n.fill='none',n.drawLines(s,a,null,bt),this.hitTester.add(new _LinesArea(s,a),b),ut?(s.push(t.convert(t.actualMin),t.convert(t.actualMin)),a.push(i.convert(i.actualMax),i.convert(i.actualMin))):(s.push(s[s.length-1],s[0]),a.push(i.convert(i.actualMin),i.convert(i.actualMin))),n.fill=pt,n.stroke='none',n.drawPolygon(s,a,null,kt))}else this.isSpline&&(d=this._convertToSpline(h,c),h=d.xs,c=d.ys),g?(this.isSpline&&(dt=this._convertToSpline(it,rt),it=dt.xs,rt=dt.ys),h=h.concat(it.reverse()),c=c.concat(rt.reverse())):ut?(h.push(t.convert(t.actualMin),t.convert(t.actualMin)),c.push(i.convert(et),i.convert(ot))):(h.push(t.convert(et),t.convert(ot)),c.push(i.convert(i.actualMin),i.convert(i.actualMin))),n.fill=pt,n.stroke='none',n.drawPolygon(h,c,null,kt),g?(h=h.slice(0,h.length-it.length),c=c.slice(0,c.length-rt.length)):(h=h.slice(0,h.length-2),c=c.slice(0,c.length-2)),n.stroke=wt,n.strokeWidth=yt,n.fill='none',n.drawLines(h,c,null,bt),this.hitTester.add(new _LinesArea(h,c),b);this._drawSymbols(n,r,b);o&&st&&st.length&&o(st)}},t.prototype._convertToSpline=function(n,t){if(n&&t){var r=new _Spline(n,t),i=r.calculate();return{xs:i.xs,ys:i.ys}}return{xs:n,ys:t}},t.prototype._drawSymbols=function(n,t,i){var f,r,u,o,e;if(this.chart.itemFormatter!=null)for(f=this.hitTester._map[i],r=0;r<f.length;r++)u=wjcCore.tryCast(f[r],_CircleArea),u&&(o=u.tag,n.startGroup(),e=new HitTestInfo(this.chart,u.center,ChartElement.SeriesSymbol),e._setDataPoint(o),this.chart.itemFormatter(n,e,function(){}),n.endGroup())},t}(_BasePlotter);exports._AreaPlotter=_AreaPlotter;_BubblePlotter=function(n){function t(){n.call(this);this._MIN_SIZE=5;this._MAX_SIZE=30;this.hasLines=!1;this.hasSymbols=!0;this.clipping=!0}return __extends(t,n),t.prototype.adjustLimits=function(t,i){var a=this.getNumOption('minSize','bubble'),h,s,y,r,p,u,w,c,b,l;this._minSize=a?a:this._MIN_SIZE;h=this.getNumOption('maxSize','bubble');this._maxSize=h?h:this._MAX_SIZE;var v=this.chart.series,k=v.length,e=NaN,o=NaN;for(s=0;s<k;s++)if(y=v[s],r=y._getBindingValues(1),r)for(p=r.length,u=0;u<p;u++)_DataInfo.isValid(r[u])&&((isNaN(e)||r[u]<e)&&(e=r[u]),(isNaN(o)||r[u]>o)&&(o=r[u]));this._minValue=e;this._maxValue=o;var f=n.prototype.adjustLimits.call(this,t,i),d=this.chart.axisX,g=this.chart.axisY;return d.logBase<=0&&(w=i.width-this._maxSize,c=w/f.width,f.left-=this._maxSize*.5/c,f.width+=this._maxSize/c),g.logBase<=0&&(b=i.height-this._maxSize,l=b/f.height,f.top-=this._maxSize*.5/l,f.height+=this._maxSize/l),f},t.prototype._drawSymbol=function(n,t,i,r,u,f){var b=this,h,c,l,a,r,p,v,e,w,o,s,y;if(this._minSize==null&&(h=this.getNumOption('minSize','bubble'),this._minSize=h?h:this._MIN_SIZE),this._maxSize==null&&(c=this.getNumOption('maxSize','bubble'),this._maxSize=c?c:this._MAX_SIZE),l=u._getItem(f),l&&(a=u._getBinding(1),a&&(r=l[a],_DataInfo.isValid(r)&&(p=this._minValue==this._maxValue?1:Math.sqrt((r-this._minValue)/(this._maxValue-this._minValue)),r=this._minSize+(this._maxSize-this._minSize)*p,this.chart.itemFormatter?(v=new HitTestInfo(this.chart,new wjcCore.Point(t,i),ChartElement.SeriesSymbol),v._setData(u,f),n.startGroup(),this.chart.itemFormatter(n,v,function(){b._drawDefaultSymbol(n,t,i,r,u.symbolMarker,u.symbolStyle)}),n.endGroup()):this._drawDefaultSymbol(n,t,i,r,u.symbolMarker,u.symbolStyle),e=this.hitTester._map[this.chart.series.indexOf(u)],e!=null))))for(w=e.length,o=w-1;o>=0;o--)s=e[o],s.tag&&s.tag.pointIndex==f&&(y=wjcCore.tryCast(s,_CircleArea),y&&y.setRadius(.5*r))},t}(_LinePlotter);exports._BubblePlotter=_BubblePlotter;_FinancePlotter=function(n){function t(){n.apply(this,arguments);this.isCandle=!0;this.isArms=!1;this.isEqui=!1;this.isVolume=!1;this._volHelper=null;this._symWidth=.7}return __extends(t,n),t.prototype.clear=function(){n.prototype.clear.call(this);this._volHelper=null},t.prototype.load=function(){var t,u,r,e,h,i,o,f,c,l,s;if(n.prototype.load.call(this),this.isVolume)for(c=null,l=null,i=0;i<this.chart.series.length;i++){if(t=this.chart.series[i],h=t.getDataType(1)||t.chart._xDataType,u=t._getAxisX(),r=t._getChartType(),r=r===null||wjcCore.isUndefined(r)?this.chart._getChartType():r,e=r===ChartType.Column?t._getBindingValues(1):r===ChartType.Candlestick?t._getBindingValues(4):null,h===wjcCore.DataType.Date)for(o=[],f=[],i=0;i<t._getLength();i++)s=t._getItem(i)[t.bindingX].valueOf(),o.push(s),f.push({value:s,text:wjcCore.Globalize.format(new Date(s),u.format||"d")});else o=this.dataInfo.getXVals();if(c=this.dataInfo.getMinX(),l=this.dataInfo.getMaxX(),e&&e.length>0){this._volHelper=new _VolumeHelper(e,o,c,l,h);u._customConvert=this._volHelper.convert.bind(this._volHelper);u._customConvertBack=this._volHelper.convertBack.bind(this._volHelper);f&&f.length>0&&(this._itemsSource=u.itemsSource=f);break}}},t.prototype.unload=function(){var r,t,i;for(n.prototype.unload.call(this),i=0;i<this.chart.series.length;i++)r=this.chart.series[i],t=r._getAxisX(),t&&(t._customConvert=null,t._customConvertBack=null,t.itemsSource&&t.itemsSource==this._itemsSource&&(this._itemsSource=t.itemsSource=null))},t.prototype.parseSymbolWidth=function(n){var r,i,t;this._isPixel=undefined;n&&(wjcCore.isNumber(n)?(r=wjcCore.asNumber(n),isFinite(r)&&r>0&&(this._symWidth=r,this._isPixel=!0)):wjcCore.isString(n)&&(i=wjcCore.asString(n),i&&i.indexOf('%')>=0?(i=i.replace('%',''),t=parseFloat(i),isFinite(t)&&(t<0?t=0:t>100&&(t=100),this._symWidth=t/100,this._isPixel=!1)):(t=parseFloat(n),isFinite(t)&&t>0&&(this._symWidth=t,this._isPixel=!0))))},t.prototype.adjustLimits=function(n){var c,i,e,l,o,g,f,s,a;this.dataInfo=n;var r=n.getMinX(),t=n.getMinY(),v=n.getMaxX(),u=n.getMaxY(),h=n.getDeltaX(),nt=this.chart._xDataType;h<=0&&(h=1);var y=this.chart.series,tt=y.length,p=0;for(this.parseSymbolWidth(this.symbolWidth),this.isVolume&&(this.chart._getChartType()===ChartType.Column||this.chart._getChartType()===ChartType.Candlestick)?this.load():this.unload(),c=0;c<tt;c++)if(i=y[c],!i._isCustomAxisY()){var w=i._getBinding(1),b=i._getBinding(2),k=i._getBinding(3),d=i._getLength();if(d)for(e=i._getSymbolSize(),e>p&&(p=e),l=0;l<d;l++)o=i._getItem(l),o&&(g=[w?o[w]:null,b?o[b]:null,k?o[k]:null],g.forEach(function(n){_DataInfo.isValid(n)&&n!==null&&((isNaN(t)||n<t)&&(t=n),(isNaN(u)||n>u)&&(u=n))}))}return f=v-r,s=this.chart._plotRect,s&&s.width&&!this.isVolume&&(e+=2,a=s.width/(s.width-e)*f,r=r-.5*(a-f),f=a),nt===wjcCore.DataType.Date&&this.isVolume&&(this.chart._getChartType()===ChartType.Column||this.chart._getChartType()===ChartType.Candlestick)?new wjcCore.Rect(r-.5*h,t,v-r+h,u-t):this.chart._isRotated()?new wjcCore.Rect(t,r,u-t,f):new wjcCore.Rect(r,t,f,u-t)},t.prototype.plotSeries=function(n,t,i,r){var at=this,f=wjcCore.asType(r,SeriesBase),c=this.chart.series.indexOf(r),b=r.getValues(0),s=r.getValues(1),rt=this._symWidth,ut=this.chart._isRotated(),k,l,d,u,h,it;if(b){s||(s=this.dataInfo.getXVals());s&&(k=this.dataInfo.getDeltaX(),k>0&&this._isPixel===!1&&(rt*=k));l=b.length;d=!0;s?l=Math.min(l,s.length):(d=!1,s=new Array(l));var vt=this._DEFAULT_WIDTH,g=f._getSymbolFill(c),ft=f._getAltSymbolFill(c)||"transparent",y=f._getSymbolStroke(c),et=f._getAltSymbolStroke(c)||y,ot=this._isPixel===undefined?f._getSymbolSize():rt;n.stroke=y;n.strokeWidth=vt;n.fill=g;var st=f._getBinding(1),ht=f._getBinding(2),o=f._getBinding(3),yt=ut?i.actualMin:t.actualMin,pt=ut?i.actualMax:t.actualMax,ct=0,a,nt,e=null,v=null;for(u=0;u<l;u++)if(e=f._getItem(u),e){if(h=d?s[u]:u,_DataInfo.isValid(h)&&yt<=h&&h<=pt){var tt=b[u],lt=st?e[st]:null,p=ht?e[ht]:null,w=o?e[o]:null;n.startGroup();this.isEqui&&v!==null?v[o]!==e[o]&&(a=v[o]<e[o]?ft:g,nt=v[o]<e[o]?et:y):(a=p<w?ft:g,nt=p<w?et:y);n.fill=a;n.stroke=nt;this.chart.itemFormatter?(it=new HitTestInfo(this.chart,new wjcCore.Point(t.convert(h),i.convert(tt)),ChartElement.SeriesSymbol),it._setData(f,u),this.chart.itemFormatter(n,it,function(){at._drawSymbol(n,t,i,c,u,a,ot,h,tt,lt,p,w)})):this._drawSymbol(n,t,i,c,u,a,ot,h,tt,lt,p,w);n.endGroup();r._setPointIndex(u,ct);ct++}v=e}}},t.prototype._drawSymbol=function(n,t,i,r,u,f,e,o,s,h,c,l){var k=new _DataPoint(r,u,o,s),w,a=null,y=null,v=null,p=null,b=this.chart._isRotated(),d,g;b&&(d=i,i=t,t=d);this._isPixel===!1&&(v=t.convert(o-.5*e),p=t.convert(o+.5*e),v>p&&(g=v,v=p,p=g));o=t.convert(o);this._isPixel!==!1&&(v=o-.5*e,p=o+.5*e);this.isCandle?(_DataInfo.isValid(c)&&_DataInfo.isValid(l)&&(c=i.convert(c),l=i.convert(l),a=Math.min(c,l),y=a+Math.abs(c-l),b?(n.drawRect(a,v,y-a,p-v),w=new _RectArea(new wjcCore.Rect(a,v,y-a,p-v))):(n.drawRect(v,a,p-v,y-a),w=new _RectArea(new wjcCore.Rect(v,a,p-v,y-a))),w.tag=k,this.hitTester.add(w,r)),_DataInfo.isValid(s)&&(s=i.convert(s),a!==null&&(b?n.drawLine(y,o,s,o):n.drawLine(o,a,o,s))),_DataInfo.isValid(h)&&(h=i.convert(h),y!==null&&(b?n.drawLine(a,o,h,o):n.drawLine(o,y,o,h)))):this.isEqui?_DataInfo.isValid(s)&&_DataInfo.isValid(h)&&(s=i.convert(s),h=i.convert(h),a=Math.min(s,h),y=a+Math.abs(s-h),n.drawRect(v,a,p-v,y-a),w=new _RectArea(new wjcCore.Rect(v,a,p-v,y-a)),w.tag=k,this.hitTester.add(w,r)):this.isArms?(_DataInfo.isValid(c)&&_DataInfo.isValid(l)&&(c=i.convert(c),l=i.convert(l),a=Math.min(c,l),y=a+Math.abs(c-l),n.drawRect(v,a,p-v,y-a)),_DataInfo.isValid(s)&&a!==null&&(s=i.convert(s),n.drawLine(o,a,o,s)),_DataInfo.isValid(h)&&y!==null&&(h=i.convert(h),n.drawLine(o,y,o,h)),_DataInfo.isValid(s)&&_DataInfo.isValid(h)&&(n.fill="transparent",a=Math.min(s,h),y=a+Math.abs(s-h),n.drawRect(v,a,p-v,y-a),w=new _RectArea(new wjcCore.Rect(v,a,p-v,y-a)),w.tag=k,this.hitTester.add(w,r))):(_DataInfo.isValid(s)&&_DataInfo.isValid(h)&&(s=i.convert(s),h=i.convert(h),a=Math.min(s,h),y=a+Math.abs(s-h),b?(n.drawLine(h,o,s,o),w=new _RectArea(new wjcCore.Rect(a,v,y-a,p-v))):(n.drawLine(o,h,o,s),w=new _RectArea(new wjcCore.Rect(v,a,p-v,y-a))),w.tag=k,this.hitTester.add(w,r)),_DataInfo.isValid(c)&&(c=i.convert(c),b?n.drawLine(c,v,c,o):n.drawLine(v,c,o,c)),_DataInfo.isValid(l)&&(l=i.convert(l),b?n.drawLine(l,o,l,p):n.drawLine(o,l,p,l)))},t}(_BasePlotter);exports._FinancePlotter=_FinancePlotter;_FunnelPlotter=function(n){function t(){n.apply(this,arguments);this.stacking=Stacking.None}return __extends(t,n),t.prototype.adjustLimits=function(n){this.dataInfo=n;var t=n.getMinX(),i=n.getMinY(),r=n.getMaxX(),u=n.getMaxY();return this.rotated?new wjcCore.Rect(i,t,u-i,r-t):new wjcCore.Rect(t,i,r-t,u-i)},t.prototype.plotSeries=function(n,t,i,r){var st=this.chart.series.indexOf(r),w,ct,at,vt,pt,et,e,ot;if(!(st>0)){var b=wjcCore.asType(r,SeriesBase),v=this.chart.options,ht=r.getValues(0),k=r.getValues(1),c=this.chart._plotRect,d=v&&v.funnel&&v.funnel.neckWidth!=null?v.funnel.neckWidth:.2,g=v&&v.funnel&&v.funnel.neckHeight!=null?v.funnel.neckHeight:0,l=d*c.width,u=0,kt=0,dt=0,lt=0,gt,rt,a,s,y,o=c.left,f=c.top,h=c.width,ni=c.height;if(ht){for(l=l?l:1,k||(k=this.dataInfo.getXVals()),w=ht.length,k!=null&&(w=Math.min(w,k.length)),u=0;u<w;u++)kt+=ht[u];if(ct=0,v&&v.funnel&&v.funnel.type==='rectangle')for(g=ni/w,d=h,u=0;u<w;u++){var yt=k?k[u]:u,p=ht[u],nt,tt=b._getSymbolFill(u),ut=b._getAltSymbolFill(u)||tt,it=b._getSymbolStroke(u),ft=b._getAltSymbolStroke(u)||it;this._getSymbolStyles&&(e=this._getSymbolStyles(u,w),tt=e&&e.fill?e.fill:tt,ut=e&&e.fill?e.fill:ut,it=e&&e.stroke?e.stroke:it,ft=e&&e.stroke?e.stroke:ft);at=p>0?tt:ut;vt=p>0?it:ft;n.fill=at;n.stroke=vt;_DataInfo.isValid(yt)&&_DataInfo.isValid(p)&&(pt||(pt=h/p),et=pt*p,o=o+(d-et)/2,n.drawRect(o,f,et,g),nt=new _FunnelSegment(new wjcCore.Point(o,f),et,g,et,g),f=f+g,d=et,nt.tag=new _DataPoint(st,u,yt,p),this.hitTester.add(nt,st),r._setPointIndex(u,ct),ct++)}else for(dt=c.left+c.width*(1-d)/2,lt=c.top+c.height*(1-g),rt=(1-d)*c.width/2/(c.height*(1-g)),(isNaN(rt)||!isFinite(rt))&&(h=l,o=dt,f=lt),gt=c.width*d*c.height+c.width*(1-d)/2*c.height*(1-g),u=0;u<w;u++){var yt=k?k[u]:u,p=ht[u],wt=[],bt=[],nt,tt=b._getSymbolFill(u),ut=b._getAltSymbolFill(u)||tt,it=b._getSymbolStroke(u),ft=b._getAltSymbolStroke(u)||it;this._getSymbolStyles&&(e=this._getSymbolStyles(u,w),tt=e&&e.fill?e.fill:tt,ut=e&&e.fill?e.fill:ut,it=e&&e.stroke?e.stroke:it,ft=e&&e.stroke?e.stroke:ft);at=p>0?tt:ut;vt=p>0?it:ft;n.fill=at;n.stroke=vt;_DataInfo.isValid(yt)&&_DataInfo.isValid(p)&&(ot=gt*p/kt,h>l?(s=this._getTrapezoidOffsetY(h,ot,rt),f+s<lt?(a=rt*s,wt=[o,o+a,o+h-a,o+h],bt=[f,f+s,f+s,f],nt=new _FunnelSegment(new wjcCore.Point(o,f),h,s,h-a*2,0),h=h-2*a,o=o+a,f=f+s):(s=lt-f,a=rt*s,ot=ot-this._getTrapezoidArea(h,rt,s),y=ot/l,wt.push(o,o+a,o+a,o+a+l,o+a+l,o+h),bt.push(f,f+s,f+s+y,f+s+y,f+s,f),nt=new _FunnelSegment(new wjcCore.Point(o,f),h,s+y,l,y),h=l,o=o+a,f=f+s+y),n.drawPolygon(wt,bt)):(y=ot/l,n.drawRect(o,f,h,y),nt=new _FunnelSegment(new wjcCore.Point(o,f),l,y,l,y),f=f+y),nt.tag=new _DataPoint(st,u,yt,p),this.hitTester.add(nt,st),r._setPointIndex(u,ct),ct++)}}}},t.prototype._getTrapezoidArea=function(n,t,i){var r=i*t;return r*i+(n-2*r)*i},t.prototype._getTrapezoidOffsetY=function(n,t,i){var r=Math.pow(n/2/i,2)-t/i;return n/2/i-Math.sqrt(r>=0?r:0)},t.prototype.drawSymbol=function(n,t,i,r,u){var e=this,f;this.chart.itemFormatter?(n.startGroup(),f=new HitTestInfo(this.chart,u,ChartElement.SeriesSymbol),f._setData(i,r),this.chart.itemFormatter(n,f,function(){e.drawDefaultSymbol(n,t,i)}),n.endGroup()):this.drawDefaultSymbol(n,t,i)},t.prototype.drawDefaultSymbol=function(n,t,i){n.drawRect(t.left,t.top,t.width,t.height,null,i.symbolStyle)},t.prototype._getPointAndPosition=function(n,t,i){var r=i;n.x=r.center.x;n.y=r.center.y;t=t==null?LabelPosition.Center:t},t}(_BasePlotter);exports._FunnelPlotter=_FunnelPlotter;_FunnelSegment=function(){function n(n,t,i,r,u){this._startPoint=n;this._width=t;this._height=i;this._neckWidth=r;this._neckHeight=u;this._center=new wjcCore.Point(this._startPoint.x+t/2,this._startPoint.y+i/2);this._offsetX=(t-r)/2;this._offsetY=i-u}return n.prototype.contains=function(n){var t=this._startPoint,i=this._offsetX,r=this._offsetY;if(n.x>=t.x&&n.x<=t.x+this._width&&n.y>=t.y&&n.y<=t.y+this._height){if(n.x>=t.x+i&&n.x<=t.x+this._width-i)return!0;if(n.y>t.y+r)return!1;if(n.x<this._center.x)return(n.y-t.y)/(n.x-t.x)<r/i;if(n.x>this._center.x)return(n.y-t.y)/(t.x+this._width-n.x)<r/i}return!1},n.prototype.distance=function(n){if(this.contains(n))return 0;var t=this._startPoint,i=this._width,f=this._height,r=this._offsetX,u=this._offsetY;if(n.y<t.y)return n.x<t.x?Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2)):n.x>t.x+i?Math.sqrt(Math.pow(n.x-t.x-i,2)+Math.pow(t.y-n.y,2)):t.y-n.y;if(n.y>t.y+f)return n.x<t.x?Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(n.y-t.y-f,2)):n.x>t.x+i?Math.sqrt(Math.pow(n.x-t.x-i,2)+Math.pow(n.y-t.y-f,2)):n.y-t.y-f;if(n.y>t.y+u){if(n.x<t.x+r)return t.x+r-n.x;if(n.x>t.x+i-r)return n.x-t.x-i+r}else return n.x<t.x+r?Math.min(Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(n.y-t.y,2)),Math.sqrt(Math.pow(n.x-r/2-t.x,2)+Math.pow(n.y-u/2-t.y,2)),Math.sqrt(Math.pow(n.x-r-t.x,2)+Math.pow(n.y-u-t.y,2))):Math.min(Math.sqrt(Math.pow(n.x-i-t.x,2)+Math.pow(n.y-t.y,2)),Math.sqrt(Math.pow(n.x-i+r/2-t.x,2)+Math.pow(n.y-u/2-t.y,2)),Math.sqrt(Math.pow(n.x-i+r-t.x,2)+Math.pow(n.y-u-t.y,2)));return undefined},Object.defineProperty(n.prototype,"center",{get:function(){return this._center},enumerable:!0,configurable:!0}),n}();exports._FunnelSegment=_FunnelSegment;_VolumeHelper=function(){function n(n,t,i,r,u){this._volumes=wjcCore.asArray(n);this._xVals=wjcCore.asArray(t);this._xDataMin=wjcCore.asNumber(i,!0,!1);this._xDataMax=wjcCore.asNumber(r,!0,!1);this._xDataType=wjcCore.asEnum(u,wjcCore.DataType,!0);this._calcData=[];this._init()}return n.prototype.convert=function(t,i,r){var o=undefined,e=this._calcData.length,u=-1,f;if(this._hasXs&&this._xDataType===wjcCore.DataType.Date){if(u=this._xVals.indexOf(t),u===-1)for(f=0;f<this._xVals.length;f++)if(f<this._xVals.length-1&&this._xVals[f]<=t&&t<=this._xVals[f+1]){u=f;break}else if(f===0&&t<=this._xVals[f]){u=f;break}else if(f===this._xVals.length-1&&this._xVals[f]<=t){u=f;break}u===-1&&(u=this._xVals.indexOf(Math.floor(t)),u=wjcCore.clamp(u,0,e-1))}else this._hasXs?(u=this._xVals.indexOf(t),u===-1&&(u=this._xVals.indexOf(Math.floor(t)),u=wjcCore.clamp(u,0,e-1))):u=wjcCore.clamp(Math.round(t),0,e-1);return 0<=u&&u<e&&(this._hasXs&&(t=n.convertToRange(t,0,e-1,this._xDataMin,this._xDataMax)),o=this._calcData[u].value+(t-u)*this._calcData[u].width-.5*this._calcData[u].width,i=this._getXVolume(i),r=this._getXVolume(r),o=(o-i)/(r-i)),o},n.prototype.convertBack=function(t){for(var u=undefined,f=this._calcData.length,r=-1,i=0;i<f;i++)if(this._calcData[i].x1<=t&&t<=this._calcData[i].x2||i===0&&t<=this._calcData[i].x2||i===f-1&&this._calcData[i].x1<=t){r=i;break}return 0<=r&&r<f&&(u=t/this._calcData[r].width-this._calcData[r].value/this._calcData[r].width+.5+i,this._hasXs&&(u=n.convertToRange(u,this._xDataMin,this._xDataMax,0,f-1))),u},n.prototype._init=function(){var i,r,t;this._hasXs=this._xVals!==null&&this._xVals.length>0;this._hasXs&&!wjcCore.isNumber(this._xDataMin)&&(this._xDataMin=Math.min.apply(null,this._xVals));this._hasXs&&!wjcCore.isNumber(this._xDataMax)&&(this._xDataMax=Math.max.apply(null,this._xVals));this._hasXs&&(this._hasXs=wjcCore.isNumber(this._xDataMin)&&wjcCore.isNumber(this._xDataMax));this._hasXs&&this._xDataType===wjcCore.DataType.Date&&this._fillGaps();for(var u=0,n=0,f=this._volumes!==null&&this._volumes.length>0?this._volumes.length:0,n=0;n<f;n++)u+=this._volumes[n];for(t=0,n=0;n<f;n++)r=this._volumes[n]/u,i=t+r,this._calcData.push({value:i,width:r,x1:t,x2:i}),t=this._calcData[n].value},n.prototype._getXVolume=function(t){var u=this._calcData.length,r=-1,i;if(this._hasXs)for(r=this._xVals.indexOf(t),i=0;i<this._xVals.length;i++)if(i<this._xVals.length-1&&this._xVals[i]<=t&&t<=this._xVals[i+1]){r=i;break}else if(i===0&&t<=this._xVals[i]){r=i;break}else if(i===this._xVals.length-1&&this._xVals[i]<=t){r=i;break}return this._hasXs&&(t=n.convertToRange(t,0,u-1,this._xDataMin,this._xDataMax)),r===-1&&(r=wjcCore.clamp(Math.round(t),0,u-1)),this._calcData[r].value+(t-r)*this._calcData[r].width-.5*this._calcData[r].width},n.convertToRange=function(n,t,i,r,u){return t===i||r===u?0:(n-r)*(i-t)/(u-r)+t},n.prototype._fillGaps=function(){if(this._xDataType===wjcCore.DataType.Date&&this._xVals!==null&&!(this._xVals.length<=0))for(var n=this._xDataMin,i=this._xDataMax,t=1;n<i;t++)n=new Date(n),n.setDate(n.getDate()+1),n=n.valueOf(),n!==this._xVals[t]&&(this._xVals.splice(t,0,n),this._volumes.splice(t,0,0))},n}();exports._VolumeHelper=_VolumeHelper